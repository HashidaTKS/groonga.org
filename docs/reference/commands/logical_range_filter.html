<!DOCTYPE html>

<html lang="en">
  <head>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-7532323-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-7532323-1');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>7.3.34. logical_range_filter &#8212; Groonga v11.1.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../static/groonga.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../static/documentation_options.js"></script>
    <script src="../../static/jquery.js"></script>
    <script src="../../static/underscore.js"></script>
    <script src="../../static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7.3.35. logical_select" href="logical_select.html" />
    <link rel="prev" title="7.3.33. logical_parameters" href="logical_parameters.html" /> 
      <meta property="fb:page_id" content="201193596592346" /><!-- groonga -->
    <meta property="fb:admins" content="664204556" /><!-- kouhei.sutou -->
    <meta property="og:type" content="product" />
    <meta property="og:image" content="http://groonga.org/images/logos/groonga-icon-full-size.png" />
    <meta property="og:site_name" content="groonga" />

    <link rel="stylesheet" href="/css/sphinx.css" type="text/css" />
  </head>
  <body>
    <div id="fb-root"></div>

<div class="header">
  <h1 class="title">
    <a id="top-link" href="../../../">
      <span class="project">groonga</span>
      <span class="separator">-</span>
      <span class="description">An open-source fulltext search engine and column store.</span>
    </a>
  </h1>

      <div class="facebook-buttons">
      <fb:like href="http://www.facebook.com/pages/groonga/201193596592346"
               layout="standard"
               width="290"></fb:like>
    </div>
    <div class="other-language-links">

    <ul>
      <li><a href="../../../ja/docs/reference/commands/logical_range_filter.html">日本語</a></li>
    </ul>
  </div>
</div>
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="logical_select.html" title="7.3.35. logical_select"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="logical_parameters.html" title="7.3.33. logical_parameters"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Groonga v11.1.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../reference.html" ><span class="section-number">7. </span>Reference manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../command.html" accesskey="U"><span class="section-number">7.3. </span>Command</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">7.3.34. </span><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code></a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="logical-range-filter">
<h1><span class="section-number">7.3.34. </span><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code><a class="headerlink" href="#logical-range-filter" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2><span class="section-number">7.3.34.1. </span>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.0.0.</span></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> is a sharding version of
<a class="reference internal" href="range_filter.html"><span class="doc">range_filter</span></a>. <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> searches records from
multiple tables and outputs them.</p>
<p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> is similar to <a class="reference internal" href="logical_select.html"><span class="doc">logical_select</span></a>. Both of
them searches records from multiples tables and outputs
them. <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> stops searching when the number of
matched records is requested the number of
records. <a class="reference internal" href="logical_select.html"><span class="doc">logical_select</span></a> searches all records and outputs only
needed records.</p>
<p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> has performance merit but some restrictions.</p>
<p>If many records are matched and requested records are small,
<code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> will be faster than <a class="reference internal" href="logical_select.html"><span class="doc">logical_select</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> doesn’t support drilldown because drilldown
requires all matched records. <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> may not find
all matched records. So <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> doesn’t support
drilldown.</p>
<p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> doesn’t return the number of all matched
records. Because <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> may not search all matched
records.</p>
<p>You need to <a class="reference internal" href="plugin_register.html"><span class="doc">plugin_register</span></a> <code class="docutils literal notranslate"><span class="pre">sharding</span></code> plugin because
this command is included in <code class="docutils literal notranslate"><span class="pre">sharding</span></code> plugin.</p>
</div>
<div class="section" id="syntax">
<h2><span class="section-number">7.3.34.2. </span>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p>This command takes many parameters.</p>
<p>The required parameters are <code class="docutils literal notranslate"><span class="pre">logical_table</span></code> and <code class="docutils literal notranslate"><span class="pre">shard_key</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span>
  <span class="n">logical_table</span>
  <span class="n">shard_key</span>
  <span class="p">[</span><span class="nb">min</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
  <span class="p">[</span><span class="n">min_border</span><span class="o">=</span><span class="s2">&quot;include&quot;</span><span class="p">]</span>
  <span class="p">[</span><span class="nb">max</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
  <span class="p">[</span><span class="n">max_border</span><span class="o">=</span><span class="s2">&quot;include&quot;</span><span class="p">]</span>
  <span class="p">[</span><span class="n">order</span><span class="o">=</span><span class="s2">&quot;ascending&quot;</span><span class="p">]</span>
  <span class="p">[</span><span class="nb">filter</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
  <span class="p">[</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
  <span class="p">[</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">]</span>
  <span class="p">[</span><span class="n">output_columns</span><span class="o">=</span><span class="s2">&quot;_key, *&quot;</span><span class="p">]</span>
  <span class="p">[</span><span class="n">use_range_index</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
  <span class="p">[</span><span class="n">post_filter</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
  <span class="p">[</span><span class="n">sort_keys</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
</pre></div>
</div>
<p>There are some parameters that can be only used as named
parameters. You can’t use these parameters as ordered parameters. You
must specify parameter name.</p>
<p>Here are parameters that can be only used as named parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cache=no</span></code></p></li>
</ul>
</div></blockquote>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.9: </span>This command has the following named parameters for dynamic columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].stage=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].flags=COLUMN_SCALAR</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].type=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].value=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.sort_keys=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.group_keys=null</span></code></p></li>
</ul>
</div></blockquote>
<p>You can use one or more alphabets, digits, <code class="docutils literal notranslate"><span class="pre">_</span></code> for <code class="docutils literal notranslate"><span class="pre">${NAME}</span></code>. For
example, <code class="docutils literal notranslate"><span class="pre">column1</span></code> is a valid <code class="docutils literal notranslate"><span class="pre">${NAME}</span></code>. This is the same rule as
normal column. See also <a class="reference internal" href="column_create.html#column-create-name"><span class="std std-ref">name</span></a>.</p>
<p>Parameters that have the same <code class="docutils literal notranslate"><span class="pre">${NAME}</span></code> are grouped.</p>
<p>For example, the following parameters specify one dynamic column:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name].stage</span> <span class="pre">initial</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name].type</span> <span class="pre">UInt32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name].value</span> <span class="pre">29</span></code></p></li>
</ul>
</div></blockquote>
<p>The following parameters specify two dynamic columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name1].stage</span> <span class="pre">initial</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name1].type</span> <span class="pre">UInt32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name1].value</span> <span class="pre">29</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name2].stage</span> <span class="pre">filtered</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name2].type</span> <span class="pre">Float</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name2].value</span> <span class="pre">'_score</span> <span class="pre">*</span> <span class="pre">0.1'</span></code></p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="usage">
<h2><span class="section-number">7.3.34.3. </span>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Let’s learn about usage with examples. This section shows many popular
usages.</p>
<p>You need to register <code class="docutils literal notranslate"><span class="pre">sharding</span></code> plugin because this command is
included in <code class="docutils literal notranslate"><span class="pre">sharding</span></code> plugin.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">sharding</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
</pre></div>
</div>
<p>Here are a schema definition and sample data to show usage.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries_20150708</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Entries_20150708</span> <span class="n">created_at</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Entries_20150708</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Entries_20150708</span> <span class="n">n_likes</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Entries_20150708</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">table_create</span> <span class="n">Entries_20150709</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Entries_20150709</span> <span class="n">created_at</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Entries_20150709</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Entries_20150709</span> <span class="n">n_likes</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Entries_20150709</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_key_index_20150708</span> \
  <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries_20150708</span> <span class="n">_key</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content_index_20150708</span> \
  <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries_20150708</span> <span class="n">content</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_key_index_20150709</span> \
  <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries_20150709</span> <span class="n">_key</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content_index_20150709</span> \
  <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries_20150709</span> <span class="n">content</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries_20150708</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>       <span class="s2">&quot;The first post!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015/07/08 00:00:00&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span>    <span class="s2">&quot;Welcome! This is my first post!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span>    <span class="mi">5</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span>        <span class="s2">&quot;Hello&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>       <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
 <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015/07/08 01:00:00&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span>    <span class="s2">&quot;I started to use Groonga. It&#39;s very fast!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span>    <span class="mi">10</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span>        <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>       <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span>
 <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015/07/08 02:00:00&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span>    <span class="s2">&quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span>    <span class="mi">15</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span>        <span class="s2">&quot;Groonga&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], 3]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries_20150709</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>       <span class="s2">&quot;Good-bye Senna&quot;</span><span class="p">,</span>
 <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015/07/09 00:00:00&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span>    <span class="s2">&quot;I migrated all Senna system!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span>    <span class="mi">3</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span>        <span class="s2">&quot;Senna&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>       <span class="s2">&quot;Good-bye Tritonn&quot;</span><span class="p">,</span>
 <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015/07/09 01:00:00&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span>    <span class="s2">&quot;I also migrated all Tritonn system!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span>    <span class="mi">3</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span>        <span class="s2">&quot;Senna&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], 2]</span>
</pre></div>
</div>
<p>There are two tables, <code class="docutils literal notranslate"><span class="pre">Entries_20150708</span></code> and <code class="docutils literal notranslate"><span class="pre">Entries_20150709</span></code>,
for blog entries.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You need to use <code class="docutils literal notranslate"><span class="pre">${LOGICAL_TABLE_NAME}_${YYYYMMDD}</span></code> naming rule
for table names. In this example, <code class="docutils literal notranslate"><span class="pre">LOGICAL_TABLE_NAME</span></code> is
<code class="docutils literal notranslate"><span class="pre">Entries</span></code> and <code class="docutils literal notranslate"><span class="pre">YYYYMMDD</span></code> is <code class="docutils literal notranslate"><span class="pre">20150708</span></code> or <code class="docutils literal notranslate"><span class="pre">20150709</span></code>.</p>
</div>
<p>An entry has title, created time, content, the number of likes for the
entry and tag. Title is key of <code class="docutils literal notranslate"><span class="pre">Entries_YYYYMMDD</span></code>. Created time is
value of <code class="docutils literal notranslate"><span class="pre">Entries_YYYYMMDD.created_at</span></code> column. Content is value of
<code class="docutils literal notranslate"><span class="pre">Entries_YYYYMMDD.content</span></code> column. The number of likes is value of
<code class="docutils literal notranslate"><span class="pre">Entries_YYYYMMDD.n_likes</span></code> column. Tag is value of
<code class="docutils literal notranslate"><span class="pre">Entries_YYYYMMDD.tag</span></code> column.</p>
<p><code class="docutils literal notranslate"><span class="pre">Entries_YYYYMMDD._key</span></code> column and <code class="docutils literal notranslate"><span class="pre">Entries_YYYYMMDD.content</span></code>
column are indexed using <code class="docutils literal notranslate"><span class="pre">TokenBigram</span></code> tokenizer. So both
<code class="docutils literal notranslate"><span class="pre">Entries_YYYYMMDD._key</span></code> and <code class="docutils literal notranslate"><span class="pre">Entries_YYYYMMDD.content</span></code> are
fulltext search ready.</p>
<p>OK. The schema and data for examples are ready.</p>
<div class="section" id="simple-usage">
<h3><span class="section-number">7.3.34.3.1. </span>Simple usage<a class="headerlink" href="#simple-usage" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
</div>
</div>
<div class="section" id="parameters">
<h2><span class="section-number">7.3.34.4. </span>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>This section describes parameters of <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code>.</p>
<div class="section" id="required-parameters">
<h3><span class="section-number">7.3.34.4.1. </span>Required parameters<a class="headerlink" href="#required-parameters" title="Permalink to this headline">¶</a></h3>
<p>There are required parameters, <code class="docutils literal notranslate"><span class="pre">logical_table</span></code> and <code class="docutils literal notranslate"><span class="pre">shard_key</span></code>.</p>
<div class="section" id="logical-table">
<h4><span class="section-number">7.3.34.4.1.1. </span><code class="docutils literal notranslate"><span class="pre">logical_table</span></code><a class="headerlink" href="#logical-table" title="Permalink to this headline">¶</a></h4>
<p>Specifies logical table name. It means table name without
<code class="docutils literal notranslate"><span class="pre">_YYYYMMDD</span></code> postfix. If you use actual table such as
<code class="docutils literal notranslate"><span class="pre">Entries_20150708</span></code>, <code class="docutils literal notranslate"><span class="pre">Entries_20150709</span></code> and so on, logical table
name is <code class="docutils literal notranslate"><span class="pre">Entries</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span>

<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1519131606.676006,</span>
<span class="c1">#     0.0006020069122314453</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_key&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;content&quot;,</span>
<span class="c1">#         &quot;Text&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;created_at&quot;,</span>
<span class="c1">#         &quot;Time&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;tag&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;The first post!&quot;,</span>
<span class="c1">#       &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#       1436281200.0,</span>
<span class="c1">#       5,</span>
<span class="c1">#       &quot;Hello&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#       1436284800.0,</span>
<span class="c1">#       10,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Mroonga&quot;,</span>
<span class="c1">#       &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#       1436288400.0,</span>
<span class="c1">#       15,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Senna&quot;,</span>
<span class="c1">#       &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#       1436367600.0,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#       &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#       1436371200.0,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>If nonexistent table is specified, an error is returned.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> <span class="o">--</span><span class="n">logical_table</span> <span class="n">Nonexistent</span> <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     -22,</span>
<span class="c1">#     1519132441.586192,</span>
<span class="c1">#     0.0005924701690673828,</span>
<span class="c1">#     &quot;[logical_range_filter] no shard exists: logical_table: &lt;Nonexistent&gt;: shard_key: &lt;created_at&gt;&quot;,</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga::Sharding::LogicalRangeFilterCommand::Executor.execute&quot;,</span>
<span class="c1">#         &quot;/tmp/local/lib/groonga/plugins/sharding/logical_range_filter.rb&quot;,</span>
<span class="c1">#         193</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="shard-key">
<h4><span class="section-number">7.3.34.4.1.2. </span><code class="docutils literal notranslate"><span class="pre">shard_key</span></code><a class="headerlink" href="#shard-key" title="Permalink to this headline">¶</a></h4>
<p>Specifies column name which is treated as shared key in each parted table.</p>
<p>TODO: Add examples</p>
</div>
</div>
<div class="section" id="optional-parameters">
<h3><span class="section-number">7.3.34.4.2. </span>Optional parameters<a class="headerlink" href="#optional-parameters" title="Permalink to this headline">¶</a></h3>
<p>There are optional parameters.</p>
<div class="section" id="min">
<h4><span class="section-number">7.3.34.4.2.1. </span><code class="docutils literal notranslate"><span class="pre">min</span></code><a class="headerlink" href="#min" title="Permalink to this headline">¶</a></h4>
<p>Specifies the min value of <code class="docutils literal notranslate"><span class="pre">shard_key</span></code></p>
<p>TODO: Add examples</p>
</div>
<div class="section" id="min-border">
<h4><span class="section-number">7.3.34.4.2.2. </span><code class="docutils literal notranslate"><span class="pre">min_border</span></code><a class="headerlink" href="#min-border" title="Permalink to this headline">¶</a></h4>
<p>Specifies whether the min value of borderline must be include or not.
Specify <code class="docutils literal notranslate"><span class="pre">include</span></code> or <code class="docutils literal notranslate"><span class="pre">exclude</span></code> as the value of this parameter.</p>
<p>TODO: Add examples</p>
</div>
<div class="section" id="max">
<h4><span class="section-number">7.3.34.4.2.3. </span><code class="docutils literal notranslate"><span class="pre">max</span></code><a class="headerlink" href="#max" title="Permalink to this headline">¶</a></h4>
<p>Specifies the max value of <code class="docutils literal notranslate"><span class="pre">shard_key</span></code>.</p>
<p>TODO: Add examples</p>
</div>
<div class="section" id="max-border">
<h4><span class="section-number">7.3.34.4.2.4. </span><code class="docutils literal notranslate"><span class="pre">max_border</span></code><a class="headerlink" href="#max-border" title="Permalink to this headline">¶</a></h4>
<p>Specifies whether the max value of borderline must be include or not.
Specify <code class="docutils literal notranslate"><span class="pre">include</span></code> or <code class="docutils literal notranslate"><span class="pre">exclude</span></code> as the value of this parameter.</p>
<p>TODO: Add examples</p>
</div>
<div class="section" id="order">
<h4><span class="section-number">7.3.34.4.2.5. </span><code class="docutils literal notranslate"><span class="pre">order</span></code><a class="headerlink" href="#order" title="Permalink to this headline">¶</a></h4>
<p>Specifies order of search result.
Specify <code class="docutils literal notranslate"><span class="pre">ascending</span></code> or <code class="docutils literal notranslate"><span class="pre">descending</span></code> as the value of this parameter.</p>
<p>If we set <code class="docutils literal notranslate"><span class="pre">ascending</span></code> in this parameter, search results are sorted by ascending order based on <code class="docutils literal notranslate"><span class="pre">shared_key</span></code>.
If we set <code class="docutils literal notranslate"><span class="pre">descending</span></code> in this parameter, search results are sorted by descending order based on <code class="docutils literal notranslate"><span class="pre">shared_key</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> <span class="o">--</span><span class="n">order</span> <span class="s2">&quot;descending&quot;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1557403984.311448,</span>
<span class="c1">#     0.0003597736358642578</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_key&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;content&quot;,</span>
<span class="c1">#         &quot;Text&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;created_at&quot;,</span>
<span class="c1">#         &quot;Time&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;tag&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#       &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#       1436371200,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Senna&quot;,</span>
<span class="c1">#       &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#       1436367600,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Mroonga&quot;,</span>
<span class="c1">#       &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#       1436288400,</span>
<span class="c1">#       15,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#       1436284800,</span>
<span class="c1">#       10,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;The first post!&quot;,</span>
<span class="c1">#       &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#       1436281200,</span>
<span class="c1">#       5,</span>
<span class="c1">#       &quot;Hello&quot;</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="search-related-parameters">
<span id="logical-range-filter-search-related-parameters"></span><h3><span class="section-number">7.3.34.4.3. </span>Search related parameters<a class="headerlink" href="#search-related-parameters" title="Permalink to this headline">¶</a></h3>
<p>This command provides <a class="reference internal" href="select.html"><span class="doc">select</span></a> compatible search related
parameters.</p>
<div class="section" id="filter">
<span id="logical-range-filter-filter"></span><h4><span class="section-number">7.3.34.4.3.1. </span><code class="docutils literal notranslate"><span class="pre">filter</span></code><a class="headerlink" href="#filter" title="Permalink to this headline">¶</a></h4>
<p>Corresponds to <a class="reference internal" href="select.html#select-filter"><span class="std std-ref">filter</span></a> in <a class="reference internal" href="select.html"><span class="doc">select</span></a>. See
<a class="reference internal" href="select.html#select-filter"><span class="std std-ref">filter</span></a> for details.</p>
<p>Here is an example:</p>
<p>TODO</p>
</div>
<div class="section" id="post-filter">
<span id="logical-range-filter-post-filter"></span><h4><span class="section-number">7.3.34.4.3.2. </span><code class="docutils literal notranslate"><span class="pre">post_filter</span></code><a class="headerlink" href="#post-filter" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.1.1.</span></p>
</div>
<p>Specifies the filter text that is processed after <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage
dynamic columns are generated. You can use <code class="docutils literal notranslate"><span class="pre">post_filter</span></code> to filter
by <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage dynamic columns. Others are the same as
<a class="reference internal" href="#logical-range-filter-filter"><span class="std std-ref">filter</span></a>.</p>
<p>If you use <code class="docutils literal notranslate"><span class="pre">post_filter</span></code>, “stop searching when enough records are
matched in a table” feature is disabled. (“Stop searching against rest
tables when enough records are matched” is still enabled.)  Because
<code class="docutils literal notranslate"><span class="pre">post_filter</span></code> needs to wait dynamic columns generation. See also
<a class="reference internal" href="#logical-range-filter-dynamic-column-related-parameters"><span class="std std-ref">Dynamic column related parameters</span></a>.</p>
<p>Here is an example that shows entries only in popular tag. All target
entries have <code class="docutils literal notranslate"><span class="pre">system</span></code> or <code class="docutils literal notranslate"><span class="pre">use</span></code> words:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">filtered</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;window_sum(n_likes)&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">group_keys</span> <span class="s1">&#39;tag&#39;</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;content @ &quot;system&quot; || content @ &quot;use&quot;&#39;</span> \
  <span class="o">--</span><span class="n">post_filter</span> <span class="s1">&#39;n_likes_sum_per_tag &gt; 10&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">n_likes</span><span class="p">,</span><span class="n">n_likes_sum_per_tag</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_key&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes_sum_per_tag&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       10,</span>
<span class="c1">#       25</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Mroonga&quot;,</span>
<span class="c1">#       15,</span>
<span class="c1">#       25</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="output-related-parameters">
<h3><span class="section-number">7.3.34.4.4. </span>Output related parameters<a class="headerlink" href="#output-related-parameters" title="Permalink to this headline">¶</a></h3>
<div class="section" id="output-columns">
<span id="logical-range-filter-output-columns"></span><h4><span class="section-number">7.3.34.4.4.1. </span><code class="docutils literal notranslate"><span class="pre">output_columns</span></code><a class="headerlink" href="#output-columns" title="Permalink to this headline">¶</a></h4>
<p>Corresponds to <a class="reference internal" href="select.html#select-output-columns"><span class="std std-ref">output_columns</span></a> in <a class="reference internal" href="select.html"><span class="doc">select</span></a>. See
<a class="reference internal" href="select.html#select-output-columns"><span class="std std-ref">output_columns</span></a> for details.</p>
<p>Here is an example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, *&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_key&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;content&quot;,</span>
<span class="c1">#         &quot;Text&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;created_at&quot;,</span>
<span class="c1">#         &quot;Time&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;tag&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;The first post!&quot;,</span>
<span class="c1">#       &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#       1436281200.0,</span>
<span class="c1">#       5,</span>
<span class="c1">#       &quot;Hello&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#       1436284800.0,</span>
<span class="c1">#       10,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Mroonga&quot;,</span>
<span class="c1">#       &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#       1436288400.0,</span>
<span class="c1">#       15,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Senna&quot;,</span>
<span class="c1">#       &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#       1436367600.0,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#       &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#       1436371200.0,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="sort-keys">
<span id="logical-range-filter-sort-keys"></span><h4><span class="section-number">7.3.34.4.4.2. </span><code class="docutils literal notranslate"><span class="pre">sort_keys</span></code><a class="headerlink" href="#sort-keys" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 8.0.2.</span></p>
</div>
<p>Corresponds to <a class="reference internal" href="select.html#select-sort-keys"><span class="std std-ref">sort_keys</span></a> in <a class="reference internal" href="select.html"><span class="doc">select</span></a>. See
<a class="reference internal" href="select.html#select-sort-keys"><span class="std std-ref">sort_keys</span></a> for details.</p>
<p><code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> has a limitation. It works only when the number of
search target shards is one. If the number of search target shards is
larger than one, <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> doesn’t work.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is one exception for multiple shards. When the same value is
specified for <code class="docutils literal notranslate"><span class="pre">shard_key</span></code> and <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code>, they are supported.
This command processes target shards one by one by ascending
order. Thus, in this process, magnitude correlation about the value
of <code class="docutils literal notranslate"><span class="pre">shard_key</span></code> is kept among them. This is because <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code>
is supported when <code class="docutils literal notranslate"><span class="pre">shard_key</span></code> and <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> is same.</p>
</div>
<p>Here is an example that uses only one shard:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_select</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">created_at</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;created_at&quot;,</span>
<span class="c1">#           &quot;Time&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         1436284800.0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         1436288400.0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         1436281200.0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         1436367600.0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         1436371200.0</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>Here is an example that uses <code class="docutils literal notranslate"><span class="pre">shard_key</span></code> based value as the first
sort key:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">time</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">logical_select</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">hour2</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">filtered</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">hour2</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Time</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">hour2</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">hour2</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;time_classify_hour(created_at, 2)&#39;</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="n">hour2</span><span class="p">,</span><span class="o">-</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">hour2</span><span class="p">,</span><span class="n">n_likes</span><span class="p">,</span><span class="n">_key</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;hour2&quot;,</span>
<span class="c1">#           &quot;Time&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1436367600.0,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1436367600.0,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1436281200.0,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1436281200.0,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;The first post!&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1436288400.0,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Mroonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="offset">
<span id="logical-range-filter-offset"></span><h4><span class="section-number">7.3.34.4.4.3. </span><code class="docutils literal notranslate"><span class="pre">offset</span></code><a class="headerlink" href="#offset" title="Permalink to this headline">¶</a></h4>
<p>Corresponds to <a class="reference internal" href="select.html#select-offset"><span class="std std-ref">offset</span></a> in <a class="reference internal" href="select.html"><span class="doc">select</span></a>. See
<a class="reference internal" href="select.html#select-offset"><span class="std std-ref">offset</span></a> for details.</p>
<p>Here is an example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">offset</span> <span class="mi">2</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_key&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;content&quot;,</span>
<span class="c1">#         &quot;Text&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;created_at&quot;,</span>
<span class="c1">#         &quot;Time&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;tag&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Mroonga&quot;,</span>
<span class="c1">#       &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#       1436288400.0,</span>
<span class="c1">#       15,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Senna&quot;,</span>
<span class="c1">#       &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#       1436367600.0,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#       &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#       1436371200.0,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="limit">
<span id="logical-range-filter-limit"></span><h4><span class="section-number">7.3.34.4.4.4. </span><code class="docutils literal notranslate"><span class="pre">limit</span></code><a class="headerlink" href="#limit" title="Permalink to this headline">¶</a></h4>
<p>Corresponds to <a class="reference internal" href="select.html#select-limit"><span class="std std-ref">limit</span></a> in <a class="reference internal" href="select.html"><span class="doc">select</span></a>. See
<a class="reference internal" href="select.html#select-limit"><span class="std std-ref">limit</span></a> for details.</p>
<p>The difference from <a class="reference internal" href="select.html"><span class="doc">select</span></a> is that this command stops searching
when all requested records specified by
<a class="reference internal" href="#logical-range-filter-offset"><span class="std std-ref">offset</span></a> and
<a class="reference internal" href="#logical-range-filter-limit"><span class="std std-ref">limit</span></a> are found.</p>
<p>Here is an example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">2</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_key&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;content&quot;,</span>
<span class="c1">#         &quot;Text&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;created_at&quot;,</span>
<span class="c1">#         &quot;Time&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;tag&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;The first post!&quot;,</span>
<span class="c1">#       &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#       1436281200.0,</span>
<span class="c1">#       5,</span>
<span class="c1">#       &quot;Hello&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#       1436284800.0,</span>
<span class="c1">#       10,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="test-related-parameters">
<h3><span class="section-number">7.3.34.4.5. </span>Test related parameters<a class="headerlink" href="#test-related-parameters" title="Permalink to this headline">¶</a></h3>
<div class="section" id="use-range-index">
<h4><span class="section-number">7.3.34.4.5.1. </span><code class="docutils literal notranslate"><span class="pre">use_range_index</span></code><a class="headerlink" href="#use-range-index" title="Permalink to this headline">¶</a></h4>
<p>Specifies whether range_index is used or not.
Note that it’s a parameter for test. It should not be used for production.</p>
<p>TODO: Add examples</p>
</div>
</div>
<div class="section" id="dynamic-column-related-parameters">
<span id="logical-range-filter-dynamic-column-related-parameters"></span><h3><span class="section-number">7.3.34.4.6. </span>Dynamic column related parameters<a class="headerlink" href="#dynamic-column-related-parameters" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.9.</span></p>
</div>
<p>All dynamic column related parameters in <a class="reference internal" href="select.html"><span class="doc">select</span></a> are
supported. See <a class="reference internal" href="select.html#select-dynamic-column-related-parameters"><span class="std std-ref">Dynamic column related parameters</span></a> for
details.</p>
<p>If you use one or more dynamic columns, “stop searching when enough
records are matched in a table” feature is disabled. (“Stop searching
against rest tables when enough records are matched” is still
enabled.)  <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> searches all matched records in a
table even when requested the number of matched records is small. It’s
for supporting window function. Running window function requires all
target records in a table.</p>
<div class="section" id="columns-name-stage">
<span id="logical-range-filter-columns-name-stage"></span><h4><span class="section-number">7.3.34.4.6.1. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].stage</span></code><a class="headerlink" href="#columns-name-stage" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.9.</span></p>
</div>
<p>Corresponds to <a class="reference internal" href="select.html#select-columns-name-stage"><span class="std std-ref">columns[${NAME}].stage</span></a> in <a class="reference internal" href="select.html"><span class="doc">select</span></a>. See
<a class="reference internal" href="select.html#select-columns-name-stage"><span class="std std-ref">columns[${NAME}].stage</span></a> for details.</p>
<p>This is a required parameter.</p>
<p>Here is an example that creates <code class="docutils literal notranslate"><span class="pre">is_popular</span></code> column at <code class="docutils literal notranslate"><span class="pre">initial</span></code>
stage. You can use <code class="docutils literal notranslate"><span class="pre">is_popular</span></code> in all parameters such as <code class="docutils literal notranslate"><span class="pre">filter</span></code>
and <code class="docutils literal notranslate"><span class="pre">output_columns</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">is_popular</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">is_popular</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Bool</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">is_popular</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;n_likes &gt;= 10&#39;</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="n">is_popular</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">is_popular</span><span class="p">,</span><span class="n">n_likes</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_id&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;is_popular&quot;,</span>
<span class="c1">#         &quot;Bool&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       2,</span>
<span class="c1">#       true,</span>
<span class="c1">#       10</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       3,</span>
<span class="c1">#       true,</span>
<span class="c1">#       15</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="columns-name-flags">
<span id="logical-range-filter-columns-name-flags"></span><h4><span class="section-number">7.3.34.4.6.2. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].flags</span></code><a class="headerlink" href="#columns-name-flags" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.9.</span></p>
</div>
<p>Corresponds to <a class="reference internal" href="select.html#select-columns-name-flags"><span class="std std-ref">columns[${NAME}].flags</span></a> in <a class="reference internal" href="select.html"><span class="doc">select</span></a>. See
<a class="reference internal" href="select.html#select-columns-name-flags"><span class="std std-ref">columns[${NAME}].flags</span></a> for details.</p>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">COLUMN_SCALAR</span></code>.</p>
<p>Here is an example that creates a vector column by <code class="docutils literal notranslate"><span class="pre">COLUMN_VECTOR</span></code>
flags. <code class="docutils literal notranslate"><span class="pre">plugin_register</span> <span class="pre">functions/vector</span></code> is for using
<a class="reference internal" href="../functions/vector_new.html"><span class="doc">vector_new</span></a> function:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">vector</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">vector</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">vector</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_VECTOR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">vector</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">vector</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;vector_new(1, 2, 3)&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">vector</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_id&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;vector&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       1,</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         2,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       2,</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         2,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       3,</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         2,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       1,</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         2,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       2,</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         2,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="columns-name-type">
<span id="logical-range-filter-columns-name-type"></span><h4><span class="section-number">7.3.34.4.6.3. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].type</span></code><a class="headerlink" href="#columns-name-type" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.9.</span></p>
</div>
<p>Corresponds to <a class="reference internal" href="select.html#select-columns-name-type"><span class="std std-ref">columns[${NAME}].type</span></a> in <a class="reference internal" href="select.html"><span class="doc">select</span></a>. See
<a class="reference internal" href="select.html#select-columns-name-type"><span class="std std-ref">columns[${NAME}].type</span></a> for details.</p>
<p>This is a required parameter.</p>
<p>Here is an example that creates a <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> type column. Stored
value is casted to <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> automatically. In this example,
number is casted to <code class="docutils literal notranslate"><span class="pre">ShortText</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_string</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_string</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_string</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">n_likes</span><span class="p">,</span><span class="n">n_likes_string</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_id&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes_string&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       1,</span>
<span class="c1">#       5,</span>
<span class="c1">#       &quot;5&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       2,</span>
<span class="c1">#       10,</span>
<span class="c1">#       &quot;10&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       3,</span>
<span class="c1">#       15,</span>
<span class="c1">#       &quot;15&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       1,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;3&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       2,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;3&quot;</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="columns-name-value">
<span id="logical-range-filter-columns-name-value"></span><h4><span class="section-number">7.3.34.4.6.4. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].value</span></code><a class="headerlink" href="#columns-name-value" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.9.</span></p>
</div>
<p>Corresponds to <a class="reference internal" href="select.html#select-columns-name-value"><span class="std std-ref">columns[${NAME}].value</span></a> in <a class="reference internal" href="select.html"><span class="doc">select</span></a>. See
<a class="reference internal" href="select.html#select-columns-name-value"><span class="std std-ref">columns[${NAME}].value</span></a> for details.</p>
<p>You need to specify <a class="reference internal" href="../window_function.html"><span class="doc">Window function</span></a> as <code class="docutils literal notranslate"><span class="pre">value</span></code>
value and other window function related parameters when you use window
function. See <a class="reference internal" href="#logical-range-filter-window-function-related-parameters"><span class="std std-ref">Window function related parameters</span></a>
for details.</p>
<p>This is a required parameter.</p>
<p>Here is an example that creates a new dynamic column that stores the
number of characters of content. This example uses
<a class="reference internal" href="../functions/string_length.html"><span class="doc">string_length</span></a> function in
<code class="docutils literal notranslate"><span class="pre">functions/string</span></code> plugin to compute the number of characters in a
string. <a class="reference internal" href="plugin_register.html"><span class="doc">plugin_register</span></a> is used to register
<code class="docutils literal notranslate"><span class="pre">functions/string</span></code> plugin:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">string</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">content_length</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">content_length</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">content_length</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;string_length(content)&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">content_length</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_id&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;content&quot;,</span>
<span class="c1">#         &quot;Text&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;content_length&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       1,</span>
<span class="c1">#       &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#       31</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       2,</span>
<span class="c1">#       &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#       41</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#       64</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       1,</span>
<span class="c1">#       &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#       28</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       2,</span>
<span class="c1">#       &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#       35</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="window-function-related-parameters">
<span id="logical-range-filter-window-function-related-parameters"></span><h3><span class="section-number">7.3.34.4.7. </span>Window function related parameters<a class="headerlink" href="#window-function-related-parameters" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.9.</span></p>
</div>
<p>All window function related parameters in <a class="reference internal" href="select.html"><span class="doc">select</span></a> are
supported. See <a class="reference internal" href="select.html#select-window-function-related-parameters"><span class="std std-ref">Window function related parameters</span></a> for
details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Window function over multiple tables aren’t supported version 9.0.1 or before.
Groonga supported it since version 9.0.2 or later.
However, we need to align the same order for shard key and leading group key or sort key.</p>
<p>For example, we can apply the window function to over multiple tables as below case.
Because the below example aligns the same order for shard key and leading group key.</p>
<p>The leading group key is <code class="docutils literal notranslate"><span class="pre">price</span></code> and shard key is <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> in the below example.
We can apply the window function to over multiple tables in the below example.
Because <code class="docutils literal notranslate"><span class="pre">price</span></code> and <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> aligns the same order.</p>
</div>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">sharding</span>

<span class="n">table_create</span> <span class="n">Logs_20170415</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Logs_20170415</span> <span class="n">timestamp</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="n">column_create</span> <span class="n">Logs_20170415</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Logs_20170415</span> <span class="n">n_likes</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>

<span class="n">table_create</span> <span class="n">Logs_20170416</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Logs_20170416</span> <span class="n">timestamp</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="n">column_create</span> <span class="n">Logs_20170416</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Logs_20170416</span> <span class="n">n_likes</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs_20170415</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/04/15 00:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/04/15 01:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/04/15 01:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs_20170416</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/04/16 10:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/04/16 11:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/04/16 11:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">logical_range_filter</span> <span class="n">Logs</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">timestamp</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;window_count()&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">group_keys</span> <span class="n">price</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">price</span><span class="p">,</span><span class="n">count</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     0.0,</span>
<span class="c1">#     0.0</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         6</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;price&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;count&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         100,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         100,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         200,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         200,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         300,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         300,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<div class="section" id="columns-name-window-sort-keys">
<span id="logical-range-filter-columns-name-window-sort-keys"></span><h4><span class="section-number">7.3.34.4.7.1. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.sort_keys</span></code><a class="headerlink" href="#columns-name-window-sort-keys" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.9.</span></p>
</div>
<p>Corresponds to <a class="reference internal" href="select.html#select-columns-name-window-sort-keys"><span class="std std-ref">columns[${NAME}].window.sort_keys</span></a> in
<a class="reference internal" href="select.html"><span class="doc">select</span></a>. See <a class="reference internal" href="select.html#select-columns-name-window-sort-keys"><span class="std std-ref">columns[${NAME}].window.sort_keys</span></a> for
details.</p>
<p>You must specify <a class="reference internal" href="#logical-range-filter-columns-name-window-sort-keys"><span class="std std-ref">columns[${NAME}].window.sort_keys</span></a>
or <a class="reference internal" href="#logical-range-filter-columns-name-window-group-keys"><span class="std std-ref">columns[${NAME}].window.group_keys</span></a> to use window
function.</p>
<p>Here is an example that computes cumulative sum per
<code class="docutils literal notranslate"><span class="pre">Entries.tag</span></code>. Each group is sorted by <code class="docutils literal notranslate"><span class="pre">Entries._key</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;window_sum(n_likes)&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">sort_keys</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">group_keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">tag</span><span class="p">,</span><span class="n">_key</span><span class="p">,</span><span class="n">n_likes</span><span class="p">,</span><span class="n">n_likes_cumulative_sum_per_tag</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;tag&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_key&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes_cumulative_sum_per_tag&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Hello&quot;,</span>
<span class="c1">#       &quot;The first post!&quot;,</span>
<span class="c1">#       5,</span>
<span class="c1">#       5</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       10,</span>
<span class="c1">#       10</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       &quot;Mroonga&quot;,</span>
<span class="c1">#       15,</span>
<span class="c1">#       25</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Senna&quot;,</span>
<span class="c1">#       &quot;Good-bye Senna&quot;,</span>
<span class="c1">#       3,</span>
<span class="c1">#       3</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Senna&quot;,</span>
<span class="c1">#       &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#       3,</span>
<span class="c1">#       6</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="columns-name-window-group-keys">
<span id="logical-range-filter-columns-name-window-group-keys"></span><h4><span class="section-number">7.3.34.4.7.2. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.group_keys</span></code><a class="headerlink" href="#columns-name-window-group-keys" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.9.</span></p>
</div>
<p>Corresponds to <a class="reference internal" href="select.html#select-columns-name-window-group-keys"><span class="std std-ref">columns[${NAME}].window.group_keys</span></a> in
<a class="reference internal" href="select.html"><span class="doc">select</span></a>. See <a class="reference internal" href="select.html#select-columns-name-window-group-keys"><span class="std std-ref">columns[${NAME}].window.group_keys</span></a> for
details.</p>
<p>You must specify <a class="reference internal" href="#logical-range-filter-columns-name-window-sort-keys"><span class="std std-ref">columns[${NAME}].window.sort_keys</span></a>
or <a class="reference internal" href="#logical-range-filter-columns-name-window-group-keys"><span class="std std-ref">columns[${NAME}].window.group_keys</span></a> to use window
function.</p>
<p>Here is an example that computes sum per <code class="docutils literal notranslate"><span class="pre">Entries.tag</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;window_sum(n_likes)&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">group_keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">tag</span><span class="p">,</span><span class="n">_key</span><span class="p">,</span><span class="n">n_likes</span><span class="p">,</span><span class="n">n_likes_sum_per_tag</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;tag&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_key&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes_sum_per_tag&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Hello&quot;,</span>
<span class="c1">#       &quot;The first post!&quot;,</span>
<span class="c1">#       5,</span>
<span class="c1">#       5</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       10,</span>
<span class="c1">#       25</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       &quot;Mroonga&quot;,</span>
<span class="c1">#       15,</span>
<span class="c1">#       25</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Senna&quot;,</span>
<span class="c1">#       &quot;Good-bye Senna&quot;,</span>
<span class="c1">#       3,</span>
<span class="c1">#       6</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Senna&quot;,</span>
<span class="c1">#       &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#       3,</span>
<span class="c1">#       6</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="cache-related-parameter">
<h3><span class="section-number">7.3.34.4.8. </span>Cache related parameter<a class="headerlink" href="#cache-related-parameter" title="Permalink to this headline">¶</a></h3>
<div class="section" id="cache">
<span id="logical-range-filter-cache"></span><h4><span class="section-number">7.3.34.4.8.1. </span><code class="docutils literal notranslate"><span class="pre">cache</span></code><a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h4>
<p>Specifies whether caching the result of this query or not.</p>
<p>If the result of this query is cached, the next same query returns
response quickly by using the cache.</p>
<p>It doesn’t control whether existing cached result is used or not.</p>
<p>Here are available values:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">no</span></code></p></td>
<td><p>Don’t cache the output of this query.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">yes</span></code></p></td>
<td><p>Cache the output of this query.
It’s the default value.</p></td>
</tr>
</tbody>
</table>
<p>Here is an example to disable caching the result of this query:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logical_range_filter</span> \
  <span class="o">--</span><span class="n">logical_table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">created_at</span> \
  <span class="o">--</span><span class="n">cache</span> <span class="n">no</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;_key&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;content&quot;,</span>
<span class="c1">#         &quot;Text&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;created_at&quot;,</span>
<span class="c1">#         &quot;Time&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;n_likes&quot;,</span>
<span class="c1">#         &quot;UInt32&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;tag&quot;,</span>
<span class="c1">#         &quot;ShortText&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;The first post!&quot;,</span>
<span class="c1">#       &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#       1436281200.0,</span>
<span class="c1">#       5,</span>
<span class="c1">#       &quot;Hello&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Groonga&quot;,</span>
<span class="c1">#       &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#       1436284800.0,</span>
<span class="c1">#       10,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Mroonga&quot;,</span>
<span class="c1">#       &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#       1436288400.0,</span>
<span class="c1">#       15,</span>
<span class="c1">#       &quot;Groonga&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Senna&quot;,</span>
<span class="c1">#       &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#       1436367600.0,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#       &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#       1436371200.0,</span>
<span class="c1">#       3,</span>
<span class="c1">#       &quot;Senna&quot;</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">yes</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="return-value">
<h2><span class="section-number">7.3.34.5. </span>Return value<a class="headerlink" href="#return-value" title="Permalink to this headline">¶</a></h2>
<p>The command returns a response with the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="n">HEADER</span><span class="p">,</span>
  <span class="p">[</span>
    <span class="n">COLUMNS</span><span class="p">,</span>
    <span class="n">RECORDS</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>If the command fails, error details are in <code class="docutils literal notranslate"><span class="pre">HEADER</span></code>.</p>
<p>See <a class="reference internal" href="../command/output_format.html"><span class="doc">Output format</span></a> for <code class="docutils literal notranslate"><span class="pre">HEADER</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">COLUMNS</span></code> describes about output columns specified by
<a class="reference internal" href="#logical-range-filter-output-columns"><span class="std std-ref">output_columns</span></a>. It uses the following
format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span><span class="n">COLUMN_NAME_1</span><span class="p">,</span> <span class="n">COLUMN_TYPE_1</span><span class="p">],</span>
  <span class="p">[</span><span class="n">COLUMN_NAME_2</span><span class="p">,</span> <span class="n">COLUMN_TYPE_2</span><span class="p">],</span>
  <span class="o">...</span><span class="p">,</span>
  <span class="p">[</span><span class="n">COLUMN_NAME_N</span><span class="p">,</span> <span class="n">COLUMN_TYPE_N</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">COLUMNS</span></code> includes one or more output column information. Each
output column information includes the followings:</p>
<blockquote>
<div><ul class="simple">
<li><p>Column name as string</p></li>
<li><p>Column type as string or <code class="docutils literal notranslate"><span class="pre">null</span></code></p></li>
</ul>
</div></blockquote>
<p>Column name is extracted from value specified as
<a class="reference internal" href="#logical-range-filter-output-columns"><span class="std std-ref">output_columns</span></a>.</p>
<p>Column type is Groonga’s type name or <code class="docutils literal notranslate"><span class="pre">null</span></code>. It doesn’t describe
whether the column value is vector or scalar. You need to determine it
by whether real column value is array or not.</p>
<p>See <a class="reference internal" href="../types.html"><span class="doc">Data types</span></a> for type details.</p>
<p><code class="docutils literal notranslate"><span class="pre">null</span></code> is used when column value type isn’t determined. For example,
function call in <a class="reference internal" href="#logical-range-filter-output-columns"><span class="std std-ref">output_columns</span></a> such as
<code class="docutils literal notranslate"><span class="pre">--output_columns</span> <span class="pre">&quot;snippet_html(content)&quot;</span></code> uses <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>Here is an example of <code class="docutils literal notranslate"><span class="pre">COLUMNS</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span>     <span class="s2">&quot;UInt32&quot;</span><span class="p">],</span>
  <span class="p">[</span><span class="s2">&quot;_key&quot;</span><span class="p">,</span>    <span class="s2">&quot;ShortText&quot;</span><span class="p">],</span>
  <span class="p">[</span><span class="s2">&quot;n_likes&quot;</span><span class="p">,</span> <span class="s2">&quot;UInt32&quot;</span><span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">RECORDS</span></code> includes column values for each matched record. Included
records are selected by <a class="reference internal" href="#logical-range-filter-offset"><span class="std std-ref">offset</span></a> and
<a class="reference internal" href="#logical-range-filter-limit"><span class="std std-ref">limit</span></a>. It uses the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span>
    <span class="n">RECORD_1_COLUMN_1</span><span class="p">,</span>
    <span class="n">RECORD_1_COLUMN_2</span><span class="p">,</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">RECORD_1_COLUMN_N</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="n">RECORD_2_COLUMN_1</span><span class="p">,</span>
    <span class="n">RECORD_2_COLUMN_2</span><span class="p">,</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">RECORD_2_COLUMN_N</span>
  <span class="p">],</span>
  <span class="o">...</span>
  <span class="p">[</span>
    <span class="n">RECORD_N_COLUMN_1</span><span class="p">,</span>
    <span class="n">RECORD_N_COLUMN_2</span><span class="p">,</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">RECORD_N_COLUMN_N</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Here is an example <code class="docutils literal notranslate"><span class="pre">RECORDS</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;The first post!&quot;</span><span class="p">,</span>
    <span class="mi">5</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
    <span class="mi">10</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span>
    <span class="mi">15</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.3.34. <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code></a><ul>
<li><a class="reference internal" href="#summary">7.3.34.1. Summary</a></li>
<li><a class="reference internal" href="#syntax">7.3.34.2. Syntax</a></li>
<li><a class="reference internal" href="#usage">7.3.34.3. Usage</a><ul>
<li><a class="reference internal" href="#simple-usage">7.3.34.3.1. Simple usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameters">7.3.34.4. Parameters</a><ul>
<li><a class="reference internal" href="#required-parameters">7.3.34.4.1. Required parameters</a><ul>
<li><a class="reference internal" href="#logical-table">7.3.34.4.1.1. <code class="docutils literal notranslate"><span class="pre">logical_table</span></code></a></li>
<li><a class="reference internal" href="#shard-key">7.3.34.4.1.2. <code class="docutils literal notranslate"><span class="pre">shard_key</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#optional-parameters">7.3.34.4.2. Optional parameters</a><ul>
<li><a class="reference internal" href="#min">7.3.34.4.2.1. <code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li><a class="reference internal" href="#min-border">7.3.34.4.2.2. <code class="docutils literal notranslate"><span class="pre">min_border</span></code></a></li>
<li><a class="reference internal" href="#max">7.3.34.4.2.3. <code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li><a class="reference internal" href="#max-border">7.3.34.4.2.4. <code class="docutils literal notranslate"><span class="pre">max_border</span></code></a></li>
<li><a class="reference internal" href="#order">7.3.34.4.2.5. <code class="docutils literal notranslate"><span class="pre">order</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#search-related-parameters">7.3.34.4.3. Search related parameters</a><ul>
<li><a class="reference internal" href="#filter">7.3.34.4.3.1. <code class="docutils literal notranslate"><span class="pre">filter</span></code></a></li>
<li><a class="reference internal" href="#post-filter">7.3.34.4.3.2. <code class="docutils literal notranslate"><span class="pre">post_filter</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#output-related-parameters">7.3.34.4.4. Output related parameters</a><ul>
<li><a class="reference internal" href="#output-columns">7.3.34.4.4.1. <code class="docutils literal notranslate"><span class="pre">output_columns</span></code></a></li>
<li><a class="reference internal" href="#sort-keys">7.3.34.4.4.2. <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code></a></li>
<li><a class="reference internal" href="#offset">7.3.34.4.4.3. <code class="docutils literal notranslate"><span class="pre">offset</span></code></a></li>
<li><a class="reference internal" href="#limit">7.3.34.4.4.4. <code class="docutils literal notranslate"><span class="pre">limit</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#test-related-parameters">7.3.34.4.5. Test related parameters</a><ul>
<li><a class="reference internal" href="#use-range-index">7.3.34.4.5.1. <code class="docutils literal notranslate"><span class="pre">use_range_index</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#dynamic-column-related-parameters">7.3.34.4.6. Dynamic column related parameters</a><ul>
<li><a class="reference internal" href="#columns-name-stage">7.3.34.4.6.1. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].stage</span></code></a></li>
<li><a class="reference internal" href="#columns-name-flags">7.3.34.4.6.2. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].flags</span></code></a></li>
<li><a class="reference internal" href="#columns-name-type">7.3.34.4.6.3. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].type</span></code></a></li>
<li><a class="reference internal" href="#columns-name-value">7.3.34.4.6.4. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].value</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#window-function-related-parameters">7.3.34.4.7. Window function related parameters</a><ul>
<li><a class="reference internal" href="#columns-name-window-sort-keys">7.3.34.4.7.1. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.sort_keys</span></code></a></li>
<li><a class="reference internal" href="#columns-name-window-group-keys">7.3.34.4.7.2. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.group_keys</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cache-related-parameter">7.3.34.4.8. Cache related parameter</a><ul>
<li><a class="reference internal" href="#cache">7.3.34.4.8.1. <code class="docutils literal notranslate"><span class="pre">cache</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#return-value">7.3.34.5. Return value</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="logical_parameters.html"
                        title="previous chapter"><span class="section-number">7.3.33. </span><code class="docutils literal notranslate"><span class="pre">logical_parameters</span></code></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="logical_select.html"
                        title="next chapter"><span class="section-number">7.3.35. </span><code class="docutils literal notranslate"><span class="pre">logical_select</span></code></a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="logical_select.html" title="7.3.35. logical_select"
             >next</a> |</li>
        <li class="right" >
          <a href="logical_parameters.html" title="7.3.33. logical_parameters"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Groonga v11.1.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../reference.html" ><span class="section-number">7. </span>Reference manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../command.html" ><span class="section-number">7.3. </span>Command</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">7.3.34. </span><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code></a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2022, Brazil, Inc.
    </div>
      <script src="http://connect.facebook.net/en_US/all.js"></script>

    <script>
      FB.init({
         appId  : null,
         status : true, // check login status
         cookie : true, // enable cookies to allow the server to access the session
         xfbml  : true  // parse XFBML
      });
    </script>
  </body>

</html>