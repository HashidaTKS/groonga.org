---
layout: post.ja
title: Groonga 5.0.3リリース
description: Groonga 5.0.3をリリースしました！
published: false
---

## Groonga 5.0.3リリース

今日は肉の日ですね！[Groonga 5.0.3](/ja/docs/news.html#release-5-0-3) をリリースしました！

それぞれの環境毎のインストール方法: [インストール](/ja/docs/install.html)

### 変更内容

今回のリリースの主なトピックは次の通りです。

* Debian 8.0（Jessie）とUbuntu 15.04（Vivid Vervet）をサポート
* dumpコマンドの出力の改善とオプションによるカスタマイズのサポート
* キーサイズの上限値増加により長いクエリーのキャッシュをサポート
* [実験的] ログローテーションのサポート

### Debian 8.0（Jessie）とUbuntu 15.04（Vivid Vervet）をサポート

今月リリースされたDebian 8.0（Jessie）とUbuntu 15.04（Vivid Vervet）をサポートしました。
インストール手順はドキュメントを参照してください。

* [Debian 8.0](/ja/docs/install/debian.html)
* [Ubuntu 15.04](/ja/docs/install/ubuntu.html)

### dumpコマンドの出力の改善とオプションによるカスタマイズのサポート

dumpコマンドの出力を改善し、コマンドの出力順序によってリストアできない場合がある問題を修正しました。

また、オプションを指定することでほしい情報のみを出力することができるようになりました。dumpコマンドに指定できるようになったオプションは以下の通りです。

* スキーマのdumpの有無
  * `--dump_schema <yes（デフォルト）またはno>`
* レコードのdumpの有無
  * `--dump_records <yes（デフォルト）またはno>`
* インデックスのdumpの有無
  * `--dump_indexes <yes（デフォルト）またはno>`

それぞれyesまたはnoを指定することで、出力有無を制御することができます。デフォルトはyesなので、オプションを指定しない場合は出力されます。

さらに、プラグインのdumpもサポートしました。こちらも以下のように出力の有無を制御できます。

* プラグインのdumpの有無
  * `--dump_plugins <yes（デフォルト）またはno>`

### キーサイズの上限値増加により長いクエリーのキャッシュをサポート

キャッシュのキーにはクエリーを加工した値を使っているのですが、クエリーが一定以上の長さになるとキーに使えないので、キャッシュが有効になっていてもキャッシュされない場合があります。今まではキャッシュのキーサイズの上限値が4KiB（4096バイト）だったので、4KiBを超えるクエリーはキャッシュされませんでした。

今回のリリースからは64KiB - 1（65535バイト）に増えたので、4KiBを超えるクエリーでもキャッシュされるようになりました。

### [実験的] ログローテーションのサポート

実験的な機能として、ログローテーションをサポートしました。今まではログローテーションしたい場合は自前でやるか他のライブラリーを使う必要があったのですが、今回のリリースからはGroongaだけでログローテーションが可能になります。

デフォルトでは無効になっているので、ログローテーションしたい場合はgroongaコマンドの引数に以下のオプションを追加して、ローテートする閾値のファイルサイズ（バイト）を指定してください。

* Groongaプロセスのログ（groonga.log）
  * `--log-rotate-threshold-size <閾値>`
* クエリーのログ（query.log）
  * `--query-log-rotate-threshold-size <閾値>`

### さいごに

5.0.2からの詳細な変更点は [5.0.3リリース 2015-04-29](/ja/docs/news.html#release-5-0-3) を確認してください。

それでは、Groongaでガンガン検索してください！
