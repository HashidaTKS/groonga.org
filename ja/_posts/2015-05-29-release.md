---
layout: post.ja
title: Groonga 5.0.4リリース
description: Groonga 5.0.4をリリースしました！
published: false
---

## Groonga 5.0.4リリース

今日は肉の日ですね！[Groonga 5.0.4](/ja/docs/news.html#release-5-0-4) をリリースしました！

それぞれの環境毎のインストール方法: [インストール](/ja/docs/install.html)

### 変更内容

今回のリリースの主なトピックは次の通りです。

* メーリングリストの投稿先がかわりました
* インデックス更新中にクラッシュする不具合を修正
* 2文字以下の文字をTokenTrigramを使っていても検索できるようになりました
* TokenRegexpで改行などが無視される不具合を修正（インデックスの再構築が必要）

filter関係の機能を強化したり、まれにクラッシュする不具合が修正されているので
アップグレードをおすすめします。

### メーリングリストの投稿先がかわりました

5/11のSourceForge.JPのサイト名変更に伴い、メーリングリストの投稿先がかわりました。

* 旧: groonga-dev@lists.sourceforge.jp
* 新: groonga-dev@lists.osdn.me

過去のメールを参照したいときのアーカイブのリンク先も変更になっています。

* [http://osdn.jp/projects/groonga/lists/archive/dev/](http://osdn.jp/projects/groonga/lists/archive/dev/)

なお、当面の間は旧アドレスも使うことができます。詳細は以下のURLをご覧ください。

* [ニュース: サイト名称変更に伴うURL、ドメインの変更についてのお知らせ - OSDN運営・管理 - OSDN](http://osdn.jp/projects/sourceforge/news/24923)
* [ニュース: メーリングリスト移行の際の変更詳細 - OSDN運営・管理 - OSDN](http://osdn.jp/projects/sourceforge/news/24941)

### インデックス更新/参照中にクラッシュする不具合を修正

複数のプロセスないしスレッドからインデックスを更新/参照しているときに、まれに意図しないGroongaのクラッシュが発生する問題を修正しました。条件によっては二重にメモリを開放してしまうことによるものです。

発生しにくいとはいえ、突然Groongaがクラッシュしてしまうことのないようにアップグレードをおすすめします。

### 2文字以下の文字をTokenTrigramを使っていても検索できるようになりました

これまで、TokenBigramの場合には1文字のクエリであっても、検索できるようになっていました。(Groonga側でうまく検索できるようにしている)

ただし、それらしい結果を返す仕組みはTokenBigramが前提で、TokenTrigramといったトークナイザーのことを考慮していませんでした。

今回のリリースでは、TokenTrigramを使っていても2文字以下のクエリで検索できるようになりました。

### TokenRegexpで改行などが無視される不具合を修正（インデックスの再構築が必要）

TokenRegexpトークナイザーで、クエリに空白として扱われる文字が含まれている場合に正しく検索できない不具合を修正しました。

典型的な例は改行が含まれている場合です。例えば、今までは「abcd」が「ab\ncd」（\nは改行）にマッチしてしまっていたのですが、今後はマッチしなくなります。

なお、この修正により、すでにTokenRegexpトークナイザーを使っている場合はインデックスの再構築が必要になります。

### さいごに

5.0.3からの詳細な変更点は [5.0.4リリース 2015-05-29](/ja/docs/news.html#release-5-0-4) を確認してください。

それでは、Groongaでガンガン検索してください！
