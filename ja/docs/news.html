<!DOCTYPE html>

<html lang="ja">
  <head>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-7532323-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-7532323-1');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>お知らせ &#8212; Groonga v10.1.1ドキュメント</title>
    <link rel="stylesheet" href="static/groonga.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="static/documentation_options.js"></script>
    <script src="static/jquery.js"></script>
    <script src="static/underscore.js"></script>
    <script src="static/doctools.js"></script>
    <script src="static/language_data.js"></script>
    <script src="static/translations.js"></script>
    
    <link rel="shortcut icon" href="static/favicon.ico"/>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" /> 
      <meta property="fb:page_id" content="201193596592346" /><!-- groonga -->
    <meta property="fb:admins" content="664204556" /><!-- kouhei.sutou -->
    <meta property="og:type" content="product" />
    <meta property="og:image" content="http://groonga.org/images/logos/groonga-icon-full-size.png" />
    <meta property="og:site_name" content="groonga" />

    <link rel="stylesheet" href="/css/sphinx.css" type="text/css" />
  </head>
  <body>
    <div id="fb-root"></div>

<div class="header">
  <h1 class="title">
    <a id="top-link" href="./../">
      <span class="project">groonga</span>
      <span class="separator">-</span>
      <span class="description">オープンソースのカラムストア機能付き全文検索エンジン</span>
    </a>
  </h1>

      <div class="facebook-buttons">
      <fb:like href="http://www.facebook.com/pages/groonga/201193596592346"
               layout="standard"
               width="290"></fb:like>
    </div>
    <div class="other-language-links">

    <ul>
      <li><a href="../../docs/news.html">English</a></li>
    </ul>
  </div>
</div>
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Groonga v10.1.1ドキュメント</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">お知らせ</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="news">
<h1>お知らせ<a class="headerlink" href="#news" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="release-10-1-1-2021-01-25">
<span id="release-10-1-1"></span><h2>10.1.1リリース - 2021-01-25<a class="headerlink" href="#release-10-1-1-2021-01-25" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="improvements">
<h3>改良<a class="headerlink" href="#improvements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Apache Arrow形式でUInt64の値の出力をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Apache Arrow形式で以下のようにヒット数の出力をサポートしました。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-- metadata --
GROONGA:n-hits: 10
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] &quot;order by estimated size&quot; の最適化をサポートしました。</p>
<ul class="simple">
<li><p>通常、ヒット数の少ない条件から最初に実行すると、高速に検索できます。</p>
<ul>
<li><p>&quot;A (ヒット数が多い) &amp;&amp; B (ヒット数が少ない)&quot; より &quot;B (ヒット数が少ない) &amp;&amp; A (ヒット数が多い)&quot; 方が高速です。</p></li>
</ul>
</li>
<li><p>これは、よく知られた最適化ですが、自分で条件を並び替える必要があります。</p></li>
<li><p>Groongaは、 &quot;order by estimated size&quot; の最適化を使うことで、自動的にこの並び替えを実行します。</p></li>
<li><p>この最適化は、 <code class="docutils literal notranslate"><span class="pre">GRN_ORDER_BY_ESTIMATED_SIZE_ENABLE=yes</span></code> で有効になります。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] 以下の改良で、パフォーマンスを改善しました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">between()</span></code> でシーケンシャルサーチを使うかどうかの判断の精度を改善しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">between()</span></code> の結果を結果セットに一度にセットするよう改善しました。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 前方一致検索のパフォーマンスを改善しました。</p>
<ul>
<li><p>例えば、以下のような &quot;*&quot; を使った前方一致検索のパフォーマンスが向上します。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Memos TABLE_PAT_KEY ShortText
table_create Contents TABLE_PAT_KEY ShortText   --normalizer NormalizerAuto
column_create Contents entries_key_index COLUMN_INDEX Memos _key

load --table Memos
[
{&quot;_key&quot;: &quot;(groonga) Start to try!&quot;},
{&quot;_key&quot;: &quot;(mroonga) Installed&quot;},
{&quot;_key&quot;: &quot;(groonga) Upgraded!&quot;}
]

select \
  --table Memos \
  --match_columns _key \
  --query &#39;\\(groonga\\)*&#39;
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenMecab] トークンカラムを並列で構築する際のパフォーマンスを改善しました。 [GitHub#1158][naoaさんがパッチ提供]</p></li>
</ul>
</div>
<div class="section" id="fixes">
<h3>修正<a class="headerlink" href="#fixes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] <code class="docutils literal notranslate"><span class="pre">slices[].filter</span></code> 内で <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> が動作しない問題を修正しました。</p>
<ul>
<li><p>例えば、以下のクエリーでは、この問題によって、 <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> の結果は0件になります。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Users TABLE_HASH_KEY ShortText
column_create Users age COLUMN_SCALAR UInt8

table_create Memos TABLE_NO_KEY
column_create Memos user COLUMN_SCALAR Users
column_create Memos content COLUMN_SCALAR Text

load --table Users
[
{&quot;_key&quot;: &quot;alice&quot;, &quot;age&quot;: 9},
{&quot;_key&quot;: &quot;bob&quot;,   &quot;age&quot;: 29}
]

load --table Memos
[
{&quot;user&quot;: &quot;alice&quot;, &quot;content&quot;: &quot;hello&quot;},
{&quot;user&quot;: &quot;bob&quot;,   &quot;content&quot;: &quot;world&quot;},
{&quot;user&quot;: &quot;alice&quot;, &quot;content&quot;: &quot;bye&quot;},
{&quot;user&quot;: &quot;bob&quot;,   &quot;content&quot;: &quot;yay&quot;}
]

select \
  --table Memos \
  --slices[adult].filter &#39;_id &gt; 1 &amp;&amp; sub_filter(user, &quot;age &gt;= 18&quot;)&#39;
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>ハッシュテーブルに対して、繰り返し大量のデータを追加、削除すると、Groongaがクラッシュしたり、データの追加ができなくなる可能性がある問題を修正しました。</p></li>
</ul>
</div>
<div class="section" id="thanks">
<h3>感謝<a class="headerlink" href="#thanks" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>naoaさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-1-0-2020-12-29">
<span id="release-10-1-0"></span><h2>10.1.0リリース - 2020-12-29<a class="headerlink" href="#release-10-1-0-2020-12-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id1">
<h3>改良<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] 全角スペースをハイライト対処から除外しました。[PGroonga#GitHub#155][Hung Nguyen Vさんが報告]</p>
<ul>
<li><p>今までは、以下のように先頭の全角スペースも含めてハイライト対象としていました。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Entries TABLE_NO_KEY
column_create Entries body COLUMN_SCALAR ShortText

table_create Terms TABLE_PAT_KEY ShortText --default_tokenizer TokenBigram --normalizer NormalizerAuto
column_create Terms document_index COLUMN_INDEX|WITH_POSITION Entries body

load --table Entries
[
{&quot;body&quot;: &quot;Groonga　高速！&quot;}
]

select Entries --output_columns \
  --match_columns body --query &#39;高速&#39; \
  --output_columns &#39;highlight_html(body)&#39;
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        1
      ],
      [
        [
          &quot;highlight_html&quot;,
          null
        ]
      ],
      [
        &quot;Groonga&lt;span class=\&quot;keyword\&quot;&gt;　高速&lt;/span&gt;！&quot;
      ]
    ]
  ]
]
</pre></div>
</div>
</li>
<li><p>しかし、この全角スペースはハイライト対象としては不要です。そのため、このリリースから <code class="docutils literal notranslate"><span class="pre">highlight_html()</span></code> は先頭の全角スペースを削除します。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/status.html"><span class="doc">status</span></a>] 新しい項目 <code class="docutils literal notranslate"><span class="pre">features</span></code> を追加しました。</p>
<ul>
<li><p>以下のように、Groongaのどの機能が有効なのかを表示できます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status --output_pretty yes
[
  [
    0,
    0.0,
    0.0
  ],
  {
    &quot;alloc_count&quot;: 361,
    &quot;starttime&quot;: 1608087311,
    &quot;start_time&quot;: 1608087311,
    &quot;uptime&quot;: 35,
    &quot;version&quot;: &quot;10.1.0&quot;,
    &quot;n_queries&quot;: 0,
    &quot;cache_hit_rate&quot;: 0.0,
    &quot;command_version&quot;: 1,
    &quot;default_command_version&quot;: 1,
    &quot;max_command_version&quot;: 3,
    &quot;n_jobs&quot;: 0,
    &quot;features&quot;: {
      &quot;nfkc&quot;: true,
      &quot;mecab&quot;: true,
      &quot;message_pack&quot;: true,
      &quot;mruby&quot;: true,
      &quot;onigmo&quot;: true,
      &quot;zlib&quot;: true,
      &quot;lz4&quot;: false,
      &quot;zstandard&quot;: false,
      &quot;kqueue&quot;: false,
      &quot;epoll&quot;: true,
      &quot;poll&quot;: false,
      &quot;rapidjson&quot;: false,
      &quot;apache_arrow&quot;: false,
      &quot;xxhash&quot;: false
    }
  }
]
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/status.html"><span class="doc">status</span></a>] 新しい項目 <code class="docutils literal notranslate"><span class="pre">apache_arrow</span></code> を追加しました。</p>
<ul class="simple">
<li><p>以下のようにGroongaが使うApache Arrowのバージョンを表示できます。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[
  [
    0,
    1608088628.440753,
    0.0006628036499023438
  ],
  {
    &quot;alloc_count&quot;: 360,
    &quot;starttime&quot;: 1608088617,
    &quot;start_time&quot;: 1608088617,
    &quot;uptime&quot;: 11,
    &quot;version&quot;: &quot;10.0.9-39-g5a4c6f3&quot;,
    &quot;n_queries&quot;: 0,
    &quot;cache_hit_rate&quot;: 0.0,
    &quot;command_version&quot;: 1,
    &quot;default_command_version&quot;: 1,
    &quot;max_command_version&quot;: 3,
    &quot;n_jobs&quot;: 0,
    &quot;features&quot;: {
      &quot;nfkc&quot;: true,
      &quot;mecab&quot;: true,
      &quot;message_pack&quot;: true,
      &quot;mruby&quot;: true,
      &quot;onigmo&quot;: true,
      &quot;zlib&quot;: true,
      &quot;lz4&quot;: true,
      &quot;zstandard&quot;: false,
      &quot;kqueue&quot;: false,
      &quot;epoll&quot;: true,
      &quot;poll&quot;: false,
      &quot;rapidjson&quot;: false,
      &quot;apache_arrow&quot;: true,
      &quot;xxhash&quot;: false
    },
    &quot;apache_arrow&quot;: {
      &quot;version_major&quot;: 2,
      &quot;version_minor&quot;: 0,
      &quot;version_patch&quot;: 0,
      &quot;version&quot;: &quot;2.0.0&quot;
    }
  }
]
</pre></div>
</div>
<ul class="simple">
<li><p>この項目は、Apache Arrowが有効な場合にのみ表示されます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/window_function.html"><span class="doc">ウィンドウ関数</span></a>] 対象のテーブルがシャードをまたいでいる場合でも、全てのテーブルを一度に処理するようにしました。(実験的)</p>
<ul>
<li><p>今まで、対象のテーブルがシャードをまたいでいた場合、ウインドウ関数はシャード毎に処理をしていました。</p>
<ul>
<li><p>そのため、複数のグループキーを使う場合、2番目以降のグループキーの値は1種類でなければなりませんでした。</p></li>
<li><p>この改良によって、以下のように複数の種類の値を2番目以降のグループキーで使用できるようになります。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>plugin_register sharding
plugin_register functions/time

table_create Logs_20170315 TABLE_NO_KEY
column_create Logs_20170315 timestamp COLUMN_SCALAR Time
column_create Logs_20170315 price COLUMN_SCALAR UInt32
column_create Logs_20170315 item COLUMN_SCALAR ShortText

table_create Logs_20170316 TABLE_NO_KEY
column_create Logs_20170316 timestamp COLUMN_SCALAR Time
column_create Logs_20170316 price COLUMN_SCALAR UInt32
column_create Logs_20170316 item COLUMN_SCALAR ShortText

table_create Logs_20170317 TABLE_NO_KEY
column_create Logs_20170317 timestamp COLUMN_SCALAR Time
column_create Logs_20170317 price COLUMN_SCALAR UInt32
column_create Logs_20170317 item COLUMN_SCALAR ShortText

load --table Logs_20170315
[
{&quot;timestamp&quot;: &quot;2017/03/15 10:00:00&quot;, &quot;price&quot;: 1000, &quot;item&quot;: &quot;A&quot;},
{&quot;timestamp&quot;: &quot;2017/03/15 11:00:00&quot;, &quot;price&quot;:  900, &quot;item&quot;: &quot;A&quot;},
{&quot;timestamp&quot;: &quot;2017/03/15 12:00:00&quot;, &quot;price&quot;:  300, &quot;item&quot;: &quot;B&quot;},
{&quot;timestamp&quot;: &quot;2017/03/15 13:00:00&quot;, &quot;price&quot;:  200, &quot;item&quot;: &quot;B&quot;}
]

load --table Logs_20170316
[
{&quot;timestamp&quot;: &quot;2017/03/16 10:00:00&quot;, &quot;price&quot;:  530, &quot;item&quot;: &quot;A&quot;},
{&quot;timestamp&quot;: &quot;2017/03/16 11:00:00&quot;, &quot;price&quot;:  520, &quot;item&quot;: &quot;B&quot;},
{&quot;timestamp&quot;: &quot;2017/03/16 12:00:00&quot;, &quot;price&quot;:  110, &quot;item&quot;: &quot;A&quot;},
{&quot;timestamp&quot;: &quot;2017/03/16 13:00:00&quot;, &quot;price&quot;:  410, &quot;item&quot;: &quot;A&quot;},
{&quot;timestamp&quot;: &quot;2017/03/16 14:00:00&quot;, &quot;price&quot;:  710, &quot;item&quot;: &quot;B&quot;}
]

load --table Logs_20170317
[
{&quot;timestamp&quot;: &quot;2017/03/17 10:00:00&quot;, &quot;price&quot;:  800, &quot;item&quot;: &quot;A&quot;},
{&quot;timestamp&quot;: &quot;2017/03/17 11:00:00&quot;, &quot;price&quot;:  400, &quot;item&quot;: &quot;B&quot;},
{&quot;timestamp&quot;: &quot;2017/03/17 12:00:00&quot;, &quot;price&quot;:  500, &quot;item&quot;: &quot;B&quot;},
{&quot;timestamp&quot;: &quot;2017/03/17 13:00:00&quot;, &quot;price&quot;:  300, &quot;item&quot;: &quot;A&quot;}
]

table_create Times TABLE_PAT_KEY Time
column_create Times logs_20170315 COLUMN_INDEX Logs_20170315 timestamp
column_create Times logs_20170316 COLUMN_INDEX Logs_20170316 timestamp
column_create Times logs_20170317 COLUMN_INDEX Logs_20170317 timestamp

logical_range_filter Logs \
  --shard_key timestamp \
  --filter &#39;price &gt;= 300&#39; \
  --limit -1 \
  --columns[offsetted_timestamp].stage filtered \
  --columns[offsetted_timestamp].type Time \
  --columns[offsetted_timestamp].flags COLUMN_SCALAR \
  --columns[offsetted_timestamp].value &#39;timestamp - 39600000000&#39; \
  --columns[offsetted_day].stage filtered \
  --columns[offsetted_day].type Time \
  --columns[offsetted_day].flags COLUMN_SCALAR \
  --columns[offsetted_day].value &#39;time_classify_day(offsetted_timestamp)&#39; \
  --columns[n_records_per_day_and_item].stage filtered \
  --columns[n_records_per_day_and_item].type UInt32 \
  --columns[n_records_per_day_and_item].flags COLUMN_SCALAR \
  --columns[n_records_per_day_and_item].value &#39;window_count()&#39; \
  --columns[n_records_per_day_and_item].window.group_keys &#39;offsetted_day,item&#39; \
  --output_columns &quot;_id,time_format_iso8601(offsetted_day),item,n_records_per_day_and_item&quot;
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        &quot;_id&quot;,
        &quot;UInt32&quot;
      ],
      [
        &quot;time_format_iso8601&quot;,
        null
      ],
      [
        &quot;item&quot;,
        &quot;ShortText&quot;
      ],
      [
        &quot;n_records_per_day_and_item&quot;,
        &quot;UInt32&quot;
      ]
    ],
    [
      1,
      &quot;2017-03-14T00:00:00.000000+09:00&quot;,
      &quot;A&quot;,
      1
    ],
    [
      2,
      &quot;2017-03-15T00:00:00.000000+09:00&quot;,
      &quot;A&quot;,
      2
    ],
    [
      3,
      &quot;2017-03-15T00:00:00.000000+09:00&quot;,
      &quot;B&quot;,
      1
    ],
    [
      1,
      &quot;2017-03-15T00:00:00.000000+09:00&quot;,
      &quot;A&quot;,
      2
    ],
    [
      2,
      &quot;2017-03-16T00:00:00.000000+09:00&quot;,
      &quot;B&quot;,
      2
    ],
    [
      4,
      &quot;2017-03-16T00:00:00.000000+09:00&quot;,
      &quot;A&quot;,
      2
    ],
    [
      5,
      &quot;2017-03-16T00:00:00.000000+09:00&quot;,
      &quot;B&quot;,
      2
    ],
    [
      1,
      &quot;2017-03-16T00:00:00.000000+09:00&quot;,
      &quot;A&quot;,
      2
    ],
    [
      2,
      &quot;2017-03-17T00:00:00.000000+09:00&quot;,
      &quot;B&quot;,
      2
    ],
    [
      3,
      &quot;2017-03-17T00:00:00.000000+09:00&quot;,
      &quot;B&quot;,
      2
    ],
    [
      4,
      &quot;2017-03-17T00:00:00.000000+09:00&quot;,
      &quot;A&quot;,
      1
    ]
  ]
]
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>この機能には、まだリリースされていない、Apache Arrow 3.0.0が必要です。</p></li>
</ul>
</li>
<li><p>参照カラムに対する検索でシーケンシャルサーチをサポートしました。</p>
<ul>
<li><p>この機能は、インデックス検索でたくさんのレコードがマッチした場合、かつ結果セットが十分小さい場合にのみ使われます。</p>
<ul class="simple">
<li><p>上記のケースでは、インデックス検索よりもシーケンシャルサーチの方が速いためです。</p></li>
</ul>
</li>
<li><p>この機能はデフォルトでは無効です。</p></li>
<li><p>この機能は、環境変数 <code class="docutils literal notranslate"><span class="pre">GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_REFERENCE</span></code> を設定することで有効になります。</p></li>
<li><p>環境変数 <code class="docutils literal notranslate"><span class="pre">GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_REFERENCE</span></code> はインデックス検索からシーケンシャルサーチに切り替えるためのしきい値です。</p>
<ul>
<li><p>例えば、以下のように <code class="docutils literal notranslate"><span class="pre">GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_REFERENCE=0.7</span></code> とセットした場合、結果セットのレコード数が、総レコード数の70%以下の場合にシーケンシャルサーチで検索します。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ export GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_REFERENCE=0.7

table_create Tags TABLE_HASH_KEY ShortText
table_create Memos TABLE_HASH_KEY ShortText
column_create Memos tag COLUMN_SCALAR Tags

load --table Memos
[
{&quot;_key&quot;: &quot;Rroonga is fast!&quot;, &quot;tag&quot;: &quot;Rroonga&quot;},
{&quot;_key&quot;: &quot;Groonga is fast!&quot;, &quot;tag&quot;: &quot;Groonga&quot;},
{&quot;_key&quot;: &quot;Mroonga is fast!&quot;, &quot;tag&quot;: &quot;Mroonga&quot;},
{&quot;_key&quot;: &quot;Groonga sticker!&quot;, &quot;tag&quot;: &quot;Groonga&quot;},
{&quot;_key&quot;: &quot;Groonga is good!&quot;, &quot;tag&quot;: &quot;Groonga&quot;}
]

column_create Tags memos_tag COLUMN_INDEX Memos tag

select Memos --query &#39;_id:&gt;=3 tag:@Groonga&#39; --output_columns _id,_score,_key,tag
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        2
      ],
      [
        [
          &quot;_id&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;_score&quot;,
          &quot;Int32&quot;
        ],
        [
          &quot;_key&quot;,
          &quot;ShortText&quot;
        ],
        [
          &quot;tag&quot;,
          &quot;Tags&quot;
        ]
      ],
      [
        4,
        2,
        &quot;Groonga sticker!&quot;,
        &quot;Groonga&quot;
      ],
      [
        5,
        2,
        &quot;Groonga is good!&quot;,
        &quot;Groonga&quot;
      ]
    ]
  ]
]
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>[tokenizers] <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorTFIDF</span></code> と <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorBM25</span></code> でトークンカラムをサポートしました。</p>
<ul>
<li><p>インデックスカラムと同じソースを持つトークンカラムがある場合、これらのトークナイザーは、トークンカラムのトークンIDを使います。</p>
<ul class="simple">
<li><p>トークンカラムは、既にトークナイズ済みのデータを持っています。</p></li>
<li><p>そのため、トークンカラムを使うことによって、これらのトークナイザーのパフォーマンスが改善されます。</p></li>
</ul>
</li>
<li><p>例えば、以下のように、 <code class="docutils literal notranslate"><span class="pre">content_tokens</span></code> というトークンカラムを作ることで、この機能を使えます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Memos TABLE_NO_KEY
column_create Memos content COLUMN_SCALAR Text

load --table Memos
[
{&quot;content&quot;: &quot;a b c a&quot;},
{&quot;content&quot;: &quot;c b c&quot;},
{&quot;content&quot;: &quot;b b a&quot;},
{&quot;content&quot;: &quot;a c c&quot;},
{&quot;content&quot;: &quot;a&quot;}
]

table_create Tokens TABLE_PAT_KEY ShortText \
  --normalizer NormalizerNFKC121 \
  --default_tokenizer TokenNgram
column_create Tokens memos_content COLUMN_INDEX|WITH_POSITION Memos content

column_create Memos content_tokens COLUMN_VECTOR Tokens content

table_create DocumentVectorBM25 TABLE_HASH_KEY Tokens \
  --default_tokenizer \
    &#39;TokenDocumentVectorBM25(&quot;index_column&quot;, &quot;memos_content&quot;, \
                             &quot;df_column&quot;, &quot;df&quot;)&#39;
column_create DocumentVectorBM25 df COLUMN_SCALAR UInt32

column_create Memos content_feature COLUMN_VECTOR|WITH_WEIGHT|WEIGHT_FLOAT32 \
  DocumentVectorBM25 content

select Memos
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        5
      ],
      [
        [
          &quot;_id&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;content&quot;,
          &quot;Text&quot;
        ],
        [
          &quot;content_feature&quot;,
          &quot;DocumentVectorBM25&quot;
        ],
        [
          &quot;content_tokens&quot;,
          &quot;Tokens&quot;
        ]
      ],
      [
        1,
        &quot;a b c a&quot;,
        {
          &quot;a&quot;: 0.5095787,
          &quot;b&quot;: 0.6084117,
          &quot;c&quot;: 0.6084117
        },
        [
          &quot;a&quot;,
          &quot;b&quot;,
          &quot;c&quot;,
          &quot;a&quot;
        ]
      ],
      [
        2,
        &quot;c b c&quot;,
        {
          &quot;c&quot;: 0.8342565,
          &quot;b&quot;: 0.5513765
        },
        [
          &quot;c&quot;,
          &quot;b&quot;,
          &quot;c&quot;
        ]
      ],
      [
        3,
        &quot;b b a&quot;,
        {
          &quot;b&quot;: 0.9430448,
          &quot;a&quot;: 0.3326656
        },
        [
          &quot;b&quot;,
          &quot;b&quot;,
          &quot;a&quot;
        ]
      ],
      [
        4,
        &quot;a c c&quot;,
        {
          &quot;a&quot;: 0.3326656,
          &quot;c&quot;: 0.9430448
        },
        [
          &quot;a&quot;,
          &quot;c&quot;,
          &quot;c&quot;
        ]
      ],
      [
        5,
        &quot;a&quot;,
        {
          &quot;a&quot;: 1.0
        },
        [
          &quot;a&quot;
        ]
      ]
    ]
  ]
]
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorTFIDF</span></code> と <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorBM25</span></code> は、各トークンに対して重みをつけます。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorTFIDF</span></code> は、TF-IDFを使ってトークンの重みを計算します。</p>
<blockquote>
<div><ul class="simple">
<li><p>TF-IDFについては、 <a class="reference external" href="https://radimrehurek.com/gensim/models/tfidfmodel.html">https://radimrehurek.com/gensim/models/tfidfmodel.html</a> を参照してください。</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorBM25</span></code> は、Okapi BM25を使ってトークンの重みを計算します。</p>
<blockquote>
<div><ul class="simple">
<li><p>Okapi BM25については、 <a class="reference external" href="https://en.wikipedia.org/wiki/Okapi_BM25">https://en.wikipedia.org/wiki/Okapi_BM25</a> を参照してください。</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p>以下のケースのパフォーマンスを改善しました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;value&quot;)</span> <span class="pre">&amp;&amp;</span> <span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;value&quot;)</span></code></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 20.10 (Groovy Gorilla)をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] stretchのサポートをやめました。</p>
<ul class="simple">
<li><p>EOLになったためです。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] CentOS 6のサポートをやめました。</p>
<ul class="simple">
<li><p>EOLになったためです。</p></li>
</ul>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.19.6に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id2">
<h3>修正<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>以下のように、複数のドリルダウンのキーと複数のアクセサーを使用した時にGroongaがクラッシュする問題を修正しました。[GitHub#1153][naoaさんがパッチ提供]</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Tags TABLE_PAT_KEY ShortText

table_create Memos TABLE_HASH_KEY ShortText
column_create Memos tags COLUMN_VECTOR Tags
column_create Memos year COLUMN_SCALAR Int32

load --table Memos
[
{&quot;_key&quot;: &quot;Groonga is fast!&quot;, &quot;tags&quot;: [&quot;full-text-search&quot;], &quot;year&quot;: 2019},
{&quot;_key&quot;: &quot;Mroonga is fast!&quot;, &quot;tags&quot;: [&quot;mysql&quot;, &quot;full-text-search&quot;], &quot;year&quot;: 2019},
{&quot;_key&quot;: &quot;Groonga sticker!&quot;, &quot;tags&quot;: [&quot;full-text-search&quot;, &quot;sticker&quot;], &quot;year&quot;: 2020},
{&quot;_key&quot;: &quot;Rroonga is fast!&quot;, &quot;tags&quot;: [&quot;full-text-search&quot;, &quot;ruby&quot;], &quot;year&quot;: 2020},
{&quot;_key&quot;: &quot;Groonga is good!&quot;, &quot;tags&quot;: [&quot;full-text-search&quot;], &quot;year&quot;: 2020}
]

select Memos \
  --filter &#39;_id &gt; 0&#39; \
  --drilldowns[tags].keys &#39;tags,year &gt;= 2020&#39; \
  --drilldowns[tags].output_columns _key[0],_key[1],_nsubrecs

select Memos \
  --filter &#39;_id &gt; 0&#39; \
  --drilldowns[tags].keys &#39;tags,year &gt;= 2020&#39; \
  --drilldowns[tags].output_columns _key[1],_nsubrecs
</pre></div>
</div>
</li>
<li><p>以下のように、同じフレーズが複数回出現すると、近傍フレーズ検索がマッチしない問題を修正しました。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Entries TABLE_NO_KEY
column_create Entries content COLUMN_SCALAR Text

table_create Terms TABLE_PAT_KEY ShortText \
  --default_tokenizer TokenNgram \
  --normalizer NormalizerNFKC121
column_create Terms entries_content COLUMN_INDEX|WITH_POSITION Entries content

load --table Entries
[
{&quot;content&quot;: &quot;a x a x b x x&quot;},
{&quot;content&quot;: &quot;a x x b x&quot;}
]

select Entries \
  --match_columns content \
  --query &#39;*NP2&quot;a b&quot;&#39; \
  --output_columns &#39;_score, content&#39;
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id3">
<h3>感謝<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Hung Nguyen Vさん</p></li>
<li><p>naoaさん</p></li>
<li><p>timgates42さん [GitHub#1155にてパッチ提供]</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-9-2020-12-01">
<span id="release-10-0-9"></span><h2>10.0.9リリース - 2020-12-01<a class="headerlink" href="#release-10-0-9-2020-12-01" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id4">
<h3>改良<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">limit</span></code> に <code class="docutils literal notranslate"><span class="pre">-1</span></code> を指定した時のパフォーマンスを改善しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/reference_acquire.html"><span class="doc">reference_acquire</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">--auto_release_count</span></code> を追加しました。</p>
<ul>
<li><p>Groongaは、リクエストが <code class="docutils literal notranslate"><span class="pre">--auto_release_count</span></code> で指定された値に到達した時に自動的に参照カウントを減らします。</p></li>
<li><p>例えば、以下のように、取得した <code class="docutils literal notranslate"><span class="pre">User</span></code> の参照は、2番目の <code class="docutils literal notranslate"><span class="pre">status</span></code> が処理された後に自動的に解放されます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>reference_acquire --target_name Users --auto_release_count 2
status # Users is still referred.
status # Users&#39; reference is released after this command is processed.
</pre></div>
</div>
</li>
<li><p>このオプションで、取得した参照の解放漏れを防げます。</p></li>
</ul>
</li>
<li><p>Groongaが空の <code class="docutils literal notranslate"><span class="pre">vector</span></code> や <code class="docutils literal notranslate"><span class="pre">uvector</span></code> を評価した時の動作を変更しました。</p>
<ul class="simple">
<li><p>空の <code class="docutils literal notranslate"><span class="pre">vector</span></code> と <code class="docutils literal notranslate"><span class="pre">uvector</span></code> はcommand version 3では、 <code class="docutils literal notranslate"><span class="pre">false</span></code> と評価されます。</p>
<ul>
<li><p>この挙動はcommand version 3でのみ有効です。</p></li>
<li><p>今までとは挙動が異なることに注意してください。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] Unicode 13.0 の NFKC（Normalization Form Compatibility Composition）をベースにしたノーマライザー <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC130</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">トークンフィルター</span></a>] Unicode 13.0 の NFKC（Normalization Form Compatibility Composition）をベースにしたトークンフィルター <code class="docutils literal notranslate"><span class="pre">TokenFilterNFKC130</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">&quot;_score</span> <span class="pre">=</span> <span class="pre">column</span> <span class="pre">-</span> <span class="pre">X&quot;</span></code> のパフォーマンスを改善しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/reference_acquire.html"><span class="doc">reference_acquire</span></a>] <code class="docutils literal notranslate"><span class="pre">--recursive</span> <span class="pre">dependent</span></code> オプションを指定した時に必要のないインデックスカラムへの参照を取得しないように改善しました。</p>
<ul class="simple">
<li><p>今回のリリースから、 <code class="docutils literal notranslate"><span class="pre">--recursive</span> <span class="pre">dependent</span></code> の対象は、対象のテーブルのキーあるいはデータカラムに設定してあるインデックスカラムです。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 順序限定の近傍フレーズ検索をサポートしました。</p>
<ul>
<li><p>今までの近傍フレーズ検索は、指定したフレーズ間の距離が近いレコードのみを探していました。</p></li>
<li><p>この機能は、以下の条件を満たすレコードを探します。</p>
<ul class="simple">
<li><p>指定したフレーズ間の距離が近い場合。</p></li>
<li><p>指定したフレーズが指定した順序で並んでいる場合。</p></li>
</ul>
</li>
<li><p>この機能は、 <code class="docutils literal notranslate"><span class="pre">*ONP</span></code> を演算子として使います。(<code class="docutils literal notranslate"><span class="pre">*NP</span></code> 演算子ではないことに注意してください。)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$</span></code> はクエリー構文では、 <code class="docutils literal notranslate"><span class="pre">$</span></code> そのものとして扱います。クエリー構文では、 <code class="docutils literal notranslate"><span class="pre">$</span></code> は特殊文字ではないことに注意してください。</p></li>
<li><p>スクリプト構文の場合、この機能は以下のように使用します。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Entries TABLE_NO_KEY
column_create Entries content COLUMN_SCALAR Text

table_create Terms TABLE_PAT_KEY ShortText \
  --default_tokenizer &#39;TokenNgram(&quot;unify_alphabet&quot;, false, \
                                  &quot;unify_digit&quot;, false)&#39; \
  --normalizer NormalizerNFKC121
column_create Terms entries_content COLUMN_INDEX|WITH_POSITION Entries content

load --table Entries
[
{&quot;content&quot;: &quot;abcXYZdef&quot;},
{&quot;content&quot;: &quot;abebcdXYZdef&quot;},
{&quot;content&quot;: &quot;abcdef&quot;},
{&quot;content&quot;: &quot;defXYZabc&quot;},
{&quot;content&quot;: &quot;XYZabc&quot;},
{&quot;content&quot;: &quot;abc123456789def&quot;},
{&quot;content&quot;: &quot;abc12345678def&quot;},
{&quot;content&quot;: &quot;abc1de2def&quot;}
]

select Entries --filter &#39;content *ONP &quot;abc def&quot;&#39; --output_columns &#39;_score, content&#39;
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        4
      ],
      [
        [
          &quot;_score&quot;,
          &quot;Int32&quot;
        ],
        [
          &quot;content&quot;,
          &quot;Text&quot;
        ]
      ],
      [
        1,
        &quot;abcXYZdef&quot;
      ],
      [
        1,
        &quot;abcdef&quot;
      ],
      [
        1,
        &quot;abc12345678def&quot;
      ],
      [
        1,
        &quot;abc1de2def&quot;
      ]
    ]
  ]
]
</pre></div>
</div>
</li>
<li><p>クエリー構文の場合、この機能は以下のように使用します。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>select Entries --query &#39;content:*ONP &quot;abc def&quot;&#39; --output_columns &#39;_score, content&#39;
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        4
      ],
      [
        [
          &quot;_score&quot;,
          &quot;Int32&quot;
        ],
        [
          &quot;content&quot;,
          &quot;Text&quot;
        ]
      ],
      [
        1,
        &quot;abcXYZdef&quot;
      ],
      [
        1,
        &quot;abcdef&quot;
      ],
      [
        1,
        &quot;abc12345678def&quot;
      ],
      [
        1,
        &quot;abc1de2def&quot;
      ]
    ]
  ]
]
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.19.5に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id5">
<h3>修正<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>] Groonga HTTP server が全てのワーカースレッドの完全な終了を待たずに終了していた問題を修正しました。</p>
<ul>
<li><p>今まで、Groonga HTTP server は、ワーカースレッドの処理が終了した後から、自身の終了処理を開始していました。しかし、このタイミングでは、ワーカースレッドは完全に終了していないことがあります。そのため、タイミングによってはGroonga HTTP serverがクラッシュすることがあります。Groonga HTTP server がワーカースレッドがまだ使用している領域を解放することがあるためです。</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-8-2020-10-29">
<span id="release-10-0-8"></span><h2>10.0.8リリース - 2020-10-29<a class="headerlink" href="#release-10-0-8-2020-10-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id6">
<h3>改良<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 大きいサイズのドリルダウンのキーを使えるようになりました。</p>
<ul>
<li><p>Groongaのテーブルのキーサイズの最大は4KiBですが、複数のドリルダウンのキーを指定している場合、ドリルダウンのキーのサイズが4KiBを超える場合があります。</p>
<ul class="simple">
<li><p>例えば、以下のケースで、 <code class="docutils literal notranslate"><span class="pre">tag</span></code> キーと <code class="docutils literal notranslate"><span class="pre">n_like</span></code> キーのトータルサイズが4KiB以上だった場合、ドリルダウンは失敗します。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>select Entries \
  --limit -1 \
  --output_columns tag,n_likes \
  --drilldowns[tag.n_likes].keys tag,n_likes \
  --drilldowns[tag.n_likes].output_columns _value.tag,_value.n_likes,_nsubrecs
</pre></div>
</div>
<ul class="simple">
<li><p>ドリルダウンは指定されている全てのキーを連結しているためです。そのため、ドリルダウンのキーそれぞれが大きい場合は、ドリルダウンのキーを連結したサイズが4KiB以上になります。</p></li>
</ul>
</li>
<li><p>この機能には、 <a class="reference external" href="https://github.com/Cyan4973/xxHash">xxHash</a> が必要です。</p>
<ul class="simple">
<li><p>ただ、Groongaをパッケージからインストールしている場合は、特に何もしなくてもこの機能を使えます。Groongaのパッケージには、すでに <a class="reference external" href="https://github.com/Cyan4973/xxHash">xxHash</a> が含まれているためです。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 異なるテーブルを参照しているカラムを同じ動的カラムで扱えるようにしました。</p>
<ul>
<li><p>従来、異なるテーブルを参照しているカラムは、同一の動的カラムでは扱えませんでした。カラムの型が異なるためです。</p></li>
<li><p>今回のバージョンから、以下のように異なるテーブルを参照しているカラムであってもビルトインの型にキャストすることで同じ動的カラムで扱うことができます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Store_A TABLE_HASH_KEY ShortText
table_create Store_B TABLE_HASH_KEY ShortText

table_create Customers TABLE_HASH_KEY Int32
column_create Customers customers_A COLUMN_VECTOR Store_A
column_create Customers customers_B COLUMN_VECTOR Store_B

load --table Customers
[
  {&quot;_key&quot;: 1604020694, &quot;customers_A&quot;: [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]},
  {&quot;_key&quot;: 1602724694, &quot;customers_B&quot;: [&quot;Z&quot;, &quot;V&quot;, &quot;Y&quot;, &quot;T&quot;]},
]

select Customers \
  --filter &#39;_key == 1604020694&#39; \
  --columns[customers].stage output \
  --columns[customers].flags COLUMN_VECTOR \
  --columns[customers].type ShortText \
  --columns[customers].value &#39;customers_A&#39; \
  --output_columns &#39;_key, customers&#39;
</pre></div>
</div>
</li>
<li><p>今までは、 <code class="docutils literal notranslate"><span class="pre">Store_A</span></code> または <code class="docutils literal notranslate"><span class="pre">Store_B</span></code> を <code class="docutils literal notranslate"><span class="pre">customers</span></code> カラムの　<code class="docutils literal notranslate"><span class="pre">type</span></code>　に設定する必要がありました。</p></li>
<li><p>上記の例では、 <code class="docutils literal notranslate"><span class="pre">customers_A</span></code> カラムの型は、 <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> にキャストします。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">customers_A</span></code> のキーも <code class="docutils literal notranslate"><span class="pre">customers_B</span></code> のキーも <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> 型であるため、これで <code class="docutils literal notranslate"><span class="pre">customers</span></code> カラムの値に <code class="docutils literal notranslate"><span class="pre">customers_B</span></code> の値も設定できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 検索結果のレコード数が非常に多い場合のパフォーマンスを改善しました。</p>
<ul class="simple">
<li><p>この最適化は、以下のケースで効果があります。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'column</span> <span class="pre">&lt;=</span> <span class="pre">&quot;value&quot;'</span></code> or <code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'column</span> <span class="pre">&gt;=</span> <span class="pre">&quot;value&quot;'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'column</span> <span class="pre">==</span> <span class="pre">&quot;value&quot;'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'between(...)'</span></code> または <code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'between(_key,</span> <span class="pre">...)'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'sub_filter(reference_column,</span> <span class="pre">...)'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'_key</span> <span class="pre">&gt;</span> <span class="pre">&quot;value&quot;'</span></code> のような <code class="docutils literal notranslate"><span class="pre">_key</span></code> に対する比較</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'geo_in_circle(...)'</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>バンドルしているLZ4を1.8.2から1.9.2に更新しました。</p></li>
<li><p>xxHash 0.8 をサポートしました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.19.4に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id8">
<h3>修正<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>ブラウザーベースの管理ツール関連の問題を修正しました。　[GitHub#1139][sutaminさんの報告]</p>
<ul>
<li><p>Groongaのロゴが表示されない問題。</p></li>
<li><p>日本語のインデックスページにスループットグラフが表示されない問題。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] <code class="docutils literal notranslate"><span class="pre">between(_key,</span> <span class="pre">...)</span></code> が常にシーケンシャルサーチで評価される問題を修正しました。</p></li>
</ul>
</div>
<div class="section" id="id9">
<h3>感謝<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>sutaminさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-7-2020-09-29">
<span id="release-10-0-7"></span><h2>10.0.7リリース - 2020-09-29<a class="headerlink" href="#release-10-0-7-2020-09-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id10">
<h3>改良<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[highlight], [<a class="reference internal" href="reference/functions/highlight_full.html"><span class="doc">highlight_full</span></a>] ノーマライザーにオプションを指定できるようになりました。</p></li>
<li><p>[<a class="reference internal" href="reference/command/return_code.html"><span class="doc">リターンコード</span></a>] 新しいリターンコード <code class="docutils literal notranslate"><span class="pre">GRN_CONNECTION_RESET</span></code> を追加しました。</p>
<ul>
<li><p>このリターンコードは、リモートホストから強制的に接続を切断されたときに返されます。</p></li>
</ul>
</li>
<li><p>Ubuntu 19.10(Eoan Ermine)のサポートをやめました。</p>
<ul>
<li><p>このバージョンはEOLになっているためです。</p></li>
</ul>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.19.2に更新しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] キーの重複を検出できるようになりました。</p>
<ul>
<li><p>今回のリリースから、　<code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">check</span></code> でキーの重複も検出できるようになりました。</p></li>
<li><p>このチェックは、 <code class="docutils literal notranslate"><span class="pre">TABLE_NO_KEY</span></code> のテーブル以外で有効です。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">check</span></code> で重複が検出されたテーブルにインデックスカラムしかない場合は、 <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">recover</span></code> で復旧できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/table_create.html"><span class="doc">table_create</span></a>], [<a class="reference internal" href="reference/commands/column_create.html"><span class="doc">column_create</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">--path</span></code> を追加しました。</p>
<ul>
<li><p>このオプションによって指定したテーブルまたは、カラムを任意のパスに格納できます。</p></li>
<li><p>このオプションは、高速なストレージ(SSDなど)によく使うテーブルやカラムを格納し、低速なストレージ(HDDなど)にあまり使わないテーブルやカラムを格納したいときに有用です。</p></li>
<li><p>このオプションは、相対パス、絶対パスの両方が指定できます。</p>
<ul>
<li><p>相対パスを指定した場合は、 <code class="docutils literal notranslate"><span class="pre">groonga</span></code> プロセスのパスを起点に指定したパスが解決されます。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--path</span></code> を指定した場合、 <code class="docutils literal notranslate"><span class="pre">dump</span></code> コマンドの結果に <code class="docutils literal notranslate"><span class="pre">--path</span></code> の情報が含まれます。</p>
<ul>
<li><p>したがって、 <code class="docutils literal notranslate"><span class="pre">--path</span></code> を指定した場合、 異なる環境のホストではリストアできなくなります。</p>
<ul>
<li><p>これは、ディレクトリ構成や <code class="docutils literal notranslate"><span class="pre">groonga</span></code> プロセスの場所が環境ごとに異なるためです。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--path</span></code> の情報を <code class="docutils literal notranslate"><span class="pre">dump</span></code> に含みたくない場合は、 <code class="docutils literal notranslate"><span class="pre">dump</span></code> コマンド実行時に <code class="docutils literal notranslate"><span class="pre">--dump_paths</span> <span class="pre">no</span></code> を指定する必要があります。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">--dump_paths</span></code> を追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--dump_paths</span></code> オプションは、 <code class="docutils literal notranslate"><span class="pre">--path</span></code> をダンプするかどうかを制御します。</p></li>
<li><p>デフォルト値は <code class="docutils literal notranslate"><span class="pre">yes</span></code> です。</p></li>
<li><p>もし、テーブルやカラム作成時に <code class="docutils literal notranslate"><span class="pre">--path</span></code> を指定していて、 <code class="docutils literal notranslate"><span class="pre">--path</span></code> の情報を <code class="docutils literal notranslate"><span class="pre">dump</span></code> に含みたくない場合は、 <code class="docutils literal notranslate"><span class="pre">dump</span></code> コマンド実行時に <code class="docutils literal notranslate"><span class="pre">--dump_paths</span></code> に <code class="docutils literal notranslate"><span class="pre">no</span></code> を指定してください。</p></li>
</ul>
</li>
<li><p>新しい関数 <code class="docutils literal notranslate"><span class="pre">string_toknize()</span></code> を追加しました。</p>
<ul>
<li><p>この関数は、第二引数に指定されたカラムの値を、第一引数に指定されたトークナイザーでトークナイズします。</p></li>
</ul>
</li>
<li><p>[tokenizers] 新しいトークナイザー <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorTFIDF</span></code> を追加しました。(実験的)</p>
<ul>
<li><p>このトークナイザーは、TF-IDFで文書ベクトルを自動で生成します。</p></li>
</ul>
</li>
<li><p>[tokenizers] 新しいトークナイザー <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorBM25</span></code> を追加しました。(実験的)</p>
<ul>
<li><p>このトークナイザーは、BM25で文書ベクトルを自動で生成します。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 同一センテンス内での、フレーズ近傍検索をサポートしました。</p></li>
</ul>
</div>
<div class="section" id="id11">
<h3>修正<a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] 257個のカラムに対して <code class="docutils literal notranslate"><span class="pre">load</span></code> を実行すると <code class="docutils literal notranslate"><span class="pre">load</span></code> の応答が返らなくなる問題を修正しました。</p>
<ul>
<li><p>この問題は、10.0.4以降で発生する可能性があります。</p></li>
<li><p>この問題は、 <code class="docutils literal notranslate"><span class="pre">[a,</span> <span class="pre">b,</span> <span class="pre">c,</span> <span class="pre">...]</span></code> の形式でデータをロードした時にのみ発生します。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">[{...}]</span></code> を使ってデータをロードした場合は発生しません。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[MessagePack] float32の値を正しくアンパックできない問題を修正しました。</p></li>
<li><p>マルチカラムインデックス関連の問題を修正しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_score</span></code> の値が壊れることがあります。</p></li>
<li><p>ヒットしないはずのレコードがヒットすることがあります。</p></li>
<li><p>この問題の発生条件については、以下のURLを参照してください。</p>
<ul>
<li><p><a class="reference external" href="https://groonga.org/ja/blog/2020/09/29/groonga-10.0.7.html#multi-column-index">https://groonga.org/ja/blog/2020/09/29/groonga-10.0.7.html#multi-column-index</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-6-2020-08-29">
<span id="release-10-0-6"></span><h2>10.0.6リリース - 2020-08-29<a class="headerlink" href="#release-10-0-6-2020-08-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id12">
<h3>改良<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] 大きなデータの検索プランを改善しました。</p>
<ul>
<li><p>通常、 <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> は <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> より高速ですが、以下のケースでは、 <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> より遅くなっていました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> には要求されたレコード数をなかなか見つけられない場合にシーケンシャル検索からインデックス検索に切り替える機能があります。( <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> は通常、検索対象のレコード数が多い場合は、シーケンシャル検索を使います。)</p></li>
<li><p>上記の切り替えが発生した場合は、 <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> と検索処理がほぼ同じになります。そのため、大きなデータを対象とした検索では、上記のケースで、 <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> は、 <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> の数倍遅くなります。なぜなら、 <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> は検索後にソートを実行するためです。</p></li>
</ul>
</li>
<li><p>今回のリリースから、大きなデータを検索する場合に、今までよりシーケンシャル検索が採用されやすくしました。</p></li>
<li><p>これによって、 <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> と同等の処理になるケースが減少し <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> のパフォーマンスが改善します。</p></li>
</ul>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.19.1に更新しました。</p></li>
<li><p>Debian GNU/Linux へのインストール方法を変更しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-archive-keyring</span></code> の代わりに <code class="docutils literal notranslate"><span class="pre">groonga-apt-source</span></code> を使うように変更しました。 <code class="docutils literal notranslate"><span class="pre">lintian</span></code> コマンドが <code class="docutils literal notranslate"><span class="pre">/etc/apt/sources.lists.d/</span></code> 配下にファイルを置くパッケージは <code class="docutils literal notranslate"><span class="pre">apt-source</span></code> を使うよう推奨しているためです。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">lintian</span></code> コマンドはパッケージングに共通のエラーをチェックするためのコマンドです。</p></li>
<li><p>インストール方法についての詳細は、以下のURLも参照してください。</p>
<ul>
<li><p><a class="reference external" href="https://groonga.org/ja/docs/install/debian.html">https://groonga.org/ja/docs/install/debian.html</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">highlight_html</span></code> と <code class="docutils literal notranslate"><span class="pre">highlight_full</span></code> をサポートしました。</p></li>
<li><p>値を持たない配列を削除した時、そのレコードのIDを再利用するようにしました。[GitHub#mroonga/mroonga#327][gaeeyoさんの報告]</p>
<ul>
<li><p>値を持たない配列を削除した場合、削除されたIDは再利用されません。</p></li>
<li><p>Groongaは大きなIDがあることによって、多くのストレージを使用します。大きなIDはそれだけで、多くのストレージを使うためです。</p>
<ul>
<li><p>大きなIDは、例えば、Mroongaの <code class="docutils literal notranslate"><span class="pre">mroonga_operations</span></code> のように多くの追加と削除によって発生します。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] インデックスを設定していない全文検索のパフォーマンスを改善しました。</p></li>
<li><p>[<a class="reference internal" href="reference/function.html"><span class="doc">関数</span></a>] 全ての引数が他のテーブルへの参照か、リテラルである関数のパフォーマンスを改善しました。</p></li>
<li><p>[<a class="reference internal" href="reference/indexing.html"><span class="doc">インデックス構築</span></a>] トークンカラムを使った静的インデックス構築のパフォーマンスを改善しました。 [GitHub#1126][naoaさんがパッチ提供]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;_score</span> <span class="pre">=</span> <span class="pre">func(...)&quot;</span></code> のパフォーマンスを改善しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_score</span></code> の値が <code class="docutils literal notranslate"><span class="pre">&quot;_score</span> <span class="pre">=</span> <span class="pre">func(...)&quot;</span></code> のように関数によってのみ算出される場合のパフォーマンスを改善しました。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id13">
<h3>修正<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>応答送信のエラーが発生した後の応答にゴミが含まれることがある問題を修正しました。</p>
<ul>
<li><p>これは、クライアントが全ての応答を読み込まずにコネクションがクローズされた場合に発生することがあります。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id14">
<h3>感謝<a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>gaeeyoさん</p></li>
<li><p>naoaさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-5-2020-07-30">
<span id="release-10-0-5"></span><h2>10.0.5リリース - 2020-07-30<a class="headerlink" href="#release-10-0-5-2020-07-30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id15">
<h3>改良<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">-load_table</span></code> で指定したテーブルに参照を格納できるようにしました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--load-table</span></code> は予め用意したテーブルに検索結果を格納する機能です。</p>
<ul class="simple">
<li><p>複数回検索が実行される場合、このテーブルに結果を格納することで、検索結果をキャッシュできます。</p></li>
<li><p>このテーブルを使うことで、初回以降の検索時間を短縮できます。</p></li>
</ul>
</li>
<li><p>今回のリリース以降で、以下のようにこのテーブルに別のテーブルへの参照を格納できます。</p>
<ul class="simple">
<li><p>カラムの値を格納せず、参照のみを格納するため、このテーブルのサイズを小さくすることができます。</p></li>
<li><p>このテーブルに対して検索する場合、参照先のテーブルのインデックスを使って検索できます。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Logs TABLE_HASH_KEY ShortText
column_create Logs timestamp COLUMN_SCALAR Time

table_create Times TABLE_PAT_KEY Time
column_create Times logs_timestamp COLUMN_INDEX Logs timestamp

table_create LoadedLogs TABLE_HASH_KEY Logs

load --table Logs
[
{
  &quot;_key&quot;: &quot;2015-02-03:1&quot;,
  &quot;timestamp&quot;: &quot;2015-02-03 10:49:00&quot;
},
{
  &quot;_key&quot;: &quot;2015-02-03:2&quot;,
  &quot;timestamp&quot;: &quot;2015-02-03 12:49:00&quot;
},
{
  &quot;_key&quot;: &quot;2015-02-04:1&quot;,
  &quot;timestamp&quot;: &quot;2015-02-04 00:00:00&quot;
}
]

select \
  Logs \
  --load_table LoadedLogs \
  --load_columns &quot;_key&quot; \
  --load_values &quot;_key&quot; \
  --limit 0

select \
  --table LoadedLogs \
  --filter &#39;timestamp &gt;= &quot;2015-02-03 12:49:00&quot;&#39;
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        2
      ],
      [
        [
          &quot;_id&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;_key&quot;,
          &quot;ShortText&quot;
        ],
        [
          &quot;timestamp&quot;,
          &quot;Time&quot;
        ]
      ],
      [
        2,
        &quot;2015-02-03:2&quot;,
        1422935340.0
      ],
      [
        3,
        &quot;2015-02-04:1&quot;,
        1422975600.0
      ]
    ]
  ]
]
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 以下のケースのソートのパフォーマンスを改善しました。</p>
<ul class="simple">
<li><p>多くのソートキーがID解決をする場合。</p>
<ul>
<li><p>例えば、以下の式はIDを解決する必要があります。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">true</span> <span class="pre">--sort_keys</span> <span class="pre">column</span></code></p></li>
</ul>
</li>
<li><p>例えば、以下の式はIDを解決する必要がありません。 擬似カラム <code class="docutils literal notranslate"><span class="pre">_score</span></code> は、結果テーブルに存在しており、ソーステーブルには存在しないためIDを解決する必要がありません。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">true</span> <span class="pre">--sort_keys</span> <span class="pre">_score</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>ソート対象のテーブルがキーを持っている場合。</p>
<ul>
<li><p>したがって、 <code class="docutils literal notranslate"><span class="pre">TABLE_NO_KEY</span></code> はこの改善をサポートしていません。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 以下のケースのパフォーマンスを少し改善しました。</p>
<ul class="simple">
<li><p>沢山のレコードがマッチする検索をしているケース。</p></li>
<li><p>沢山のレコードに対してドリルダウンするケース。</p></li>
</ul>
</li>
<li><p>[aggregator] score アクセサーをサポートしました。[GitHub#1120][naoaさんのパッチ提供]</p>
<ul>
<li><p>例えば、 以下のように <code class="docutils literal notranslate"><span class="pre">_score</span></code> を <code class="docutils literal notranslate"><span class="pre">aggregator_*</span></code> の対象にできます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Items TABLE_HASH_KEY ShortText
column_create Items price COLUMN_SCALAR UInt32
column_create Items tag COLUMN_SCALAR ShortText

load --table Items
[
{&quot;_key&quot;: &quot;Book&quot;,  &quot;price&quot;: 1000, &quot;tag&quot;: &quot;A&quot;},
{&quot;_key&quot;: &quot;Note&quot;,  &quot;price&quot;: 1000, &quot;tag&quot;: &quot;B&quot;},
{&quot;_key&quot;: &quot;Box&quot;,   &quot;price&quot;: 500,  &quot;tag&quot;: &quot;B&quot;},
{&quot;_key&quot;: &quot;Pen&quot;,   &quot;price&quot;: 500,  &quot;tag&quot;: &quot;A&quot;},
{&quot;_key&quot;: &quot;Food&quot;,  &quot;price&quot;: 500,  &quot;tag&quot;: &quot;C&quot;},
{&quot;_key&quot;: &quot;Drink&quot;, &quot;price&quot;: 300,  &quot;tag&quot;: &quot;B&quot;}
]

select Items \
  --filter true \
  --drilldowns[tag].keys tag \
  --drilldowns[tag].output_columns _key,_nsubrecs,score_mean \
  --drilldowns[tag].columns[score_mean].stage group \
  --drilldowns[tag].columns[score_mean].type Float \
  --drilldowns[tag].columns[score_mean].flags COLUMN_SCALAR \
  --drilldowns[tag].columns[score_mean].value &#39;aggregator_mean(_score)&#39;
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        6
      ],
      [
        [
          &quot;_id&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;_key&quot;,
          &quot;ShortText&quot;
        ],
        [
          &quot;price&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;tag&quot;,
          &quot;ShortText&quot;
        ]
      ],
      [
        1,
        &quot;Book&quot;,
        1000,
        &quot;A&quot;
      ],
      [
        2,
        &quot;Note&quot;,
        1000,
        &quot;B&quot;
      ],
      [
        3,
        &quot;Box&quot;,
        500,
        &quot;B&quot;
      ],
      [
        4,
        &quot;Pen&quot;,
        500,
        &quot;A&quot;
      ],
      [
        5,
        &quot;Food&quot;,
        500,
        &quot;C&quot;
      ],
      [
        6,
        &quot;Drink&quot;,
        300,
        &quot;B&quot;
      ]
    ],
    {
      &quot;tag&quot;: [
        [
          3
        ],
        [
          [
            &quot;_key&quot;,
            &quot;ShortText&quot;
          ],
          [
            &quot;_nsubrecs&quot;,
            &quot;Int32&quot;
          ],
          [
            &quot;score_mean&quot;,
            &quot;Float&quot;
          ]
        ],
        [
          &quot;A&quot;,
          2,
          1.0
        ],
        [
          &quot;B&quot;,
          3,
          1.0
        ],
        [
          &quot;C&quot;,
          1,
          1.0
        ]
      ]
    }
  ]
]
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/indexing.html"><span class="doc">インデックス構築</span></a>] VC++版の静的インデックス構築のパフォーマンスを改善しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] JSON形式で出力する際に <code class="docutils literal notranslate"><span class="pre">NaN</span></code> や <code class="docutils literal notranslate"><span class="pre">Infinity</span></code> 、 <code class="docutils literal notranslate"><span class="pre">-Infinity</span></code> の代わりに <code class="docutils literal notranslate"><span class="pre">null</span></code> を出力するようにしました。</p>
<ul class="simple">
<li><p>これらの値はJSONではサポートされていないためです。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 標準偏差の集計をサポートしました。</p>
<ul>
<li><p>例えば、以下のようにグループごとの標準偏差を計算できます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Items TABLE_HASH_KEY ShortText
column_create Items price COLUMN_SCALAR UInt32
column_create Items tag COLUMN_SCALAR ShortText

load --table Items
[
{&quot;_key&quot;: &quot;Book&quot;,  &quot;price&quot;: 1000, &quot;tag&quot;: &quot;A&quot;},
{&quot;_key&quot;: &quot;Note&quot;,  &quot;price&quot;: 1000, &quot;tag&quot;: &quot;B&quot;},
{&quot;_key&quot;: &quot;Box&quot;,   &quot;price&quot;: 500,  &quot;tag&quot;: &quot;B&quot;},
{&quot;_key&quot;: &quot;Pen&quot;,   &quot;price&quot;: 500,  &quot;tag&quot;: &quot;A&quot;},
{&quot;_key&quot;: &quot;Food&quot;,  &quot;price&quot;: 500,  &quot;tag&quot;: &quot;C&quot;},
{&quot;_key&quot;: &quot;Drink&quot;, &quot;price&quot;: 300,  &quot;tag&quot;: &quot;B&quot;}
]

select Items \
  --drilldowns[tag].keys tag \
  --drilldowns[tag].output_columns _key,_nsubrecs,price_sd \
  --drilldowns[tag].columns[price_sd].stage group \
  --drilldowns[tag].columns[price_sd].type Float \
  --drilldowns[tag].columns[price_sd].flags COLUMN_SCALAR \
  --drilldowns[tag].columns[price_sd].value &#39;aggregator_sd(price)&#39; \
  --output_pretty yes
[
  [
    0,
    1594339851.924836,
    0.002813816070556641
  ],
  [
    [
      [
        6
      ],
      [
        [
          &quot;_id&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;_key&quot;,
          &quot;ShortText&quot;
        ],
        [
          &quot;price&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;tag&quot;,
          &quot;ShortText&quot;
        ]
      ],
      [
        1,
        &quot;Book&quot;,
        1000,
        &quot;A&quot;
      ],
      [
        2,
        &quot;Note&quot;,
        1000,
        &quot;B&quot;
      ],
      [
        3,
        &quot;Box&quot;,
        500,
        &quot;B&quot;
      ],
      [
        4,
        &quot;Pen&quot;,
        500,
        &quot;A&quot;
      ],
      [
        5,
        &quot;Food&quot;,
        500,
        &quot;C&quot;
      ],
      [
        6,
        &quot;Drink&quot;,
        300,
        &quot;B&quot;
      ]
    ],
    {
      &quot;tag&quot;: [
        [
          3
        ],
        [
          [
            &quot;_key&quot;,
            &quot;ShortText&quot;
          ],
          [
            &quot;_nsubrecs&quot;,
            &quot;Int32&quot;
          ],
          [
            &quot;price_sd&quot;,
            &quot;Float&quot;
          ]
        ],
        [
          &quot;A&quot;,
          2,
          250.0
        ],
        [
          &quot;B&quot;,
          3,
          294.3920288775949
        ],
        [
          &quot;C&quot;,
          1,
          0.0
        ]
      ]
    }
  ]
]
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">aggregate_sd(target,</span> <span class="pre">{&quot;unbiased&quot;:</span> <span class="pre">true})</span></code> と指定することで、不偏標準偏差も計算できます。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[Windows] Visual Studio 2013のサポートをやめました。</p></li>
</ul>
</div>
<div class="section" id="id16">
<h3>修正<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>] 応答がエラーで中断された時に、 <code class="docutils literal notranslate"><span class="pre">shutdown?immediate</span></code> を実行しても、リクエストが中断しない問題を修正しました。</p></li>
<li><p>リクエスト中にエラーが発生した時にクラッシュする問題を修正しました。</p>
<ul>
<li><p>これは、Apache Arrow形式を使っている時にのみ発生します。</p></li>
<li><p>前のリクエストがエラーによって中断された後に再度Groongaへリクエストを送信した時にGroongaがクラッシュします。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] 一時テーブルを使用した時にクラッシュする問題を修正しました。</p>
<ul>
<li><p>例えば、 <code class="docutils literal notranslate"><span class="pre">between</span></code> の第一引数に動的カラムを指定すると、Groongaがクラッシュしていました。</p></li>
</ul>
</li>
<li><p>プラグインで作成したプロシージャーが予期せず解放される問題を修正しました。</p>
<ul>
<li><p>参照カウントモードでのみ発生します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plugin_register</span></code> を使っていない場合は、発生しません。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plugin_register</span></code> を実行したプロセスでは発生しません。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plugin_register</span></code> を実行していないプロセスで発生します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">token_column</span></code> を使った静的インデックス構築中に正規化エラーが発生する問題を修正しました。[GitHub#1122][naoaさんの報告]</p></li>
</ul>
</div>
<div class="section" id="id17">
<h3>感謝<a class="headerlink" href="#id17" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>naoaさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-4-2020-06-29">
<span id="release-10-0-4"></span><h2>10.0.4リリース - 2020-06-29<a class="headerlink" href="#release-10-0-4-2020-06-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id18">
<h3>改良<a class="headerlink" href="#id18" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/tables.html"><span class="doc">テーブル</span></a>] ハッシュテーブルで4億件のレコードの登録をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">_score</span></code> が再帰的に値を取得しない時のパフォーマンスを改善しました。</p>
<ul class="simple">
<li><p>Groongaは、検索結果が検索対象の時に、 <code class="docutils literal notranslate"><span class="pre">_score</span></code> の値を再帰的に取得します。</p></li>
<li><p>例えば、 <code class="docutils literal notranslate"><span class="pre">slices</span></code> は検索結果が検索対象です。したがって、 <code class="docutils literal notranslate"><span class="pre">slices</span></code> を使っているクエリーでは、この改善は効果がありません。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">ログ</span></a>] ドリルダウンのキーをクエリーログに出力するようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/reference_acquire.html"><span class="doc">reference_acquire</span></a>], [<a class="reference internal" href="reference/commands/reference_release.html"><span class="doc">reference_release</span></a>] 参照カウントモード用に新しいコマンドを追加しました。</p>
<ul class="simple">
<li><p>短い間隔で複数の <code class="docutils literal notranslate"><span class="pre">load</span></code> を呼び出す必要がある場合、参照カウントモードによる自動クローズによってパフォーマンスが低下します。</p></li>
<li><p>複数の <code class="docutils literal notranslate"><span class="pre">load</span></code> の前に <code class="docutils literal notranslate"><span class="pre">reference_acquire</span></code> を呼び、 複数の <code class="docutils literal notranslate"><span class="pre">load</span></code> の後に <code class="docutils literal notranslate"><span class="pre">reference_release</span></code> を呼ぶことで、このパフォーマンスの低下を避けることができます。<code class="docutils literal notranslate"><span class="pre">reference_acquire</span></code> と <code class="docutils literal notranslate"><span class="pre">reference_release</span></code> の間は自動クローズは無効になります。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">reference_acquire</span></code> が、対象のオブジェクトの参照を取得するためです。</p></li>
</ul>
</li>
<li><p>パフォーマンスに影響のある操作が完了したら、 <code class="docutils literal notranslate"><span class="pre">reference_release</span></code> を呼ぶ必要があります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reference_release</span></code> を呼ばない場合、参照カウントモードは機能しません。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 一度の <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> で複数グループの集計をサポートしました。</p>
<ul>
<li><p>以下のように、一回の <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> で異なるグループ毎に和と算術平均を計算できるようになりました。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Items TABLE_HASH_KEY ShortText
column_create Items price COLUMN_SCALAR UInt32
column_create Items quantity COLUMN_SCALAR UInt32
column_create Items tag COLUMN_SCALAR ShortText

load --table Items
[
{&quot;_key&quot;: &quot;Book&quot;,  &quot;price&quot;: 1000, &quot;quantity&quot;: 100, &quot;tag&quot;: &quot;A&quot;},
{&quot;_key&quot;: &quot;Note&quot;,  &quot;price&quot;: 1000, &quot;quantity&quot;: 10,  &quot;tag&quot;: &quot;B&quot;},
{&quot;_key&quot;: &quot;Box&quot;,   &quot;price&quot;: 500,  &quot;quantity&quot;: 15,  &quot;tag&quot;: &quot;B&quot;},
{&quot;_key&quot;: &quot;Pen&quot;,   &quot;price&quot;: 500,  &quot;quantity&quot;: 12,  &quot;tag&quot;: &quot;A&quot;},
{&quot;_key&quot;: &quot;Food&quot;,  &quot;price&quot;: 500,  &quot;quantity&quot;: 111, &quot;tag&quot;: &quot;C&quot;},
{&quot;_key&quot;: &quot;Drink&quot;, &quot;price&quot;: 300,  &quot;quantity&quot;: 22,  &quot;tag&quot;: &quot;B&quot;}
]

select Items \
  --drilldowns[tag].keys tag \
  --drilldowns[tag].output_columns _key,_nsubrecs,price_sum,quantity_sum \
  --drilldowns[tag].columns[price_sum].stage group \
  --drilldowns[tag].columns[price_sum].type UInt32 \
  --drilldowns[tag].columns[price_sum].flags COLUMN_SCALAR \
  --drilldowns[tag].columns[price_sum].value &#39;aggregator_sum(price)&#39; \
  --drilldowns[tag].columns[quantity_sum].stage group \
  --drilldowns[tag].columns[quantity_sum].type UInt32 \
  --drilldowns[tag].columns[quantity_sum].flags COLUMN_SCALAR \
  --drilldowns[tag].columns[quantity_sum].value &#39;aggregator_sum(quantity)&#39;
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        6
      ],
      [
        [
          &quot;_id&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;_key&quot;,
          &quot;ShortText&quot;
        ],
        [
          &quot;price&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;quantity&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;tag&quot;,
          &quot;ShortText&quot;
        ]
      ],
      [
        1,
        &quot;Book&quot;,
        1000,
        100,
        &quot;A&quot;
      ],
      [
        2,
        &quot;Note&quot;,
        1000,
        10,
        &quot;B&quot;
      ],
      [
        3,
        &quot;Box&quot;,
        500,
        15,
        &quot;B&quot;
      ],
      [
        4,
        &quot;Pen&quot;,
        500,
        12,
        &quot;A&quot;
      ],
      [
        5,
        &quot;Food&quot;,
        500,
        111,
        &quot;C&quot;
      ],
      [
        6,
        &quot;Drink&quot;,
        300,
        22,
        &quot;B&quot;
      ]
    ],
    {
      &quot;tag&quot;: [
        [
          3
        ],
        [
          [
            &quot;_key&quot;,
            &quot;ShortText&quot;
          ],
          [
            &quot;_nsubrecs&quot;,
            &quot;Int32&quot;
          ],
          [
            &quot;price_sum&quot;,
            &quot;UInt32&quot;
          ],
          [
            &quot;quantity_sum&quot;,
            &quot;UInt32&quot;
          ]
        ],
        [
          &quot;A&quot;,
          2,
          1500,
          112
        ],
        [
          &quot;B&quot;,
          3,
          1800,
          47
        ],
        [
          &quot;C&quot;,
          1,
          500,
          111
        ]
      ]
    }
  ]
]
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] スタンドアローンモードで、 <code class="docutils literal notranslate"><span class="pre">--pid-path</span></code> をサポートしました。</p>
<ul class="simple">
<li><p>以前のバージョンのスタンドアローンモードでは、 <code class="docutils literal notranslate"><span class="pre">--pid-path</span></code> は無視されていました。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] 参照カウントモードに対応しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>],[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] 参照カウントモードに対応しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>] 最後のチャンクの後にヘッダーをつけないようにしました。</p>
<ul class="simple">
<li><p>最後のチャンクの後のヘッダーを無視するHTTPクライアントが存在する可能性があるためです。</p></li>
</ul>
</li>
<li><p>[vector_slice] <code class="docutils literal notranslate"><span class="pre">Float32</span></code> 型のベクターをサポートしました。 [GitHub#1106 naoaさんがパッチ提供]</p></li>
<li><p>トークンカラムを使った、並列静的インデックス構築をサポートしました。</p>
<ul class="simple">
<li><p>予めトークナイズされたデータから複数スレッドで静的インデックスの構築ができるようになりました。</p></li>
<li><p>以下の環境変数で、並列静的インデックス構築のパラメータを調整できます。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_TOKEN_COLUMN_PARALLEL_CHUNK_SIZE</span></code> : スレッド毎にどのくらいのレコードを処理するかを指定します。</p>
<ul>
<li><p>デフォルト値は <code class="docutils literal notranslate"><span class="pre">1024</span></code> レコードです。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_TOKEN_COLUMN_PARALLEL_TABLE_SIZE_THRESHOLD</span></code> : どのくらいのソースレコードで並列化するかを指定します。</p>
<ul>
<li><p>デフォルト値は <code class="docutils literal notranslate"><span class="pre">102400</span></code> レコードです。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 参照カウントモード時の <code class="docutils literal notranslate"><span class="pre">load_table</span></code> のパフォーマンスを改善しました。</p></li>
</ul>
</div>
<div class="section" id="id19">
<h3>修正<a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>シャードをまたいでいて、かつ <code class="docutils literal notranslate"><span class="pre">--filter</span></code> を指定していない動的カラムを使って検索すると、Gronngaのデータベースが破損する問題を修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">schema</span></code> コマンドの結果に <code class="docutils literal notranslate"><span class="pre">Float32</span></code> 型が表示されなかった問題を修正しました。</p></li>
<li><p>参照 <code class="docutils literal notranslate"><span class="pre">uvector</span></code> が要素を持っていないとき、 <code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code> を余分にカウントする問題を修正しました。</p></li>
</ul>
</div>
<div class="section" id="id20">
<h3>感謝<a class="headerlink" href="#id20" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>naoaさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-3-2020-05-29">
<span id="release-10-0-3"></span><h2>10.0.3リリース - 2020-05-29<a class="headerlink" href="#release-10-0-3-2020-05-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id21">
<h3>改良<a class="headerlink" href="#id21" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>予めトークナイズされたデータから転置インデックスを構築できるようになりました。</p>
<ul>
<li><p>これにより、インデックスの構築が高速化します。</p></li>
<li><p>この改善を使うには、トークンカラムを準備する必要があります。</p></li>
<li><p>トークンカラムは、インデックスカラムのように自動で値が生成されます。</p></li>
<li><p>トークンカラムの値はソースカラムの値をトークナイズすることで生成されます。</p></li>
<li><p>トークンカラムは以下のようにソースカラムを設定することで作成できます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Terms TABLE_PAT_KEY ShortText \
  --normalizer NormalizerNFKC121 \
  --default_tokenizer TokenNgram

table_create Notes TABLE_NO_KEY
column_create Notes title COLUMN_SCALAR Text

# The last &quot;title&quot; is the source column.
column_create Notes title_terms COLUMN_VECTOR Terms title
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 関数の引数に <code class="docutils literal notranslate"><span class="pre">vector</span></code> を指定できるようになりました。</p>
<ul>
<li><p>例えば、 <code class="docutils literal notranslate"><span class="pre">query</span></code> の <code class="docutils literal notranslate"><span class="pre">flags</span></code> オプションを <code class="docutils literal notranslate"><span class="pre">vector</span></code> を使って以下のように記述できます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>select \
  --table Memos \
  --filter &#39;query(&quot;content&quot;, &quot;-content:@mroonga&quot;, \
                  { \
                    &quot;expander&quot;: &quot;QueryExpanderTSV&quot;, \
                    &quot;flags&quot;: [&quot;ALLOW_LEADING_NOT&quot;, &quot;ALLOW_COLUMN&quot;] \
                  })&#39;
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 動的カラムに新しいステージ <code class="docutils literal notranslate"><span class="pre">result_set</span></code> を追加しました。</p>
<ul class="simple">
<li><p>このステージは、結果セットのテーブルにカラムを作ります。したがって、 <code class="docutils literal notranslate"><span class="pre">query</span></code> か <code class="docutils literal notranslate"><span class="pre">filter</span></code> が存在しない場合は作られません。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">query</span></code> や <code class="docutils literal notranslate"><span class="pre">filter</span></code> が存在しない場合は、結果セットのテーブルが作られないためです。</p></li>
</ul>
</li>
<li><p>このステージでは <code class="docutils literal notranslate"><span class="pre">_value</span></code> は使用できません。 <code class="docutils literal notranslate"><span class="pre">result_set</span></code> ステージの値は <code class="docutils literal notranslate"><span class="pre">score_column</span></code> に格納されます。</p></li>
</ul>
</li>
<li><p>[vector_slice] 重み付きベクターの重みに <code class="docutils literal notranslate"><span class="pre">Float32</span></code> 型が使えるようになりました。  [GitHub#1106 naoaさんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] drilldownsの動的カラムのステージに <code class="docutils literal notranslate"><span class="pre">filtered</span></code> と <code class="docutils literal notranslate"><span class="pre">output</span></code> を追加しました。 [GitHub#1101 naoaさんがパッチ提供][GitHub#1100 naoaさんがパッチ提供]</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[Label].stage</span> <span class="pre">filtered</span></code> や <code class="docutils literal notranslate"><span class="pre">drilldowns[Label].stage</span> <span class="pre">output</span></code> のように drilldowns の動的カラムのステージに <code class="docutils literal notranslate"><span class="pre">filtered</span></code> と <code class="docutils literal notranslate"><span class="pre">output</span></code> を使えます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] ドリルダウンでの集計に <code class="docutils literal notranslate"><span class="pre">Float</span></code> 型の値をサポートしました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MAX</span></code>、<code class="docutils literal notranslate"><span class="pre">MIN</span></code>、<code class="docutils literal notranslate"><span class="pre">SUM</span></code> を使って <code class="docutils literal notranslate"><span class="pre">Float</span></code> 型の値の最大値、最小値、合計値を集計できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] [<a class="reference internal" href="reference/functions/geo_in_rectangle.html"><span class="doc">geo_in_rectangle</span></a>] [<a class="reference internal" href="reference/functions/geo_in_circle.html"><span class="doc">geo_in_circle</span></a>] <code class="docutils literal notranslate"><span class="pre">query()</span></code> と <code class="docutils literal notranslate"><span class="pre">geo_in_rectangle()</span></code> と <code class="docutils literal notranslate"><span class="pre">geo_in_circle()</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">score_column</span></code> を追加しました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">score_column</span></code> を使うことで条件毎にスコアの値を格納できます。</p></li>
<li><p>通常、Groongaは、全ての条件のスコアーを加算してスコアーを計算しますが、条件毎にスコアーの値を取得したいこともあります。</p></li>
<li><p>例えば以下のように、中心座標にどれだけ近いかをスコアーとして使いたい場合に <code class="docutils literal notranslate"><span class="pre">score_column</span></code> が使えます。</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create LandMarks TABLE_NO_KEY
column_create LandMarks name COLUMN_SCALAR ShortText
column_create LandMarks category COLUMN_SCALAR ShortText
column_create LandMarks point COLUMN_SCALAR WGS84GeoPoint

table_create Points TABLE_PAT_KEY WGS84GeoPoint
column_create Points land_mark_index COLUMN_INDEX LandMarks point

load --table LandMarks
[
  {&quot;name&quot;: &quot;Aries&quot;      , &quot;category&quot;: &quot;Tower&quot;     , &quot;point&quot;: &quot;11x11&quot;},
  {&quot;name&quot;: &quot;Taurus&quot;     , &quot;category&quot;: &quot;Lighthouse&quot;, &quot;point&quot;: &quot;9x10&quot; },
  {&quot;name&quot;: &quot;Gemini&quot;     , &quot;category&quot;: &quot;Lighthouse&quot;, &quot;point&quot;: &quot;8x8&quot;  },
  {&quot;name&quot;: &quot;Cancer&quot;     , &quot;category&quot;: &quot;Tower&quot;     , &quot;point&quot;: &quot;12x12&quot;},
  {&quot;name&quot;: &quot;Leo&quot;        , &quot;category&quot;: &quot;Tower&quot;     , &quot;point&quot;: &quot;11x13&quot;},
  {&quot;name&quot;: &quot;Virgo&quot;      , &quot;category&quot;: &quot;Temple&quot;    , &quot;point&quot;: &quot;22x10&quot;},
  {&quot;name&quot;: &quot;Libra&quot;      , &quot;category&quot;: &quot;Tower&quot;     , &quot;point&quot;: &quot;14x14&quot;},
  {&quot;name&quot;: &quot;Scorpio&quot;    , &quot;category&quot;: &quot;Temple&quot;    , &quot;point&quot;: &quot;21x9&quot; },
  {&quot;name&quot;: &quot;Sagittarius&quot;, &quot;category&quot;: &quot;Temple&quot;    , &quot;point&quot;: &quot;43x12&quot;},
  {&quot;name&quot;: &quot;Capricorn&quot;  , &quot;category&quot;: &quot;Tower&quot;     , &quot;point&quot;: &quot;33x12&quot;},
  {&quot;name&quot;: &quot;Aquarius&quot;   , &quot;category&quot;: &quot;mountain&quot;  , &quot;point&quot;: &quot;55x11&quot;},
  {&quot;name&quot;: &quot;Pisces&quot;     , &quot;category&quot;: &quot;Tower&quot;     , &quot;point&quot;: &quot;9x9&quot;  },
  {&quot;name&quot;: &quot;Ophiuchus&quot;  , &quot;category&quot;: &quot;mountain&quot;  , &quot;point&quot;: &quot;21x21&quot;}
]

select LandMarks \
  --sort_keys &#39;distance&#39; \
  --columns[distance].stage initial \
  --columns[distance].type Float \
  --columns[distance].flags COLUMN_SCALAR \
  --columns[distance].value 0.0 \
  --output_columns &#39;name, category, point, distance, _score&#39; \
  --limit -1 \
  --filter &#39;geo_in_circle(point, &quot;11x11&quot;, &quot;11x1&quot;, {&quot;score_column&quot;: distance}) &amp;&amp; category == &quot;Tower&quot;&#39;
[
  [
    0,
    1590647445.406149,
    0.0002503395080566406
  ],
  [
    [
      [
        5
      ],
      [
        [
          &quot;name&quot;,
          &quot;ShortText&quot;
        ],
        [
          &quot;category&quot;,&quot;ShortText&quot;
        ],
        [
          &quot;point&quot;,
          &quot;WGS84GeoPoint&quot;
        ],
        [
          &quot;distance&quot;,
          &quot;Float&quot;
        ],
        [
          &quot;_score&quot;,
          &quot;Int32&quot;
        ]
      ],
      [
        &quot;Aries&quot;,
        &quot;Tower&quot;,
        &quot;11x11&quot;,
        0.0,
        1
      ],
      [
        &quot;Cancer&quot;,
        &quot;Tower&quot;,
        &quot;12x12&quot;,
        0.0435875803232193,
        1
      ],
      [
        &quot;Leo&quot;,
        &quot;Tower&quot;,
        &quot;11x13&quot;,
        0.06164214760065079,
        1
      ],
      [
        &quot;Pisces&quot;,
        &quot;Tower&quot;,
        &quot;9x9&quot;,
        0.0871751606464386,
        1
      ],
      [
        &quot;Libra&quot;,
        &quot;Tower&quot;,
        &quot;14x14&quot;,
        0.1307627409696579,
        1
      ]
    ]
  ]
]
</pre></div>
</div>
<ul class="simple">
<li><p>上記の例では、 <code class="docutils literal notranslate"><span class="pre">_score</span></code> によるソートは意味をなしません。 <code class="docutils literal notranslate"><span class="pre">category</span> <span class="pre">==</span> <span class="pre">&quot;Tower&quot;</span></code> によって、 <code class="docutils literal notranslate"><span class="pre">_score</span></code> の値は全て <code class="docutils literal notranslate"><span class="pre">1</span></code> になるためです。しかし、 <code class="docutils literal notranslate"><span class="pre">socre_column</span></code> を使うことで、中心座標からの距離でソートできます。</p></li>
</ul>
</li>
<li><p>[Windows] クラッシュしていないくてもエラー時にはバックトレースが出力されるようになりました。</p></li>
<li><p>[Windows] 古いWindowsのサポートをやめました。</p>
<ul class="simple">
<li><p>10.0.3から、Windows 8 (Windows Server 2012) 以降を要求します。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 参照可能なソートキーとそうでないソートキーが混在しているときのソートパフォーマンスを改善しました。</p>
<ul class="simple">
<li><p>参照可能なソートキーとそうでないソートキーが混在していて、参照可能なキーが2つ以上あるときのソートパフォーマンスを改善しました。</p>
<ul>
<li><p>参照可能なソートキーとは以下のソートキー以外のことです。</p>
<ul>
<li><p>圧縮されたカラム</p></li>
<li><p>ドリルダウンのキーに複数の値が指定されているドリルダウンの値を格納する <code class="docutils literal notranslate"><span class="pre">_value</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ShortText</span></code> 型のキーを持たないパトリシアトライテーブルの <code class="docutils literal notranslate"><span class="pre">_key</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_score</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>文字列以外のソートキーが多いほど、ソートに使用するメモリ使用量が少なくなります。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 全てのソートキーが参照可能なキーの時のソートのパフォーマンスを改善しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">_socre</span> <span class="pre">=</span> <span class="pre">column1*X</span> <span class="pre">+</span> <span class="pre">column2*Y</span> <span class="pre">+</span> <span class="pre">...</span></code> の場合のスコアラーのパフォーマンスを改善しました。</p>
<ul class="simple">
<li><p>この最適化は、 <code class="docutils literal notranslate"><span class="pre">_score</span></code> 内に多くの <code class="docutils literal notranslate"><span class="pre">+</span></code> または <code class="docutils literal notranslate"><span class="pre">*</span></code> がある場合に効きます。</p></li>
<li><p>現状、 <code class="docutils literal notranslate"><span class="pre">+</span></code> と <code class="docutils literal notranslate"><span class="pre">*</span></code> に対してのみ効果があります。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] フレーズ近傍検索をサポートしました。</p>
<ul>
<li><p>フレーズ単位で近傍検索できます。</p>
<ul>
<li><p>フレーズ近傍検索のクエリー構文は、 <code class="docutils literal notranslate"><span class="pre">*NP&quot;Phrase1</span> <span class="pre">phrase2</span> <span class="pre">...&quot;</span></code> です。</p></li>
<li><p>フレーズ近傍検索のスクリプト構文は、 <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">*NP</span> <span class="pre">&quot;phrase1</span> <span class="pre">phrase2</span> <span class="pre">...&quot;</span></code> です。</p></li>
<li><p>検索対象のフレーズにスペースを含む場合、 以下のようにフレーズを <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> で囲うことで検索できます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Entries TABLE_NO_KEY
column_create Entries content COLUMN_SCALAR Text

table_create Terms TABLE_PAT_KEY ShortText \
  --default_tokenizer &#39;TokenNgram(&quot;unify_alphabet&quot;, false, \
                                  &quot;unify_digit&quot;, false)&#39; \
  --normalizer NormalizerNFKC121
column_create Terms entries_content COLUMN_INDEX|WITH_POSITION Entries content

load --table Entries
[
{&quot;content&quot;: &quot;I started to use Groonga. It&#39;s very fast!&quot;},
{&quot;content&quot;: &quot;I also started to use Groonga. It&#39;s also very fast! Really fast!&quot;}
]

select Entries --filter &#39;content *NP &quot;\\&quot;I started\\&quot; \\&quot;use Groonga\\&quot;&quot;&#39; --output_columns &#39;content&#39;
[
  [
    0,
    1590469700.715882,
    0.03997230529785156
  ],
  [
    [
      [
        1
      ],
      [
        [
          &quot;content&quot;,
          &quot;Text&quot;
        ]
      ],
      [
        &quot;I started to use Groonga. It&#39;s very fast!&quot;
      ]
    ]
  ]
]
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/columns/vector.html"><span class="doc">ベクターカラム</span></a>] 重み付きベクターの重みに <code class="docutils literal notranslate"><span class="pre">float32</span></code> 型を追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">uint32</span></code> の代わりに <code class="docutils literal notranslate"><span class="pre">float32</span></code> として重みを格納できます。</p></li>
<li><p>この機能を使うには、 <code class="docutils literal notranslate"><span class="pre">column_create</span></code> 実行時に <code class="docutils literal notranslate"><span class="pre">WEIGHT_FLOAT32</span></code> フラグを追加する必要があります。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>column_create Records tags COLUMN_VECTOR|WITH_WEIGHT|WEIGHT_FLOAT32 Tags
</pre></div>
</div>
</li>
<li><p>今の所、 <code class="docutils literal notranslate"><span class="pre">WEIGHT_FLOAT32</span></code> フラグは、 <code class="docutils literal notranslate"><span class="pre">COLUMN_INDEX</span></code> フラグと併用できません。</p></li>
</ul>
</li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_xxx</span></code> 関数を追加しました。詳細は以下の通りです。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_weight_vector(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code></p>
<ul>
<li><p>重み付きベクターかどうかを <code class="docutils literal notranslate"><span class="pre">bool</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_uvector(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">uvector</span></code> かどうかを <code class="docutils literal notranslate"><span class="pre">bool</span></code> として返します。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">uvector</span></code> とは、要素のサイズが固定の <code class="docutils literal notranslate"><span class="pre">vector</span></code> です。</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_weight_uvector(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code></p>
<ul>
<li><p>重み付きuvectorかどうかを <code class="docutils literal notranslate"><span class="pre">bool</span></code> として返します。</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_type_id_size(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_id</span> <span class="pre">id)</span></code> を追加しました。</p>
<ul class="simple">
<li><p>Groongaのデータ型のサイズを <code class="docutils literal notranslate"><span class="pre">size_t</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_xxx</span></code> を追加しました。詳細は以下の通りです。</p>
<ul class="simple">
<li><p>これらの関数はセレクター関連のデータを返します。</p>
<ul>
<li><p>これらの関数はセレクターの中で呼び出すことを想定しています。セレクター以外の場所で呼び出された場合は、 <code class="docutils literal notranslate"><span class="pre">NULL</span></code> を返します。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get(grn_ctx</span> <span class="pre">*ctx)</span></code></p>
<ul>
<li><p>セレクター呼び出しに関する全ての情報を <code class="docutils literal notranslate"><span class="pre">grn_selector_data</span> <span class="pre">*</span></code> 構造体として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_selector(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>セレクター自身を <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_expr(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>セレクターに使用されている、 <code class="docutils literal notranslate"><span class="pre">--filter</span></code> 条件や <code class="docutils literal notranslate"><span class="pre">--query</span></code> 条件を <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_table(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>検索対象のテーブルを <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_index(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>セレクターに使われているインデックスを <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_args(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data,</span> <span class="pre">size_t</span> <span class="pre">*n_args)</span></code></p>
<ul>
<li><p>セレクターが呼び出した関数の引数を <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_result_set(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>結果テーブルを <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_op(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>既存の結果セットに対してどう集合演算したかを <code class="docutils literal notranslate"><span class="pre">grn_operator</span></code> として返します。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_xxx</span></code> 関数を追加しました。詳細は以下の通りです。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_get_value_operator(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*value,</span> <span class="pre">grn_operator</span> <span class="pre">default_operator,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*context)</span></code></p>
<ul class="simple">
<li><p>クエリーオペレーターを <code class="docutils literal notranslate"><span class="pre">grn_operator</span></code> として返します。</p>
<ul>
<li><p>例えば、 <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> は <code class="docutils literal notranslate"><span class="pre">GRN_OP_ANDP</span></code> として返されます。</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_get_value_bool(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*value,</span> <span class="pre">bool</span> <span class="pre">default_value,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*tag)</span></code></p>
<ul>
<li><p>以下の関数の引数 <code class="docutils literal notranslate"><span class="pre">with_transposition</span></code> のように <code class="docutils literal notranslate"><span class="pre">true</span></code> または <code class="docutils literal notranslate"><span class="pre">false</span></code> が指定される値を <code class="docutils literal notranslate"><span class="pre">bool</span></code> として返します。( <code class="docutils literal notranslate"><span class="pre">bool</span></code> はC言語のデータ型です。)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fuzzy_search(column, query, {&quot;max_distance&quot;: 1, &quot;prefix_length&quot;: 0, &quot;max_expansion&quot;: 0, &quot;with_transposition&quot;: true})
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_options_xxx</span></code> 関数を追加しました。詳細は以下の通りです。</p>
<ul class="simple">
<li><p>これらは、 <code class="docutils literal notranslate"><span class="pre">query()</span></code> でのみ使えます。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_options_parsev(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*options,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*tag,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name,</span> <span class="pre">va_list</span> <span class="pre">args)</span></code> を追加しました。</p>
<ul>
<li><p>オプションのパースを実行します。</p></li>
<li><p>今までは、オプションのパースを自分で実装しなければなりませんでしたが、この関数を呼び出すだけでオプションをパースできます。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_options_parse(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*options,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*tag,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name,</span> <span class="pre">...)</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_option_parsev()</span></code> を呼び出します。したがって、この関数の機能は、 <code class="docutils literal notranslate"><span class="pre">grn_proc_options_parsev()</span></code> と同じです。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_options_parsev()</span></code> とは、インターフェースだけが異なります。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_text_printfv(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*bulk,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*format,</span> <span class="pre">va_list</span> <span class="pre">args)</span></code> を追加しました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_text_vprintf</span></code> は10.0.3から非推奨になりました。 代わりに <code class="docutils literal notranslate"><span class="pre">grn_text_printfv</span></code> を使ってください。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_type_id_is_float_family(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_id</span> <span class="pre">id)</span></code> を追加しました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_type_id</span></code> が <code class="docutils literal notranslate"><span class="pre">GRN_DB_FLOAT32</span></code> または <code class="docutils literal notranslate"><span class="pre">GRN_DB_FLOAT</span></code> かどうかを <code class="docutils literal notranslate"><span class="pre">bool</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_dat_cursor_get_max_n_records(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_dat_cursor</span> <span class="pre">*c)</span></code> を追加しました。</p>
<ul class="simple">
<li><p>カーソルが保持できるレコード数の最大値を <code class="docutils literal notranslate"><span class="pre">size_t</span></code> として返します。(このAPIはDATテーブル用です。)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_table_cursor_get_max_n_records(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_table_cursor</span> <span class="pre">*cursor)</span></code> を追加しました。</p>
<ul class="simple">
<li><p>カーソルが保持できるレコード数の最大値を返します。</p></li>
<li><p>全ての種類(<code class="docutils literal notranslate"><span class="pre">TABLE_NO_KEY</span></code>, <code class="docutils literal notranslate"><span class="pre">TABLE_HASH_KEY</span></code>, <code class="docutils literal notranslate"><span class="pre">TABLE_DAT_KEY</span></code>, <code class="docutils literal notranslate"><span class="pre">TABLE_PAT_KEY</span></code>)のテーブルで使えます。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_result_set_add_xxx</span></code> を追加しました。詳細は以下の通りです。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_result_set_add_record(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_hash</span> <span class="pre">*result_set,</span> <span class="pre">grn_posting</span> <span class="pre">*posting,</span> <span class="pre">grn_operator</span> <span class="pre">op)</span></code></p>
<ul>
<li><p>結果セットのテーブルにレコードを追加します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_ii_posting_add_float</span></code> は10.0.3から非推奨になりました。代わりに <code class="docutils literal notranslate"><span class="pre">grn_rset_add_records()</span></code> を使ってください。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_result_set_add_table(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_hash</span> <span class="pre">*result_set,</span> <span class="pre">grn_obj</span> <span class="pre">*table,</span> <span class="pre">double</span> <span class="pre">score,</span> <span class="pre">grn_operator</span> <span class="pre">op)</span></code></p>
<ul>
<li><p>結果セットにテーブルを追加します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_result_set_add_table_cursor(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_hash</span> <span class="pre">*result_set,</span> <span class="pre">grn_table_cursor</span> <span class="pre">*cursor,</span> <span class="pre">double</span> <span class="pre">score,</span> <span class="pre">grn_operator</span> <span class="pre">op)</span></code></p>
<ul>
<li><p>結果セットにカーソル内のレコードを追加します。</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_vector_copy(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*src,</span> <span class="pre">grn_obj</span> <span class="pre">*dest)</span></code> を追加しました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vector</span></code> オブジェトをコピーします。 <code class="docutils literal notranslate"><span class="pre">vector</span></code> オブジェクトのコピーに成功したかどうかを返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_have_source(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code> を追加しました。</p>
<ul class="simple">
<li><p>ソースカラムを持つカラムかどうかを <code class="docutils literal notranslate"><span class="pre">bool</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_token_column(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code> を追加しました。</p>
<ul class="simple">
<li><p>トークンカラムかどうかを <code class="docutils literal notranslate"><span class="pre">bool</span></code> として返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_hash_add_table_cursor(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_hash</span> <span class="pre">*hash,</span> <span class="pre">grn_table_cursor</span> <span class="pre">*cursor,</span> <span class="pre">double</span> <span class="pre">score)</span></code> を追加しました。</p>
<ul class="simple">
<li><p>結果セットを一括して挿入するための関数です。 <code class="docutils literal notranslate"><span class="pre">grn_ii_posting_add()</span></code> を使ってレコードを挿入するより高速です。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id22">
<h3>修正<a class="headerlink" href="#id22" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>複数のスレッドから、同時にモジュール(トークナイザー、ノーマライザー、トークンフィルター)が使われた場合にクラッシュする問題を修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Float32</span></code> の値を表示する際の精度を修正しました。</p>
<ul>
<li><p>10.0.3から <code class="docutils literal notranslate"><span class="pre">Float32</span></code> の値の精度は、 8桁から7桁になります。</p></li>
</ul>
</li>
<li><p>動的カラムのパラメーターだけが違うクエリーが実行された時にGroongaが誤ったキャッシュを使用していた問題を修正しました。 [GitHub#1102 naoaさんがパッチ提供]</p></li>
</ul>
</div>
<div class="section" id="id23">
<h3>感謝<a class="headerlink" href="#id23" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>naoaさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-2-2020-04-29">
<span id="release-10-0-2"></span><h2>10.0.2リリース - 2020-04-29<a class="headerlink" href="#release-10-0-2-2020-04-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id24">
<h3>改良<a class="headerlink" href="#id24" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">time_classify_*</span></code> 関数が <code class="docutils literal notranslate"><span class="pre">uvector</span></code> に対応しました。 [GitHub#1089][naoaさんがパッチ提供]</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uvector</span></code> とは、要素のサイズが固定のベクターです。</p></li>
<li><p>例えば、Time型の要素を格納しているベクターは <code class="docutils literal notranslate"><span class="pre">uvector</span></code> です。</p></li>
</ul>
</li>
<li><p>ゼロコピーで値を参照できないソートキーが混在しているケースでソートのパフォーマンスを改善しました。</p>
<ul class="simple">
<li><p>いくつかのソートキー(例えば、 <code class="docutils literal notranslate"><span class="pre">_score</span></code> 等)の値はゼロコピーで値を参照できません。</p></li>
<li><p>これらの値が一つでも含まれる場合、以前は全てのソートキーの値をコピーしていました。</p></li>
<li><p>今回の変更から、参照できないソートキーの値だけコピーし、参照可能なソートキーの値はコピーせずに参照するようにしました。</p></li>
<li><p>ただ、この変更で全てのソートキーの値が参照可能なケースでパフォーマンスが落ちる可能性があります。</p></li>
</ul>
</li>
<li><p>重み付きベクターをJSON文字列としてロードできるようにしました。</p>
<ul>
<li><p>以下の例のように、重み付きベクターをJSON文字列としてロードできます。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>table_create Tags TABLE_PAT_KEY ShortText
table_create Data TABLE_NO_KEY
column_create Data tags COLUMN_VECTOR|WITH_WEIGHT Tags
column_create Tags data_tags COLUMN_INDEX|WITH_WEIGHT Data tags
load --table Data
[
  {&quot;tags&quot;: &quot;{\&quot;fruit\&quot;: 10, \&quot;apple\&quot;: 100}&quot;},
  {&quot;tags&quot;: &quot;{\&quot;fruit\&quot;: 200}&quot;}
]
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Float32</span></code> 型をサポートしました。</p>
<ul class="simple">
<li><p>Groongaは既に <code class="docutils literal notranslate"><span class="pre">Float</span></code> 型を持っていますが、これは、倍精度浮動小数点数です。したがって、単精度浮動小数点数のみを使う場合は、効率が悪いです。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Float32</span></code> 型を追加することで、より適切な型を選択できるようになりました。</p></li>
</ul>
</li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_unref(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code></p>
<ul>
<li><p>このAPIは参照カウントモードのときのみ使用します。(参照カウントモードとは、 <code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code> の状態のことです。)</p>
<ul>
<li><p>このAPIは、参照カウントモードの時のみ <code class="docutils literal notranslate"><span class="pre">grn_obj_unlink()</span></code> を呼び出します。参照カウントモード以外の時は、何もしません。</p></li>
<li><p>参照カウントモードの時のみ <code class="docutils literal notranslate"><span class="pre">grn_obj_unlink()</span></code> を呼び出す必要がある時に便利です。</p></li>
<li><p>以下の例のように、参照カウントモードかどうかの条件を書かなくて良くなるためです。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_unref()</span></code> を使用しない場合の例です。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if (grn_enable_reference_count) {
 grn_obj_unlink(ctx, obj);
}
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_ubref()</span></code> を使用する場合の例です。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>grn_obj_ubref(ctx, obj);
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_get_version_major(void)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_get_version_minor(void)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_get_version_micro(void)</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span></code> としてGroongaのメジャー、マイナー、マイクロバージョンを返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_record_id(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_section_id(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_position(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_tf(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight_float(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_rest(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p>
<ul class="simple">
<li><p>これらは、ポスティングリストの情報を返します。</p></li>
<li><p>これらのAPIは、 <code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight_float</span></code> 以外は、 <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code> として値を返します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight_float</span></code> は <code class="docutils literal notranslate"><span class="pre">float</span></code> として値を返します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_section_id(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p>
<ul>
<li><p>セクションIDとはカラム名の内部表現です。</p></li>
<li><p>カラム名を文字列としてポスティングリストに格納すると、情報量が多くなり無駄な容量を使います。</p></li>
<li><p>したがって、カラム名をセクションIDという数値としてポスティングリストに格納することで、情報量を圧縮し使用する容量を少なくしています。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_tf(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_tf</span></code> の <code class="docutils literal notranslate"><span class="pre">tf</span></code> とは、単語の出現頻度です。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight_float(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p>
<ul>
<li><p>トークンの重みを <code class="docutils literal notranslate"><span class="pre">float</span></code> として返します。</p></li>
<li><p>今後はトークンの重みを取得する際はこのAPIを使用することをおすすめします。</p>
<ul>
<li><p>近い将来、重みは内部的に <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code> から <code class="docutils literal notranslate"><span class="pre">float</span></code> に変更するためです。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id25">
<h3>修正<a class="headerlink" href="#id25" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>32bit GUN/Linux等でGroongaがクラッシュすることがある問題を修正しました。</p></li>
<li><p>関係のないカラムの値をクリアーしてしまう問題を修正しました。 [GitHub#1087][sutaminさんの報告]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dump</span></code> コマンドでレコードをダンプした時にメモリリークする問題を修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_columns</span></code> に無効な値を指定した時にメモリリークする問題を修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snippet</span></code> 関数を実行する時にメモリリークする問題を修正しました。</p></li>
<li><p>以下の条件を満たした時にメモリリークする問題を修正しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">initial</span></code> ステージで動的カラムを使用した場合。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドの引数 <code class="docutils literal notranslate"><span class="pre">slices</span></code> を使用した場合。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_table_remove</span></code> でテーブルを削除した際にメモリリークする問題を修正しました。</p></li>
<li><p>参照カウントモードを使用した時にメモリリークする問題を修正しました。</p>
<ul>
<li><p>参照カウントモードとは、 <code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code> の状態のことです。</p></li>
<li><p>この機能は実験的です。パフォーマンスが低下することがあります。</p></li>
</ul>
</li>
<li><p>Apache Arrow形式でデータをロードした際に <code class="docutils literal notranslate"><span class="pre">_key</span></code> アクセサーを解放しすぎる問題を修正しました。</p></li>
</ul>
</div>
<div class="section" id="id26">
<h3>感謝<a class="headerlink" href="#id26" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>sutaminさん</p></li>
<li><p>naoaさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-1-2020-03-30">
<span id="release-10-0-1"></span><h2>10.0.1リリース - 2020-03-30<a class="headerlink" href="#release-10-0-1-2020-03-30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Groonga 10.0.0 のUbuntuとWindows(VC++版)のパッケージに誤りがあったため Groonga 10.0.1 をリリースしました。</p>
<p>既にCentOS、Debian、Windows(MinGW版)のGroonga 10.0.0を使用している方は、そのまま使っていただいて問題ありません。</p>
<div class="section" id="id27">
<h3>修正<a class="headerlink" href="#id27" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Windows(VC++版)のパッケージに不足していたランタイム(vcruntime140_1.dll)を追加しました。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-0-2020-03-29">
<span id="release-10-0-0"></span><h2>10.0.0リリース - 2020-03-29<a class="headerlink" href="#release-10-0-0-2020-03-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id28">
<h3>改良<a class="headerlink" href="#id28" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[httpd] バンドルしているnginxのバージョンを1.17.9に更新しました。</p></li>
<li><p>[httpd] 出力形式を拡張子として指定できるようにしました。</p>
<ul class="simple">
<li><p>例えば、 <code class="docutils literal notranslate"><span class="pre">load?output_type=json</span></code> の代わりに <code class="docutils literal notranslate"><span class="pre">load.json</span></code> と書けます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">ログ</span></a>] Linuxのdumpレベルのログにオープンしたファイルとクローズしたファイルのパスを出力するようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">ログ</span></a>] Windowsのdebugレベルのログにオープンしたファイルとクローズしたファイルのパスを出力するようにしました。</p></li>
<li><p>以下のAPIとマクロを追加しました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_timeval_from_double(grn_ctx,</span> <span class="pre">double)</span></code></p>
<ul>
<li><p>このAPIは、 <code class="docutils literal notranslate"><span class="pre">double</span></code> 型を <code class="docutils literal notranslate"><span class="pre">grn_timeval</span></code> 型に変換します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_timeval</span></code> 型の値を返します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_TIMEVAL_TO_NSEC(timeval)</span></code></p>
<ul>
<li><p>このマクロは、 <code class="docutils literal notranslate"><span class="pre">grn_timeval</span></code> 型の値を <code class="docutils literal notranslate"><span class="pre">uint64_t</span></code> 型の値としてナノ秒に変換します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_TIME_USEC_TO_SEC(usec)</span></code></p>
<ul>
<li><p>このマクロは、ミリ秒を秒に変換します。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>以下のマクロを非推奨にしました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_OBJ_FORMAT_FIN(grn_ctx,</span> <span class="pre">grn_obj_format)</span></code></p>
<ul>
<li><p>10.0.0から代わりに <code class="docutils literal notranslate"><span class="pre">grn_obj_format_fin(grn_ctx,</span> <span class="pre">grn_obj_format)</span></code> を使ってください。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>],[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>]  ストリーム出力に対応しました。</p>
<ul>
<li><p>この機能は <code class="docutils literal notranslate"><span class="pre">command_version</span> <span class="pre">3</span></code> 以降で使えます。headerがbodyの後に出力されます。</p></li>
<li><p>現在、この機能をサポートしているのは、 <code class="docutils literal notranslate"><span class="pre">dump</span></code> と <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> のみです。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> は、 <code class="docutils literal notranslate"><span class="pre">command_version</span> <span class="pre">3</span></code> 以降では、常に出力がstreamとして返ります。</p></li>
<li><p>この機能は以下の制限があります。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">limit</span></code> に指定できる負の値は -1 のみです。</p></li>
<li><p>MessagePack形式の出力はサポートしていません。</p></li>
</ul>
</li>
<li><p>この変更で、JSONの応答内容を少し変更しています。</p>
<ul>
<li><p>以下のように以前のバージョンとは、キーの順序が異なっています。</p>
<ul>
<li><p>以前のバージョンのキーの順序</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
  &quot;header&quot;: {...},
  &quot;body&quot;: {...}
}
</pre></div>
</div>
</li>
<li><p>本バージョン(10.0.0)のキーの順序</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
  &quot;body&quot;: {...},
  &quot;header&quot;: {...}
}
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dump</span></code> と <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> を <code class="docutils literal notranslate"><span class="pre">command_version</span> <span class="pre">3</span></code> で実行した時はキャッシュが効きません。</p>
<ul class="simple">
<li><p>10.0.0から <code class="docutils literal notranslate"><span class="pre">dump</span></code> と <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> は <code class="docutils literal notranslate"><span class="pre">command_version</span> <span class="pre">3</span></code> の時にストリームで応答を返すので、応答全体をキャッシュできないためです。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Apache Arrow形式での応答をサポートしました。</p>
<ul class="simple">
<li><p>以下のデータ型をサポートしています。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">UInt8</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Int8</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UInt16</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Int16</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Int32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UInt64</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Int64</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Time</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ShortText</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Text</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LongText</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Vector</span></code> of <code class="docutils literal notranslate"><span class="pre">Int32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Reference</span> <span class="pre">vector</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Ubuntu 20.04 (Focal Fossa)をサポートしました。</p></li>
<li><p>Ubuntu 19.04 (Disco Dingo)のサポートをやめました。</p>
<ul class="simple">
<li><p>このバージョンはEOLになっているためです。</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-9-1-2-2020-01-29">
<span id="release-9-1-2"></span><h2>9.1.2リリース - 2020-01-29<a class="headerlink" href="#release-9-1-2-2020-01-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id29">
<h3>改良<a class="headerlink" href="#id29" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[tools] 指定したテーブルまたはカラムのファイルのみをコピーするスクリプトを追加しました。</p>
<ul>
<li><p>このスクリプトの名前は、copy-related-files.rbです。</p></li>
<li><p>このスクリプトは非常に大きいデータベースから指定したテーブルまたはカラムを抽出したい場合に便利です。</p></li>
<li><p>特定のテーブルまたはカラムに関連するファイルは、障害の再現に必要なことがあります。</p></li>
<li><p>データベースをまるごと提供するのが難しい場合は、このツールを使って対象のテーブルまたはカラムに関連するファイルを抽出できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/shutdown.html"><span class="doc">shutdown</span></a>] 全てのスレッドが使われている場合でも、 <code class="docutils literal notranslate"><span class="pre">/d/shutdown?mode=immediate</span></code> を即時受け付けるようにしました。</p>
<ul>
<li><p>この機能はGroonga HTTPサーバでのみ使えます。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code> を使うと、使用していないオブジェクトをすぐに開放します。</p>
<ul>
<li><p>この機能は実験的です。パフォーマンスが低下します。</p></li>
<li><p>多くのテーブルにまたがるデータをロードする際等にメモリーの使用量を一定量に保つ効果が期待できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] <code class="docutils literal notranslate"><span class="pre">groonga-release</span></code> パッケージをバージョンごとに用意しました。</p>
<ul>
<li><p>インストール方法に少し変更があるので注意してください。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Groongaのaptリポジトリーの追加に <code class="docutils literal notranslate"><span class="pre">groonga-archive-keyring</span></code> を使うようにしました。</p>
<ul>
<li><p>この改善によって、Groongaのaptリポジトリーを簡単に追加できます。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-archive-keyring</span></code> はGroongaのaptリポジトリーを使うための全ての情報が入っています。そのため、リポジトリー情報やPGPキーの変更を意識する必要がありません。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-archive-keyring</span></code> はdebパッケージなので、 <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">update</span></code> で簡単に更新できます。</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-9-1-1-2020-01-07">
<span id="release-9-1-1"></span><h2>9.1.1リリース - 2020-01-07<a class="headerlink" href="#release-9-1-1-2020-01-07" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id30">
<h3>改良<a class="headerlink" href="#id30" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Apache Arrow 形式のデータをサポートしました。</p>
<ul>
<li><p>Apache Arrow形式のデータを使うことで、パースのコストを削減でき、他のフォーマットより高速にデータをロードできる可能性があります。</p></li>
<li><p>この変更によって、他のデータ分析システムからApache Arrow形式のデータを直接Groongaへ入力することもできます。</p></li>
<li><p>Apache Arrow形式のフォーマットはHTTPインターフェイスでのみ使えます。コマンドラインインターフェイスでは使えません。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Apache Arrow 形式のロード方法をドキュメントに追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] エラーメッセージを改善しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">load</span></code> コマンドのレスポンスにエラーメッセージも含むようにしました。</p></li>
<li><p>この変更によって、データのロードに失敗した場合、 <code class="docutils literal notranslate"><span class="pre">load</span></code> コマンドのエラーの詳細を出力します。</p></li>
</ul>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.17.7に更新しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>] HTTPリクエストのbodyにコマンドのパラメータを指定できるようにしました。</p>
<ul>
<li><p>この場合、 <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> に <code class="docutils literal notranslate"><span class="pre">application/x-www-form-urlencoded</span></code> を指定しなければいけません。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>] HTTP POST の使用方法をドキュメントに追加しました。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-1-0-2019-11-29">
<span id="release-9-1-0"></span><h2>9.1.0リリース - 2019-11-29<a class="headerlink" href="#release-9-1-0-2019-11-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id31">
<h3>改良<a class="headerlink" href="#id31" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>&quot;&amp;&amp;&quot;演算のパフォーマンスを改善しました。</p>
<ul>
<li><p>例えば、以下のような条件式のパフォーマンスが向上します。</p></li>
<li><p>( A || B ) &amp;&amp; ( C || D ) &amp;&amp; ( E || F) ...</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers/token_mecab.html"><span class="doc">TokenMecab</span></a>] <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">use_base_form</span></code> オプションを追加しました。</p>
<ul>
<li><p>このオプションによってトークンの原型を使って検索できます。</p></li>
<li><p>例えば、このオプションを使って&quot;支えた&quot;を検索した場合、&quot;支える&quot;もヒットします。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id32">
<h3>修正<a class="headerlink" href="#id32" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>インデックスがアクセサーの際にパフォーマンスが低下する問題を修正しました。</p>
<ul>
<li><p>例えば、以下のような条件を含むクエリーで起こります。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">accessor</span> <span class="pre">&#64;</span> <span class="pre">query</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">accessor</span> <span class="pre">==</span> <span class="pre">query</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>バッファーが十分に大きい時に、検索結果の推定サイズがオーバーフローする問題を修正しました。 [PGroonga#GitHub#115][Albert Songさんの報告]</p></li>
<li><p>test(1)のポータビリティを改善しました。（おばたさんがパッチ提供）</p></li>
<li><p>不足しているツールを追加</p>
<ul>
<li><p>前のバージョンに <code class="docutils literal notranslate"><span class="pre">index-column-diff-all.sh</span></code> と <code class="docutils literal notranslate"><span class="pre">object-inspect-all.sh</span></code> がバンドルされていなかったためです。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id33">
<h3>感謝<a class="headerlink" href="#id33" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Albert Songさん</p></li>
<li><p>おばたさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-9-2019-10-30">
<span id="release-9-0-9"></span><h2>9.0.9リリース - 2019-10-30<a class="headerlink" href="#release-9-0-9-2019-10-30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>今回のバージョンからパフォーマンスが低下しているかもしれません。もし、以前よりパフォーマンスが低下していたら、是非、再現手順を報告してほしいです。</p>
</div>
<div class="section" id="id34">
<h3>改良<a class="headerlink" href="#id34" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">ログ</span></a>] 応答の送信時間をクエリーログに出力するように改良しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/status.html"><span class="doc">status</span></a>] <code class="docutils literal notranslate"><span class="pre">status</span></code> コマンドの応答に現在のジョブ数を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] <code class="docutils literal notranslate"><span class="pre">$request_time</span></code> をサポートしました。</p>
<ul>
<li><p>以前のバージョンでは、 <code class="docutils literal notranslate"><span class="pre">log_format</span></code> ディレクティブに <code class="docutils literal notranslate"><span class="pre">$request_time</span></code> を指定しても、<code class="docutils literal notranslate"><span class="pre">$request_time</span></code> の値は常に0でした。</p></li>
<li><p>今回のバージョンから、 <code class="docutils literal notranslate"><span class="pre">$request_time</span></code> を指定した場合、 groonga-httpd は正しい時間を出力します。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] <code class="docutils literal notranslate"><span class="pre">$request_time</span></code> の設定方法をドキュメントに追加しました。</p></li>
<li><p>Ubuntu 19.10(Eoan Ermine)をサポートしました。</p></li>
<li><p>CentOS 8をサポートしました。(実験的)</p>
<ul>
<li><p>CentOS 8向けのパッケージは開発用のパッケージが不足しているため、一部の機能が使えません。(例えば、 <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> が使えなかったり、JSON文字列からint32のベクターへのキャストが出来なかったりします。)</p></li>
</ul>
</li>
<li><p>[tools] <code class="docutils literal notranslate"><span class="pre">index_column_diff</span></code> コマンドを簡単に実行するスクリプトを追加しました。</p>
<ul>
<li><p>このスクリプトの名前は、index-column-diff-all.shです。</p></li>
<li><p>このスクリプトは、Groongaのデータベースからインデックスカラムを抽出し、抽出したインデックスカラムに対して <code class="docutils literal notranslate"><span class="pre">index_column_diff</span></code> を実行します。</p></li>
</ul>
</li>
<li><p>[tools] <code class="docutils literal notranslate"><span class="pre">object_inspect</span></code> コマンドを全てのオブジェクトに対して実行するスクリプトを追加しました。</p>
<ul>
<li><p>このスクリプトの名前は、object-inspect-all.shです。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id35">
<h3>修正<a class="headerlink" href="#id35" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>between の最初の引数として値を指定すると、Groongaがクラッシュする問題を修正しました。[GitHub#1045][yagisumiさんの報告]</p></li>
</ul>
</div>
<div class="section" id="id36">
<h3>感謝<a class="headerlink" href="#id36" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>yagisumiさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-8-2019-09-27">
<span id="release-9-0-8"></span><h2>9.0.8リリース - 2019-09-27<a class="headerlink" href="#release-9-0-8-2019-09-27" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id37">
<h3>改良<a class="headerlink" href="#id37" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/log_reopen.html"><span class="doc">log_reopen</span></a>] 2つ以上のワーカーで <code class="docutils literal notranslate"><span class="pre">groonga-httpd</span></code> を使用する場合の補足説明を追記しました。</p></li>
<li><p>作成中のインデックスを無視するように改良しました。</p>
<ul>
<li><p>インデックス構築中であっても、正しい検索結果を取得できます。</p></li>
<li><p>ただし、この場合、Groongaは検索にインデックスを使用しないため、検索は遅くなります。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] 対象のカラムのインデックスが作成中か、または、インデックスが無い時に <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> がシーケンシャルサーチを実行する機能を追加しました。</p>
<ul>
<li><p>以前のバージョンでは、上記の状態の場合、 <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> はエラーになりました。</p></li>
<li><p>今回のバージョンから、 上記の状態でも <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> は検索結果を返します。</p></li>
<li><p>ただし、上記の状態の場合、 <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> は、シーケンシャルサーチで実行されるため遅いです。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] CentOS 6の32-bitパッケージのサポートをやめました。</p></li>
</ul>
</div>
<div class="section" id="id38">
<h3>修正<a class="headerlink" href="#id38" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] レコードが十分にあるとき、かつフィルター条件にマッチしないレコードが推定値を超えた時に、同じオブジェクトを2回閉じるという例外が発生する問題を修正しました。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-7-2019-08-29">
<span id="release-9-0-7"></span><h2>9.0.7リリース - 2019-08-29<a class="headerlink" href="#release-9-0-7-2019-08-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id39">
<h3>改良<a class="headerlink" href="#id39" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[httpd] バンドルしているnginxのバージョンを1.17.3に更新しました。</p>
<ul>
<li><p>CVE-2019-9511、CVE-2019-9513、CVE-2019-9516のセキュリティの修正が含まれています。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id40">
<h3>修正<a class="headerlink" href="#id40" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>ポスティングリストが巨大になった時にGroongaがクラッシュする問題を修正しました。</p>
<ul>
<li><p>ただし、このバグは、一般的なデータでは殆ど発生しません。ポスティングリストは、一般的なデータでは、そこまで大きくならないためです。</p></li>
</ul>
</li>
<li><p>動的カラムのステージに <code class="docutils literal notranslate"><span class="pre">initial</span></code> を指定し、インデックスを使用した検索をすると空の結果を返す問題を修正しました。 [GitHub#683]</p></li>
<li><p>configure時にlibeditがインストールされているにもかかわらず、検知しない問題を修正しました。 [GitHub#1030][yuさんがパッチ提供]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--slices</span></code> と <code class="docutils literal notranslate"><span class="pre">--sort_keys</span></code> オプション使用時に <code class="docutils literal notranslate"><span class="pre">--offset</span></code> と <code class="docutils literal notranslate"><span class="pre">--limit</span></code> オプションが動作しない問題を修正しました。 [clear-code/redmine_full_text_search#70][a9zawaさんの報告]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドの結果が巨大な時、検索結果が空になる問題を修正しました。[groonga-dev,04770][Yutaro Shimamuraさんの報告]</p></li>
<li><p>前方一致検索や後方一致検索時に適切なインデックスを使わない問題を修正しました。[GitHub#1007, PGroonga#GitHub#96][oknjさんの報告]</p></li>
</ul>
</div>
<div class="section" id="id41">
<h3>感謝<a class="headerlink" href="#id41" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>oknjさん</p></li>
<li><p>Yutaro Shimamuraさん</p></li>
<li><p>yuさん</p></li>
<li><p>a9zawaさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-6-2019-08-05">
<span id="release-9-0-6"></span><h2>9.0.6リリース - 2019-08-05<a class="headerlink" href="#release-9-0-6-2019-08-05" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id42">
<h3>改良<a class="headerlink" href="#id42" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Debian 10 (buster)をサポートしました。</p></li>
</ul>
</div>
<div class="section" id="id43">
<h3>修正<a class="headerlink" href="#id43" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 検索エスカレーションが起こった際に検索がエラーになるバグを修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] ネストされた等価演算を使った際に、誤った検索結果を返すことがあるバグを修正しました。</p></li>
<li><p>[geo_distance_location_rectangle] <code class="docutils literal notranslate"><span class="pre">load</span></code> のフォーマットが誤っている例を修正しました。 [GitHub#1023] [yagisumiさんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="tutorial/micro_blog.html"><span class="doc">マイクロブログ検索システムの作成</span></a>] 検索結果が誤っている例を修正しました。[GitHub#1024][yagisumiさんがパッチ提供]</p></li>
</ul>
</div>
<div class="section" id="id44">
<h3>感謝<a class="headerlink" href="#id44" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>yagisumiさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-5-2019-07-30">
<span id="release-9-0-5"></span><h2>9.0.5リリース - 2019-07-30<a class="headerlink" href="#release-9-0-5-2019-07-30" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>このリリースには影響の大きい不具合があることがわかりました。<code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドが誤った結果を返します。この問題を修正し、9.0.6をリリースする予定です。Groonga 9.0.5は使わず、後日リリースされる9.0.6を使ってください。問題の詳細については <a class="reference external" href="http://groonga.org/ja/blog/2019/07/30/groonga-9.0.5.html">http://groonga.org/ja/blog/2019/07/30/groonga-9.0.5.html</a> で解説しています。</p>
</div>
<div class="section" id="id45">
<h3>改良<a class="headerlink" href="#id45" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] 検索対象のシャードが十分に大きい時にのみ最適化を適用するように改良しました。</p>
<ul>
<li><p>この機能は、ソートキーが同じ時にオフセット間で検索結果が重複するのを減らします。</p></li>
<li><p>十分に大きいのしきい値はデフォルトで10000レコードです。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">unify_to_katakana</span></code> を追加しました。</p>
<ul>
<li><p>このオプションは、平仮名を片仮名にノーマライズします。</p></li>
<li><p>例えば、 <code class="docutils literal notranslate"><span class="pre">ゔぁゔぃゔゔぇゔぉ</span></code> を <code class="docutils literal notranslate"><span class="pre">ヴァヴィヴヴェヴォ</span></code> にノーマライズします。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] slicesパラメーターでdrilldownsをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] slicesパラメーターでcolumnsをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] initialステージ内でslicesパラメーターが <code class="docutils literal notranslate"><span class="pre">_score</span></code> を参照できるよう改良しました。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>], [<a class="reference internal" href="reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] slicesパラメータ指定時に、slices実行前の式からもキーワードを抽出するように改良しました。</p></li>
<li><p>slicesパラメータ指定時に、slices実行前の式からもスコアーを収集するように改良しました。</p></li>
<li><p>ポスティングリストにポスティングを追加する際に自動的にスコアーを1増やすのをやめました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_ii_posting_add</span></code> は、この変更によって後方互換性がなくなりました。互換性を保つには、呼び出し側でスコアーを増やす必要があります。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">XXX.YYY.ZZZ</span> <span class="pre">==</span> <span class="pre">AAA</span></code> のようなネストされた等価演算のインデックス検索をサポートしました。</p></li>
<li><p>ハッシュテーブル使用時にハッシュの再構築の間隔を少なくしました。</p>
<ul>
<li><p>この昨日によって、結果出力のパフォーマンスが改善します。</p></li>
</ul>
</li>
<li><p>クエリーログにプレフィックスを追加できるようになりました。</p>
<ul>
<li><p>どの条件のフィルターなのかわかりやすくなります。</p></li>
</ul>
</li>
<li><p>Apache Arrow 1.0.0 をサポートしました。</p>
<ul>
<li><p>ただし、このバージョンはまだ、リリースされていません。</p></li>
</ul>
</li>
<li><p>Amazon Linux 2 をサポートしました。</p></li>
</ul>
</div>
<div class="section" id="id46">
<h3>修正<a class="headerlink" href="#id46" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;[1,</span> <span class="pre">2,</span> <span class="pre">3]&quot;</span></code> のようなJSONのベクター値がインデックスされないバグを修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">table_create</span></code> のテストのパラメーター名が誤っていたバグを修正しました。[GitHub#1000][yagisumiさんがパッチ提供]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">command_version=3</span></code> でdrilldownコマンドが実行された際に、ドリルダウンのラベルが空になるバグを修正しました。[GitHub#1001][yagisumiさんの報告]</p></li>
<li><p>MinGWでWindows版のパッケージのビルドが失敗するバグを修正しました。</p></li>
<li><p>MinGWのWindows版パッケージにCOPYINGがインストールされないバグを修正しました。</p></li>
<li><p>ハイライト対象として、クエリーにテキスト以外を指定した際に、キーワードがハイライトされないバグを修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] のMessagePack形式の出力が壊れるバグを修正しました。[GitHub#1009][yagisumiさんの報告]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_column_diff</span></code> のMessagePack形式の出力が壊れるバグを修正しました。[GitHub#1009][yagisumiさんの報告]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/suggest.html"><span class="doc">suggest</span></a>] のMessagePack形式の出力が壊れるバグを修正しました。[GitHub#1011][yagisumiさんの報告]</p></li>
<li><p>パトリシアトライのテーブルの検索時などにreallocのサイズが十分に確保されないバグを修正しました。[島津製作所さんの報告]</p>
<ul>
<li><p>Groongaはこのバグでクラッシュする可能性があります。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-release</span></code> version 1.5.0より前から1.5.0-1へアップデートした際に <code class="docutils literal notranslate"><span class="pre">groonga.repo</span></code> が削除されるバグを修正しました。[groonga-talk:429][Josep Sanzさんの報告]</p></li>
</ul>
</div>
<div class="section" id="id47">
<h3>感謝<a class="headerlink" href="#id47" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>yagisumiさん</p></li>
<li><p>島津製作所さん</p></li>
<li><p>Josep Sanzさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-4-2019-06-29">
<span id="release-9-0-4"></span><h2>9.0.4リリース - 2019-06-29<a class="headerlink" href="#release-9-0-4-2019-06-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id48">
<h3>改良<a class="headerlink" href="#id48" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>配列リテラルの複数要素をサポートしました。</p></li>
<li><p>ベクターの等価演算をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] 出力するクエリーログを追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> コマンドが、以下のタイミングでログを出力するようになります。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> によるフィルター後</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> によるソート後</p></li>
<li><p>動的カラム適用後</p></li>
<li><p>結果出力後</p></li>
</ul>
</li>
<li><p>この機能によって、このコマンドがどこまで完了したかを見ることができます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] <code class="docutils literal notranslate"><span class="pre">TokenPattern</span></code> の説明をドキュメントに追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] <code class="docutils literal notranslate"><span class="pre">TokenTable</span></code> の説明をドキュメントに追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> の説明をドキュメントに追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] groonga.logへの操作ログの出力を追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grndb</span></code> コマンドが実行結果と実行過程を出力するようになります。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] 空のファイルのチェックをサポートしました。</p>
<ul>
<li><p>この機能によって、空のファイルが存在するかどうかをチェックできます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">--since</span></code> を追加しました。</p>
<ul>
<li><p>検査の範囲を指定できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">--since</span></code> についてのドキュメントを追加しました。</p></li>
<li><p>RapidJSONをバンドルしました。</p>
<ul>
<li><p>部分的にGroongaのJSONパーサーとしてRapidJSONを使うことができます。(この機能はまだ部分的です。)</p></li>
<li><p>これを使うことでより厳格なJSONのパースができます。</p></li>
</ul>
</li>
<li><p>JSON文字列からint32のベクターへのキャストをサポートしました。</p>
<ul>
<li><p>この機能は、RapidJSONが必要です。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] <code class="docutils literal notranslate"><span class="pre">default_operator</span></code> を追加しました。</p>
<ul>
<li><p>&quot;keyword1 keyword2&quot;時の演算子をカスタマイズできます。</p></li>
<li><p>デフォルトでは、&quot;keyword1 keyword2&quot;はAND演算です。</p></li>
<li><p>&quot;keyword1 keyword2&quot;の演算子をAND以外に変更できます。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id49">
<h3>修正<a class="headerlink" href="#id49" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[optimizer] 複数のfilter条件と <code class="docutils literal notranslate"><span class="pre">xxx.yyy==&quot;keyword&quot;</span></code> のような条件を指定した際にエラーが発生するバグを修正しました。</p></li>
<li><p>GroongaのWindows用のパッケージ(VC++版)に不足していたライセンスファイルを追加しました。</p></li>
<li><p>GroongaのWindows用のパッケージ(VC++版)UCRTランタイムを追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/window_function.html"><span class="doc">ウィンドウ関数</span></a>] メモリリークを修正しました。</p>
<ul>
<li><p>これは、複数のウインドウに対してソートキーを適用した際に発生します。 [Takashi Hashidaさんがパッチ提供]</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id50">
<h3>感謝<a class="headerlink" href="#id50" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Takashi Hashidaさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-3-2019-05-29">
<span id="release-9-0-3"></span><h2>9.0.3リリース - 2019-05-29<a class="headerlink" href="#release-9-0-3-2019-05-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id51">
<h3>改良<a class="headerlink" href="#id51" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] より多くのクエリーログを追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドが、以下のタイミングでログを出力するようになります。</p>
<ul>
<li><p>ドリルダウンによるソート後</p></li>
<li><p>ドリルダウンによるフィルター後</p></li>
</ul>
</li>
<li><p>この機能によって、このコマンドがどこまで完了したかを見ることができます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] より多くのクエリーログを追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_select</span></code> コマンドが、以下のタイミングでログを出力するようになります。</p>
<ul>
<li><p>動的カラム作成後</p></li>
<li><p>ドリルダウンによるグループ化後</p></li>
<li><p>ドリルダウンによるソート後</p></li>
<li><p>ドリルダウンによるフィルター後</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_select</span></code> によるソート後</p></li>
</ul>
</li>
<li><p>この機能によって、このコマンドがどこまで完了したかを見ることができます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">limit</span></code> オプションを使用したときのソートのパフォーマンスを少し改善しました。</p></li>
<li><p>[index_column_diff] パフォーマンスを改善しました。</p>
<ul>
<li><p>このコマンドの実行速度を大幅に短くしました。</p></li>
</ul>
</li>
<li><p>[index_column_diff] 無効な参照を無視するように改良しました。</p></li>
<li><p>[index_column_diff] ベクター要素の重複に対応しました。</p></li>
<li><p>[Normalizers] Unicode 12.1 の NFKC（Normalization Form Compatibility Composition）をベースにしたノーマライザー <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC121</span></code> を追加しました。</p></li>
<li><p>[TokenFilters] Unicode 12.1 の NFKC（Normalization Form Compatibility Composition）をベースにしたトークンフィルター <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC121</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">--log-flags</span></code> を追加しました。</p>
<ul>
<li><p>groonga実行ファイルと同様、ログに出力する項目を指定できます。</p></li>
<li><p>サポートされているログフラグについては、[<a class="reference internal" href="reference/executables/groonga.html"><span class="doc">groonga 実行ファイル</span></a>] を参照してください。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] 検索にマッチしない時の戻り値を変更する新しいオプションを追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/plugin_unregister.html"><span class="doc">plugin_unregister</span></a>] Windowsのフルパスをサポートしました。</p></li>
<li><p>複数行のログメッセージをサポートしました。</p>
<ul>
<li><p>この機能によって、複数行に渡るログメッセージが見やすくなります。</p></li>
</ul>
</li>
<li><p>インデックスを使って検索した際、キーをGroongaのログに出力するようにしました。</p></li>
<li><p>[<a class="reference internal" href="tutorial/match_columns.html"><span class="doc">match_columnsパラメータ</span></a>] インデックスの重みのドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] <code class="docutils literal notranslate"><span class="pre">order</span></code> パラメータの説明を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] 新しい統計 <code class="docutils literal notranslate"><span class="pre">INDEX_COLUMN_VALUE_STATISTICS_NEXT_PHYSICAL_SEGMENT_ID</span></code> と <code class="docutils literal notranslate"><span class="pre">INDEX_COLUMN_VALUE_STATISTICS_N_PHYSICAL_SEGMENTS</span></code> の説明を追加しました。</p></li>
<li><p>Ubuntu 14.04 のサポートをやめました。</p></li>
</ul>
</div>
<div class="section" id="id52">
<h3>修正<a class="headerlink" href="#id52" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[index_column_diff] <code class="docutils literal notranslate"><span class="pre">remains</span></code> を多く報告するバグを修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--without-onigmo</span></code> オプションを使った際にビルドエラーになるバグを修正しました。[GitHub#951] [Tomohiro KATOさんが報告]</p></li>
<li><p>&quot;CVE: 2019-11675&quot;の脆弱性を修正しました。[Wolfgang Hotwagnerさんが報告]</p></li>
<li><p>Windows版のGroongaにて、拡張パスプレフィックス <code class="docutils literal notranslate"><span class="pre">\\?\</span></code> を削除しました。[GitHub#958] [yagisumiさんが報告]</p>
<ul>
<li><p>この拡張プレフィックスは、プラグインを正確に見つけられないというバグを引き起こします。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id53">
<h3>感謝<a class="headerlink" href="#id53" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Tomohiro KATOさん</p></li>
<li><p>Wolfgang Hotwagnerさん</p></li>
<li><p>yagisumiさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-2-2019-04-29">
<span id="release-9-0-2"></span><h2>9.0.2リリース - 2019-04-29<a class="headerlink" href="#release-9-0-2-2019-04-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>このリリースからVC++で作成したWindows版パッケージを提供します。</p>
<p>今までどおり、MinGWで作成したWindows版パッケージも提供しますが、近いうちにMinGWで作ったパッケージの代わりにVC++で作ったパッケージを提供する予定です。</p>
<div class="section" id="id54">
<h3>改良<a class="headerlink" href="#id54" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/column_create.html"><span class="doc">column_create</span></a>] 新しいフラグ <code class="docutils literal notranslate"><span class="pre">INDEX_LARGE</span></code> を追加しました。</p>
<ul>
<li><p>このフラグによって、デフォルトの2倍の領域を持つインデックスカラムを作成できます。</p></li>
<li><p>ただ、メモリ使用量も2倍となることに注意して下さい。</p></li>
<li><p>このフラグは、インデックス対象のデータが大きい時に有用です。</p></li>
<li><p>大きいデータとは、大量のレコード（通常は少なくとも1000万レコード以上）があり、少なくとも次のうちの1つ以上の特徴があります。</p>
<ul>
<li><p>インデックス対象が複数のカラム</p></li>
<li><p>インデックステーブルにトークナイザーが付いている</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] セグメントの新しい統計値 <code class="docutils literal notranslate"><span class="pre">next_physical_segment_id</span></code> と <code class="docutils literal notranslate"><span class="pre">max_n_physical_segments</span></code> を追加しました。</p>
<ul>
<li><p>この情報で、インデックスカラムの領域の使用量とインデックスカラムの領域の最大値を確認できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] シャードをまたがったウィンドウ関数をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] シャードをまたがったウインドウ関数をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] シャードをまたがったウインドウ関数をサポートしました。</p></li>
<li><p>このリリースからVC++で作成したWindows版パッケージを提供するようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">--recursive</span> <span class="pre">dependent</span></code> を追加しました。</p>
<ul>
<li><p>指定した書き出し対象オブジェクトとその子オブジェクトすべて、参照先のテーブル、インデックスが張られているカラムがある場合、対応するインデックスカラムとそのインデックスカラムのテーブルを書き出し対象オブジェクトにできます。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id55">
<h3>修正<a class="headerlink" href="#id55" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>一部の環境でコンパイルエラー &quot;unknown type name 'bool'&quot; が発生する問題を修正しました。</p></li>
<li><p>mrubyを経由して実行するコマンド(例えば、 <code class="docutils literal notranslate"><span class="pre">logical_select</span></code>、 <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code>、 <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> 等)で、Int32を超える数を正しく出力できない問題を修正しました。[GitHub#936] [HashidaTKSさんがパッチ提供]</p></li>
</ul>
</div>
<div class="section" id="id56">
<h3>感謝<a class="headerlink" href="#id56" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>HashidaTKSさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-1-2019-03-29">
<span id="release-9-0-1"></span><h2>9.0.1リリース - 2019-03-29<a class="headerlink" href="#release-9-0-1-2019-03-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id57">
<h3>改良<a class="headerlink" href="#id57" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>ベクターの値にnullが使えるようになりました。</p>
<ul>
<li><p><cite>select ... --columns[vector].flags COLUMN_VECTOR --columns[vector].value &quot;null&quot;</cite> のように使用できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] ドキュメントを英語に翻訳しました。</p></li>
<li><p>無効なインデックスのチェックとログへの記録を強化しました。インデックス関連のバグを発見するのに役立ちます。</p></li>
<li><p><a class="reference internal" href="#release-8-0-6"><span class="std std-ref">8.0.6リリース - 2018-08-29</span></a> の <code class="docutils literal notranslate"><span class="pre">GRN_TABLE_SELECT_ENOUGH_FILTERED_RATIO</span></code> の説明を改善しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 新しい引数 <code class="docutils literal notranslate"><span class="pre">--load_table</span></code> 、<code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> 、 <code class="docutils literal notranslate"><span class="pre">--load_values</span></code> を追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code> の結果を <code class="docutils literal notranslate"><span class="pre">--load_table</span></code> で指定したテーブルへ格納できます。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_values</span></code> オプションは、<code class="docutils literal notranslate"><span class="pre">select</span></code> の結果のカラムを指定します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> オプションは、<code class="docutils literal notranslate"><span class="pre">--load_table</span></code> で指定したテーブルのカラムを指定します。</p></li>
<li><p>このようにして、<code class="docutils literal notranslate"><span class="pre">--load_values</span></code> で指定したカラムの値を、 <code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> で指定したカラムへ格納できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 新しい引数 <code class="docutils literal notranslate"><span class="pre">--load_table</span></code> 、<code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> 、 <code class="docutils literal notranslate"><span class="pre">--load_values</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] ロード先のテーブルをクエリーログに表示するようにしました。</p>
<ul>
<li><p>以下のように、ロード先のテーブル名は <code class="docutils literal notranslate"><span class="pre">[]</span></code> 内の文字列として表示します　。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:000000000000000</span> <span class="pre">load(3):</span> <span class="pre">[LoadedLogs][3]</span></code></p></li>
</ul>
</li>
<li><p>以下のAPIを追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_ii_get_flags()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_index_column_diff()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_memory_get_usage()</span></code></p></li>
</ul>
</li>
<li><p>壊れたインデックスをチェックするためのコマンド <code class="docutils literal notranslate"><span class="pre">index_column_diff</span></code> を追加しました。コマンド実行の進捗を記録したい場合は、ログレベルをdebugに設定してください。</p></li>
</ul>
</div>
<div class="section" id="id58">
<h3>修正<a class="headerlink" href="#id58" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] 一致しない場合、空のベクターを返すよう変更しました。</p>
<ul>
<li><p>そのような場合、 <code class="docutils literal notranslate"><span class="pre">null</span></code> の代わりに空のベクター <code class="docutils literal notranslate"><span class="pre">[]</span></code> が返されます。</p></li>
</ul>
</li>
<li><p>スレッドカウントがオーバフローする可能性についての警告を修正しました。実運用では、膨大な数のスレッドが使用されていないため、ユーザーに影響はありません。[GitHub#904]</p></li>
<li><p>maxOSでのビルドエラーを修正しました。 [GitHub#909] [shiro615さんが報告]</p></li>
<li><p>ストップワードの処理のバグを修正しました。</p>
<ul>
<li><p>このバグは、クエリーの最初のトークンをストップワードとして設定すると発生します。</p></li>
<li><p>このバグが発生した場合、検索クエリーはヒットしません。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/api/global_configurations.html"><span class="doc">全体設定</span></a>] <code class="docutils literal notranslate"><span class="pre">grn_lock_set_timeout</span></code> のパラメーター名の誤字を修正しました。</p></li>
<li><p>インデックスの破損によって、削除されたレコードがマッチするバグを修正しました。</p>
<ul>
<li><p>大量のレコードを追加または、削除した時に発生することがあります。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> がレコードを返さない場合のメモリリークを修正しました。[GitHub#911] [HashidaTKSさんがパッチ提供]</p></li>
<li><p>ロードしているデータが正しくノーマライズされないことによってクエリーにマッチしないバグを修正しました。[PGroonga#GitHub#93, GitHub#912,GitHub#913] [kamicupさんとdodaisukeさんが報告]</p>
<ul>
<li><p>このバグは、カタカナの後ろに空白のあるデータをロードし、ノーマライザーに <code class="docutils literal notranslate"><span class="pre">unify_kana</span></code> オプションが使用された時に発生します。</p></li>
</ul>
</li>
<li><p>インデックスの更新中にインデックスが破損するバグを修正しました。</p>
<ul>
<li><p>長期間、大量のレコードの追加、削除を繰り返した時に発生することがあります。</p></li>
</ul>
</li>
<li><p>インデックス更新時に十分な作業領域を確保できずにクラッシュするバクを修正しました。</p></li>
</ul>
</div>
<div class="section" id="id59">
<h3>感謝<a class="headerlink" href="#id59" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>shiro615さん</p></li>
<li><p>HashidaTKSさん</p></li>
<li><p>kamicupさん</p></li>
<li><p>dodaisukeさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-0-2019-02-09">
<span id="release-9-0-0"></span><h2>9.0.0リリース - 2019-02-09<a class="headerlink" href="#release-9-0-0-2019-02-09" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>メジャーバージョンアップです! メジャーバージョンアップですが、互換性は壊れていないので、データベースを再構築することなく9.0.0へアップグレードできます。</p>
<div class="section" id="id60">
<h3>改良<a class="headerlink" href="#id60" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] 新しいトークナイザー <code class="docutils literal notranslate"><span class="pre">TokenPattern</span></code> を追加しました。</p>
<ul>
<li><p>正規表現を使ってトークンを抽出できます。</p>
<ul>
<li><p>このトークナイザーは正規表現にマッチしたトークンのみを抽出します。</p></li>
</ul>
</li>
<li><p>正規表現のパターンは複数指定できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] 新しいトークナイザー <code class="docutils literal notranslate"><span class="pre">TokenTable</span></code> を追加しました。</p>
<ul>
<li><p>既存のテーブルのカラムの値を使ってトークンを抽出できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] バイナリデータのダンプに対応しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] インデックスカラムに対する類似文書検索をサポートしました。</p>
<ul>
<li><p>マルチカラムインデックスを使用している場合、この機能を使って、全てのソースカラムに対して類似文書検索ができます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">remove_blank</span></code> を追加しました。</p>
<ul>
<li><p>このオプションは空白を取り除きます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga.html"><span class="doc">groonga 実行ファイル</span></a>] ログ内のThreadIDの表示を改善しました。</p>
<ul>
<li><p>Windows版では、ProcessIDとThreadIDを混同しやすかったので、どちらがThreadIDでどちらがProcessIDかを明確にしました。</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-8-1-1-2019-01-29">
<span id="release-8-1-1"></span><h2>8.1.1リリース - 2019-01-29<a class="headerlink" href="#release-8-1-1-2019-01-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id61">
<h3>改良<a class="headerlink" href="#id61" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 新しい引数 <code class="docutils literal notranslate"><span class="pre">--load_table</span></code> 、<code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> 、 <code class="docutils literal notranslate"><span class="pre">--load_values</span></code> を追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_select</span></code> の結果を <code class="docutils literal notranslate"><span class="pre">--load_table</span></code> で指定したテーブルへ格納できます。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_values</span></code> オプションは、<code class="docutils literal notranslate"><span class="pre">logical_select</span></code> の結果のカラムを指定します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> オプションは、<code class="docutils literal notranslate"><span class="pre">--load_table</span></code> で指定したテーブルのカラムを指定します。</p></li>
<li><p>このようにして、<code class="docutils literal notranslate"><span class="pre">--load_values</span></code> で指定したカラムの値を、 <code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> で指定したカラムへ格納できます。</p></li>
</ul>
</li>
<li><p>インデックスの更新エラー時のログを改善しました。</p>
<ul>
<li><p>ログに、より詳細な情報を追加しました。</p>
<ul>
<li><p>例えば、ポスティングリストのマージに失敗した時にマージ元のバッファーとチャンクを出力します。</p></li>
<li><p>また、バッファー確保のエラーが発生した時は、バッファーの空き領域と要求サイズをログに出力します。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga.html"><span class="doc">groonga 実行ファイル</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">--log-flags</span></code> を追加しました。</p>
<ul>
<li><p>Groongaのログに出力する項目を指定できます。</p></li>
<li><p>以下のような項目を出力できます。</p>
<ul>
<li><p>タイムスタンプ</p></li>
<li><p>ログメッセージ</p></li>
<li><p>ロケーション(ログが出力された場所)</p></li>
<li><p>プロセスID</p></li>
<li><p>スレッドID</p></li>
</ul>
</li>
<li><p>以下のように接頭辞を指定できます。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p>
<ul>
<li><p>この接頭辞は、 &quot;フラグを追加する&quot;という意味です。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p>
<ul>
<li><p>この接頭辞は、&quot;フラグを削除する&quot;という意味です。</p></li>
</ul>
</li>
<li><p>接頭辞無しは、&quot;存在しているフラグを置き換える&quot;という意味です。</p></li>
</ul>
</li>
<li><p>具体的には、以下のようにフラグ指定できます。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code></p>
<ul>
<li><p>ログに何も出力しません。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code></p>
<ul>
<li><p>ログにタイムスタンプを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code></p>
<ul>
<li><p>ログにメッセージを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code></p>
<ul>
<li><p>ログの出力場所(ファイル名、行数、関数名)とプロセスIDを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">process_id</span></code></p>
<ul>
<li><p>ログにプロセスIDを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pid</span></code></p>
<ul>
<li><p>このフラグは、 <code class="docutils literal notranslate"><span class="pre">process_id</span></code> のエイリアスです。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">thread_id</span></code></p>
<ul>
<li><p>ログにスレッドIDを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p>
<ul>
<li><p>このフラグは、 <code class="docutils literal notranslate"><span class="pre">none</span></code> と <code class="docutils literal notranslate"><span class="pre">default</span></code> 以外の全てのフラグを指定します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p>
<ul>
<li><p>ログに、タイムスタンプとログメッセージを出力します。</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">|</span></code> を使って、複数のフラグを指定することもできます。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id62">
<h3>修正<a class="headerlink" href="#id62" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>インデックスの更新エラー発生時にメモリリークする問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] ステートレスなノーマライザーとステートフルなノーマライザーを同時に使用した時に、それらが誤った結果を返すバグを修正しました。</p>
<blockquote>
<div><ul class="simple">
<li><p>ステートレスなノーマライザーとは以下です。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_voiced_sound_mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_prolonged_sound_mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen_and_prolonged_sound_mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_middle_dot</span></code></p></li>
</ul>
</li>
<li><p>ステートフルなノーマライザーとは以下です。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_bu_sound</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_to_romaji</span></code></p></li>
</ul>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="release-8-1-0-2018-12-29">
<span id="release-8-1-0"></span><h2>8.1.0リリース - 2018-12-29<a class="headerlink" href="#release-8-1-0-2018-12-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id63">
<h3>改良<a class="headerlink" href="#id63" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.8に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id64">
<h3>修正<a class="headerlink" href="#id64" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io_flush</span></code> コマンド実行後に、DBに対するアンロックが常にフラッシュの実行後になってしまうバグを修正しました。</p></li>
<li><p>参照先を持たないレコードを持つテーブルに対して <code class="docutils literal notranslate"><span class="pre">reindex</span></code> コマンドを実行した際に、 <code class="docutils literal notranslate"><span class="pre">reindex</span></code> コマンドが終了しないバグを修正しました。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-9-2018-11-29">
<span id="release-8-0-9"></span><h2>8.0.9リリース - 2018-11-29<a class="headerlink" href="#release-8-0-9-2018-11-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id65">
<h3>改良<a class="headerlink" href="#id65" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] トークナイザーの作成に失敗した際のエラーメッセージにトークナイザーの名前を出力するよう改良。</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenDelimit] トークンの区切り文字のカスタマイズをサポートしました。</p>
<ul>
<li><p>空白以外のトークンを区切り文字に使えます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenDelimit] 新しいオプション <code class="docutils literal notranslate"><span class="pre">pattern</span></code> を追加しました。</p>
<ul>
<li><p>このオプションにより、区切り文字にに正規表現を指定できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] 各トークンの情報に <code class="docutils literal notranslate"><span class="pre">force_prefix_search</span></code> の値を追加しました。</p>
<ul>
<li><p>&quot;force_prefix&quot; は後方互換のため残しています。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">トークンフィルター</span></a>] ビルトインのトークンフィルタ <code class="docutils literal notranslate"><span class="pre">TokenFilterNFKC100</span></code> を追加しました。</p>
<ul>
<li><p>NormalizerNFKC100のように <code class="docutils literal notranslate"><span class="pre">unify_kana</span></code> オプションで、カタカナをひらがなへ変換できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">トークンフィルター</span></a>][TokenFilterStem] 新しオプション <code class="docutils literal notranslate"><span class="pre">algorithm</span></code> を追加しました。</p>
<ul>
<li><p>このオプションによって、英語以外の言語(フランス語、スペイン語、ポルトガル語、イタリア語、ルーマニア語、ドイツ語、オランダ語、スウェーデン語、ノルウェー語、デンマーク語、ロシア語、フィンランド語)をステミングできます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">トークンフィルター</span></a>][TokenFilterStopWord] 新しいオプション <code class="docutils literal notranslate"><span class="pre">column</span></code> を追加しました</p>
<ul>
<li><p>このオプションによって、is_stop_word以外のカラムをスットプワードに指定できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] トークンフィルターのオプションの出力をサポートしました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> 等のようなオプションを持つトークナイザーを指定した場合、それらのオプションも <code class="docutils literal notranslate"><span class="pre">table_list</span></code> コマンドで出力できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/truncate.html"><span class="doc">truncate</span></a>] トークンフィルターのオプションを持ったテーブルをサポートしました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenStopWord</span></code> 等のようなオプションを持つトークナイザーを持つテーブルでも <code class="docutils literal notranslate"><span class="pre">truncate</span></code> できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/schema.html"><span class="doc">schema</span></a>] トークンフィルターのオプションの出力をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">unify_to_romaji</span></code> を追加しました。</p>
<ul>
<li><p>このオプションによって、ひらがなとカタカナをローマ字に正規化できます。</p></li>
</ul>
</li>
<li><p>[query-log][show-condition] &quot;func() &gt; 0&quot;をサポートしました。</p></li>
<li><p>[Windows] アンマップ前のフラッシュを確実にするよう改善しました。</p></li>
<li><p>ファイル入力のエラーメッセージを改善しました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.7に更新しました。</p>
<ul>
<li><p>CVE-2018-16843とCVE-2018-16844のセキュリティの修正が含まれています。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id66">
<h3>修正<a class="headerlink" href="#id66" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>ウインドウ関数を評価する際にメモリリークする問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] ログの内容が混在することがあるバグを修正しました。</p></li>
<li><p>output_columnsのスライスのエラーが発生した際に、無効なJSONが生成されるバグを修正しました。</p></li>
<li><p>ネストして参照されているベクターカラムの値を取得する際にメモリリークする問題を修正しました。</p></li>
<li><p>インデックス破損を警告するログを出力する際にクラッシュするバグを修正しました。</p></li>
<li><p>式の評価で一時的なベクターが再利用された時にクラッシュするバグを修正しました。</p>
<ul class="simple">
<li><p>例えば、以下のようにベクターを使った式を評価する時にクラッシュします。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">_score</span> <span class="pre">=</span> <span class="pre">_score</span> <span class="pre">+</span> <span class="pre">(vector_size(categories)</span> <span class="pre">&gt;</span> <span class="pre">0)</span></code></p>
</li>
<li><p>deleteコマンドで削除したベクターカラムの値がヒットするバグを修正しました。[dodaisukeさんの報告]</p></li>
</ul>
</div>
<div class="section" id="id67">
<h3>感謝<a class="headerlink" href="#id67" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>dodaisukeさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-8-2018-10-29">
<span id="release-8-0-8"></span><h2>8.0.8リリース - 2018-10-29<a class="headerlink" href="#release-8-0-8-2018-10-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id68">
<h3>改良<a class="headerlink" href="#id68" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/table_list.html"><span class="doc">table_list</span></a>] デフォルトトークナイザーのオプションをサポートしました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> 等のようなオプションを持つトークナイザーを指定した場合、それらのオプションも <code class="docutils literal notranslate"><span class="pre">table_list</span></code> コマンドで出力できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">record</span> <span class="pre">&#64;</span> <span class="pre">'query'</span></code> を使ったシーケンシャルマッチでノーマライザーのオプションをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/truncate.html"><span class="doc">truncate</span></a>] トークナイザーのオプションを持ったテーブルをサポートしました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> 等のようなオプションを持つトークナイザーを持つテーブルでも <code class="docutils literal notranslate"><span class="pre">truncate</span></code> できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenMecab] <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">target_class</span></code> オプションを追加しました。</p>
<ul>
<li><p>このオプションは、指定した品詞のトークンを検索します。例えば、名詞のみを検索することができます。</p></li>
<li><p>このオプションは、以下のようにサブクラスを指定することや、 <code class="docutils literal notranslate"><span class="pre">+</span></code> や <code class="docutils literal notranslate"><span class="pre">-</span></code> を使って、特定の品詞を追加または除外することもできます。したがって、以下のように代名詞を除外して検索することもできます。</p>
<p><code class="docutils literal notranslate"><span class="pre">'TokenMecab(&quot;target_class&quot;,</span> <span class="pre">&quot;-名詞/代名詞&quot;,</span> <span class="pre">&quot;target_class&quot;,</span> <span class="pre">&quot;+&quot;)'</span></code></p>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] <code class="docutils literal notranslate"><span class="pre">io_flush</span></code> 中のデータベースのロックをサポートしました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io_flush</span></code> 実行中に <code class="docutils literal notranslate"><span class="pre">io_flush</span></code> 対象のテーブルを削除するとGroongaがクラッシュする問題があったためです。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/cast_loose.html"><span class="doc">cast_loose</span></a>] 新しい関数 <code class="docutils literal notranslate"><span class="pre">cast_loose()</span></code> を追加しました。</p>
<ul class="simple">
<li><p>この関数は、指定した型へキャストします。もし、指定した値がキャストできない場合、値は、指定したデフォルト値になります。</p></li>
</ul>
</li>
<li><p>条件式の評価順序の最適化を追加しました。(実験的)</p>
<ul>
<li><p>以下のように環境変数を設定することでこの機能を有効にできます。</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_EXPR_OPTIMIZE=yes</span></code></p>
</li>
</ul>
</li>
<li><p>インデックス検索可能な正規表現に <code class="docutils literal notranslate"><span class="pre">(?-mix:XXX)</span></code> 記法をサポートしました。 [groonga-dev,04683][ Masatoshi SEKIさんの報告]</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(?-mix:XXX)</span></code> は XXX と同じ扱いです。</p></li>
</ul>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.5に更新しました。</p></li>
<li><p>Ubuntu 18.10 (Cosmic Cuttlefish)をサポートしました。</p></li>
</ul>
</div>
<div class="section" id="id69">
<h3>修正<a class="headerlink" href="#id69" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Groonga GQTP サーバーが新しい接続を受け付けなくなることがあるバグを修正しました。[groonga-dev,04688][Yutaro Shimamuraさんの報告]</p>
<ul>
<li><p>quitを使わずにクライアントプロセスを中断した時に発生します。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id70">
<h3>感謝<a class="headerlink" href="#id70" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Masatoshi SEKIさん</p></li>
<li><p>Yutaro Shimamuraさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-7-2018-09-29">
<span id="release-8-0-7"></span><h2>8.0.7リリース - 2018-09-29<a class="headerlink" href="#release-8-0-7-2018-09-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id71">
<h3>改良<a class="headerlink" href="#id71" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenMecab] Mecabのメタデータの出力をサポートしました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">include_class</span></code> オプションを追加しました。</p>
<p>このオプションは、Mecabのメタデータの <code class="docutils literal notranslate"><span class="pre">class</span></code> と <code class="docutils literal notranslate"><span class="pre">subclass</span></code> を出力します。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">include_reading</span></code> オプションを追加しました。</p>
<p>このオプションは、Mecabのメタデータの <code class="docutils literal notranslate"><span class="pre">reading</span></code> を出力します。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">include_form</span></code> オプションを追加しました。</p>
<p>このオプションは、Mecabのメタデータの <code class="docutils literal notranslate"><span class="pre">inflected_type</span></code> と <code class="docutils literal notranslate"><span class="pre">inflected_form</span></code> 、 <code class="docutils literal notranslate"><span class="pre">base_form</span></code> を出力します。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">use_reading</span></code> オプションを追加しました。</p>
<p>このオプションは、読みがなによる検索をサポートします。</p>
<p>このオプションは、読みがなを使った検索をするため、表記ゆれの対策として有用です。</p>
</li>
</ul>
</li>
<li><p>[plugin] 複数のディレクトリからプラグインを取得できるようになりました。</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_PLUGINS_PATH</span></code> に複数のディレクトリを指定できます。Windowsの場合は、&quot;:&quot;でWindows以外では、&quot;;&quot;で区切ります。</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_PLUGINS_PATH</span></code> は、 <code class="docutils literal notranslate"><span class="pre">GRN_PLUGINS_DIR</span></code> より優先度が高いです。現状、このオプションはWindowsではサポートされていません。</p>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram] <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> に <code class="docutils literal notranslate"><span class="pre">unify_alphabet</span></code> オプションを追加しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">unify_alphabet</span></code> を <code class="docutils literal notranslate"><span class="pre">false</span></code> として使うと、 <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> はASCII文字のトークナイズ方法にバイグラムを使います。</p>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram] <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> に <code class="docutils literal notranslate"><span class="pre">unify_symbol</span></code> オプションを追加しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">TokenNgram(&quot;unify_symbol&quot;,</span> <span class="pre">false)</span></code> は、 <code class="docutils literal notranslate"><span class="pre">TokenBigramSplitSymbol</span></code> と同じ動作です。</p>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram] <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> に <code class="docutils literal notranslate"><span class="pre">unify_digit</span></code> オプションを追加しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">unify_digit</span></code> を <code class="docutils literal notranslate"><span class="pre">false</span></code> として使うと、 <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> は数字のトークナイズ方法にバイグラムを使います。</p>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.4に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id72">
<h3>修正<a class="headerlink" href="#id72" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>いくつかのケースでの誤ったスコア計算を修正しました。</p>
<ul>
<li><p>ブール値に数値を加算、乗算または除算するときに発生します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">！=</span></code> や <code class="docutils literal notranslate"><span class="pre">==</span></code> を使ってスカラーとベクトルの列を比較するときに発生します。</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-6-2018-08-29">
<span id="release-8-0-6"></span><h2>8.0.6リリース - 2018-08-29<a class="headerlink" href="#release-8-0-6-2018-08-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id73">
<h3>改良<a class="headerlink" href="#id73" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenMecab] <code class="docutils literal notranslate"><span class="pre">chunked_tokenize</span></code> と <code class="docutils literal notranslate"><span class="pre">chunk_size_threshold</span></code> の両オプションに対応しました。</p></li>
<li><p>[optimizer] query family expressionの推定に対応しました。<code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">&#64;</span> <span class="pre">query</span></code> や <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">&#64;~</span> <span class="pre">pattern</span></code> のようなquery family expressionについて、より効果的な実行計画を立てられます。</p></li>
<li><p>[optimizer] オプティマイザをプラグインから組み込みの機能に変更し、初期状態で無効としました。環境変数を <code class="docutils literal notranslate"><span class="pre">GRN_EXPR_OPTIMIZE=yes</span></code> と定義するか、従来通りに <code class="docutils literal notranslate"><span class="pre">expression_rewriters</span></code> テーブルを使う事で機能を有効化できます。</p></li>
<li><p>充分に絞り込み済みの場合において、初期状態でシーケンシャルサーチを行うようにしました。現在の結果が充分に少数である場合、シーケンシャルサーチはインデックス検索よりも高速です。現在の結果がテーブル内の全レコードの1%で1000件未満の場合、インデックス検索可能な場合であってもシーケンシャルサーチが使われます。</p>
<p>現在、この最適化は、 <code class="docutils literal notranslate"><span class="pre">==</span></code> と <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> と <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> と <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> と <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> を使った検索時に適用されます。</p>
<p>絞り込みに指定したカラムを持つテーブルのキーが <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> の場合、この最適化を適用するためには、そのテーブルのノーマライザーを <code class="docutils literal notranslate"><span class="pre">NormalizerAuto</span></code> にする必要があります。</p>
<p>この機能は環境変数で <code class="docutils literal notranslate"><span class="pre">GRN_TABLE_SELECT_ENOUGH_FILTERED_RATIO=0.0</span></code> と設定する事で無効化できます。</p>
</li>
<li><p>[load] エラーメッセージにテーブル名を含めるようにしました。</p></li>
<li><p>[load] <code class="docutils literal notranslate"><span class="pre">lock_table</span></code> オプションを追加しました。<code class="docutils literal notranslate"><span class="pre">--lock_table</span> <span class="pre">yes</span></code> が指定された場合、カラムの更新と <code class="docutils literal notranslate"><span class="pre">--each</span></code> の適用を行っている間、<code class="docutils literal notranslate"><span class="pre">load</span></code> は対象のテーブルをロックします。このオプションは <code class="docutils literal notranslate"><span class="pre">load</span></code> と <code class="docutils literal notranslate"><span class="pre">delete</span></code> の衝突を防ぎますが、読み込みの性能を低下させるでしょう。</p></li>
<li><p>[vector_find] サポートされていないモードでクラッシュしないようにしました。</p></li>
</ul>
</div>
<div class="section" id="id74">
<h3>修正<a class="headerlink" href="#id74" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[index] <code class="docutils literal notranslate"><span class="pre">HASH_KEY</span></code> を伴ったテキストのベクターに対するオフラインでのインデックス構築に関して、誤ったセクションIDを持つインデックスが構築されてしまうバグを修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">'index[0]</span> <span class="pre">||</span> <span class="pre">index[9]'</span></code> が誤ったセクションを使用してしまう問題を修正しました。</p></li>
<li><p>[highlighter] 語彙表がハッシュテーブルで、且つキーワードがN-gramのNよりも少ない文字数の場合に、誤ったハイライトが行われていた問題を修正しました。</p></li>
<li><p>[mruby] 本当のエラーが隠されていた問題を修正しました。mrubyは引数無しで投げられたエラーの伝搬に対応していません。<a class="reference external" href="https://github.com/mruby/mruby/issues/290">https://github.com/mruby/mruby/issues/290</a></p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram loose]: クエリが曖昧な種類のみであった場合に検索結果が見つからない問題を修正しました。語彙表を伴っての <code class="docutils literal notranslate"><span class="pre">highlight_html()</span></code> も同様に壊れていました。</p></li>
<li><p>テキストから数値への変換において、後続するゴミ部分が無視されていた問題を修正しました。 &quot;0garbage&quot; は変換エラーになります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reference_column</span> <span class="pre">&gt;=</span> <span class="pre">'key_value'</span></code> に当てはまる場合の最適化の問題を修正しました。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-5-2018-07-29">
<span id="release-8-0-5"></span><h2>8.0.5リリース - 2018-07-29<a class="headerlink" href="#release-8-0-5-2018-07-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id75">
<h3>改良<a class="headerlink" href="#id75" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/grn_expr/script_syntax.html"><span class="doc">スクリプト構文</span></a>] 類似文書検索の補足説明とその日本語訳を追加しました。 [GitHub groonga/GitHub#858] [堀本さんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="reference/functions/time_classify_day_of_week.html"><span class="doc">time_classify_day_of_week</span></a>] 新しい関数 <code class="docutils literal notranslate"><span class="pre">time_classify_day_of_week()</span></code> を追加しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-fstack-protector</span></code> で警告を抑制するようにしました。（OBATA Akioさんが提案）</p></li>
<li><p>新しいAPI <code class="docutils literal notranslate"><span class="pre">time_format_iso8601()</span></code> を追加しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_raw_string</span></code> 構造体を公開。</p></li>
<li><p>新しいAPI: <code class="docutils literal notranslate"><span class="pre">grn_obj_clear_option_values()</span></code> を追加しました。永続的なデータベースのremoveと一時的なデータベースのcloseの際にオプションの値を消去できます。</p></li>
<li><p>[log] <code class="docutils literal notranslate"><span class="pre">[ii][update][one]</span></code> のエラーメッセージにインデックスカラム名を出力するようにしました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.2に更新しました。</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 17.10 (Artful Aardvark）のサポートをやめました。2018年7月19日でサポートが切れた（EOLになった）ためです。</p></li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] jessieのサポートをやめました。Debianのセキュリティ＆リリースチームはもはやjessieの更新を提供しません。</p></li>
</ul>
</div>
<div class="section" id="id76">
<h3>修正<a class="headerlink" href="#id76" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>POSTでの <code class="docutils literal notranslate"><span class="pre">/d/load</span></code> へのデータ送信が中断された後に誤った結果が返されていたのを修正しました。</p></li>
<li><p>KyTeaに関する間違った関数呼び出しを修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] <code class="docutils literal notranslate"><span class="pre">--force-truncate</span></code> オプションのラベルを追加しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-normalizer-mysql</span></code> のようにプラグインとして提供されているノーマライザーでオプションを使った場合に、データベースを終了するときにクラッシュする問題を修正しました。</p></li>
<li><p>ノーマライザーとトークナイザーのオプションが無視される場合があった問題を修正しました。この問題は同じオブジェクトIDが再利用された場合に発生していました。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-4-2018-06-29">
<span id="release-8-0-4"></span><h2>8.0.4リリース - 2018-06-29<a class="headerlink" href="#release-8-0-4-2018-06-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id77">
<h3>改良<a class="headerlink" href="#id77" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[log] <code class="docutils literal notranslate"><span class="pre">[ii][update][one]</span></code> のエラーメッセージにサブエラーを追加しました。</p></li>
<li><p>新しいAPI <code class="docutils literal notranslate"><span class="pre">grn_highlighter_clear_keywords()</span></code> を追加しました。</p></li>
<li><p>新しいpredicate <code class="docutils literal notranslate"><span class="pre">grn_obj_is_number_family_bulk()</span></code> を追加しました。</p></li>
<li><p>新しいAPI <code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_get_value_mode()</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/vector_find.html"><span class="doc">vector_find</span></a>] 新しい関数 <code class="docutils literal notranslate"><span class="pre">vector_find()</span></code> を追加しました。</p></li>
<li><p>msgpackでのmemcpyの警告を抑制しました。</p></li>
<li><p>mrubyを1.0.0から1.4.1に更新しました。</p></li>
<li><p>[doc][<a class="reference internal" href="reference/api/grn_obj.html"><span class="doc">grn_obj</span></a>] <code class="docutils literal notranslate"><span class="pre">grn_obj_is_index_column()</span></code> のAPIリファレンスを追加しました。</p></li>
<li><p>[windows] printfフォーマットの警告を抑制しました。</p></li>
<li><p>[windows] msgpackによる警告を抑制しました。</p></li>
<li><p>[<a class="reference internal" href="reference/api/grn_obj.html"><span class="doc">grn_obj</span></a>][<a class="reference internal" href="reference/api/plugin.html"><span class="doc">Plugin</span></a>] エンコーディングコンバーターを追加しました。ルール:</p>
<ul>
<li><p>grn_ctx::errbuf: grn_encoding</p></li>
<li><p>grn_logger_put: grn_encoding</p></li>
<li><p>mruby: UTF-8</p></li>
<li><p>path: locale</p></li>
</ul>
</li>
<li><p>[mrb] <code class="docutils literal notranslate"><span class="pre">LocaleOutput</span></code> を追加しました。</p></li>
<li><p>[windows] イメージのパスのgrn_encodingへの変換をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenMecab] エラーメッセージのエンコーディングを変換するようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_sum.html"><span class="doc">window_sum</span></a>] 対象カラムとしての動的カラムをサポートしました。</p></li>
<li><p>[doc][<a class="reference internal" href="reference/api/grn_obj.html"><span class="doc">grn_obj</span></a>] <code class="docutils literal notranslate"><span class="pre">grn_obj_is_vector_column()</span></code> のAPIリファレンスを追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/column_create.html"><span class="doc">column_create</span></a>] より多くのバリデーションを追加しました。</p>
<ul>
<li><p>1: ベクターカラムの全文検索インデックスは <code class="docutils literal notranslate"><span class="pre">WITH_SECTION</span></code> フラグが必要です。（ただし、 <code class="docutils literal notranslate"><span class="pre">WITH_POSITION</span></code> あり、 <code class="docutils literal notranslate"><span class="pre">WITH_SECTION</span></code> なしのTokenDelmitは許容されます。これはタグ検索に便利なパターンです。)</p></li>
<li><p>2: ベクターカラムの全文検索インデックスはマルチカラムインデックスであってはいけません。詳細: <a class="reference external" href="https://github.com/groonga/groonga/commit/08e2456ba35407e3d5172f71a0200fac2a770142">https://github.com/groonga/groonga/commit/08e2456ba35407e3d5172f71a0200fac2a770142</a></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] 実装が不十分だったため、ログのチェックを一時的に無効にしました</p></li>
</ul>
</div>
<div class="section" id="id78">
<h3>修正<a class="headerlink" href="#id78" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] 十分にフィルターされたケースで、スコアが多すぎる問題を修正</p></li>
<li><p>KyTeaがインストールされているとビルドに失敗する問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] 出力チャネルを修正しました。</p></li>
<li><p>[query-log][show-condition] クラッシュするバグを修正しました（まだ残っている可能性があります）。</p></li>
<li><p>[highlighter][lexicon] ハイライトされないバグを修正しました。キーワードの長さがN未満（N-gramのN。多くの場合はBigramなので2未満）の場合、キーワードがハイライトされていませんでした。</p></li>
<li><p>[windows] base path検出時の問題を修正しました。システムロケールのDLLパスが、CP932での「U+8868 CJK UNIFIED IDEOGRAPH-8868」のように0x5c （ASCIIでの <code class="docutils literal notranslate"><span class="pre">\</span></code> )を含む場合に問題がありました。</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram] 最初の文字の長さの誤りを修正しました。この問題は、「U+3231 PARENTHESIZED IDEOGRAPH STOCK」のような「PARENTHESIZED IDEOGRAPH」文字で起きていました。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-3-2018-05-29">
<span id="release-8-0-3"></span><h2>8.0.3リリース - 2018-05-29<a class="headerlink" href="#release-8-0-3-2018-05-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id79">
<h3>改良<a class="headerlink" href="#id79" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> または <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> を使って検索した結果のハイライトをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">report_source_location</span> <span class="pre">option</span></code> を追加しました。このオプションは、<code class="docutils literal notranslate"><span class="pre">highlight_html</span></code> で語彙表を使ったハイライトをする時に使用します。</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">unify_middle_dot</span> <span class="pre">option</span></code> を追加しました。このオプションは、中点を正規化します。<code class="docutils literal notranslate"><span class="pre">・</span></code> の有無や <code class="docutils literal notranslate"><span class="pre">・</span></code> 位置にかかわらず検索できます。</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span> <span class="pre">option</span></code> を追加しました。このオプションは、<code class="docutils literal notranslate"><span class="pre">ヴァヴィヴヴェヴォ</span></code> を <code class="docutils literal notranslate"><span class="pre">バビブベボ</span></code>  へ正規化します。例えば <code class="docutils literal notranslate"><span class="pre">バイオリン</span></code> を <code class="docutils literal notranslate"><span class="pre">ヴァイオリン</span></code> で検索できます。</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">unify_katakana_bu_sound</span> <span class="pre">option</span></code> を追加しました。このオプションは、<code class="docutils literal notranslate"><span class="pre">ヴァヴィヴゥヴェヴォ</span></code> を <code class="docutils literal notranslate"><span class="pre">ブ</span></code> に正規化します。例えば、<code class="docutils literal notranslate"><span class="pre">セーブル</span></code> や <code class="docutils literal notranslate"><span class="pre">セーヴル</span></code> を <code class="docutils literal notranslate"><span class="pre">セーヴェル</span></code> で検索できます。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] 十分にフィルターされたケースでの <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> の動作を最適化しました。この最適化は、 <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> 実行前に十分にレコードが絞り込まれているケースで有効になります。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] 全てのワーカのコンテキストアドレスをユニークにしました。コンテキストアドレスは、以下のクエリーログの <code class="docutils literal notranslate"><span class="pre">#{ID}</span></code> です。</p>
<div class="line-block">
<div class="line">#{TIME_STAMP}|#{MESSAGE}</div>
<div class="line">#{TIME_STAMP}|#{ID}|&gt;#{QUERY}</div>
<div class="line">#{TIME_STAMP}|#{ID}|:#{ELAPSED_TIME} #{PROGRESS}</div>
<div class="line">#{TIME_STAMP}|#{ID}|&lt;#{ELAPSED_TIME} #{RETURN_CODE}</div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/commands/delete.html"><span class="doc">delete</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">limit</span></code> を追加しました。以下の例のように、削除するレコードの件数を制限できます。<code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">--table</span> <span class="pre">Users</span> <span class="pre">--filter</span> <span class="pre">'_key</span> <span class="pre">&#64;^</span> <span class="pre">&quot;b&quot;'</span> <span class="pre">--limit</span> <span class="pre">4</span></code></p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.14.0に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id80">
<h3>修正<a class="headerlink" href="#id80" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 動的カラムをフィルターした時にエラーが発生するとメモリリークする不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] 動的カラムの初期化に失敗した際にメモリリークする不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] 動的カラムの評価に失敗した際にメモリリークする不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] <code class="docutils literal notranslate"><span class="pre">loose_symbol</span></code> のように緩いトークナイズをした時に <code class="docutils literal notranslate"><span class="pre">source_offset</span></code> が誤った値になる不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">U+FF21</span> <span class="pre">FULLWIDTH</span> <span class="pre">LATIN</span> <span class="pre">CAPITAL</span> <span class="pre">LETTER</span> <span class="pre">A</span></code> のような全角ラテン大文字が、<code class="docutils literal notranslate"><span class="pre">U+0061</span> <span class="pre">LATIN</span> <span class="pre">SMALL</span> <span class="pre">LETTER</span> <span class="pre">A</span></code> のようなラテン小文字に正規化されない不具合を修正しました。すでに、 <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> を使用している場合は、インデックスを再生成する必要があります。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-2-2018-04-29">
<span id="release-8-0-2"></span><h2>8.0.2リリース - 2018-04-29<a class="headerlink" href="#release-8-0-2-2018-04-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id81">
<h3>改良<a class="headerlink" href="#id81" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>][<a class="reference internal" href="reference/executables/grndb.html#grndb-force-truncate"><span class="std std-ref">--force-truncate</span></a>]  <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">recover</span> <span class="pre">--force-truncate</span></code> オプションを指定することで、テーブルにロックが残ったままの状態でも truncate できるようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> オプションに対応しました。</p></li>
<li><p>新しい関数 <code class="docutils literal notranslate"><span class="pre">time_format()</span></code> を追加しました。<code class="docutils literal notranslate"><span class="pre">Time</span></code> 型のカラムの値を時刻表記で出力できます。書式は <code class="docutils literal notranslate"><span class="pre">strftime</span></code> 用の形式を指定できます。</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] 新しいトークナイザー <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> を追加しました。このトークナイザーは、オプションを通じて挙動を動的に変えることができます。対応しているオプションは以下の通りです。</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code> : Ngram の「N」を指定します。例えば trigram の場合は「3」です。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loose_symbol</span></code> : 記号を含む語句について、記号の有無の違いを無視して検索できるようにトークナイズします。例えば「090-1111-2222」という語句は、「09011112222」「090」「1111」「2222」「090-1111-2222」のいずれで検索した場合にも検索結果としてヒットするようになります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loose_blank</span></code> : 空白を含む語句について、空白の有無の違いを無視して検索できるようにトークナイズします。例えば「090 1111 2222」という語句は、「09011112222」「090」「1111」「2222」「090 1111 2222」のいずれで検索した場合にも検索結果としてヒットするようになります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_blank</span></code> : 空白を含む語句について、空白無しの語句で検索できるようにトークナイズします。例えば「090 1111 2222」という語句は、「09011112222」「090」「1111」「2222」のいずれで検索した場合にも検索結果としてヒットするようになります。空白を含む語句「090 1111 2222」での検索にはヒットしない点にご注意下さい。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] Unicode 10.0 の NFKC（Normalization Form Compatibility Composition）に基づくノーマライザーである &quot;NormalizerNFKC100&quot; を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] ノーマライザーの &quot;NormalizerNFKC51&quot; と &quot;NormalizerNFKC100&quot; でのオプション指定に対応しました。ノーマライザーの挙動を動的に変えることができます。対応しているオプションは以下の通りです。</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana</span></code> : 同じ音となる全角ひらがな、全角カタカナ、半角カタカナの文字を同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code> : 全角ひらがな、全角カタカナ、半角カタカナで拗音、促音などを表す小さな文字（例：「ぁ」「ゃ」「っ」）を大きな文字と同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_voiced_sound_mark</span></code> : 全角ひらがな、全角カタカナ、半角カタカナで濁点や半濁点の有無を同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen</span></code> : ハイフンに類する文字すべてをハイフンと同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_prolonged_sound_mark</span></code> : 長音記号に類する文字すべてを長音記号と同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen_and_prolonged_sound_mark</span></code> : ハイフンに類する文字と長音記号に類する文字のすべてをハイフンと同一視します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] トークナイザーとノーマライザーのオプションの出力に対応しました。トークナイザーまたはノーマライザーのオプションを含んだ状態でGroonga 8.0.2およびそれ以降で出力した dump は、Grooga 8.0.1以前のバージョンでは読み込めず、未対応の情報によりエラーとなります。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] トークナイザーとノーマライザーのオプションの出力に対応しました。トークナイザーまたはノーマライザーのオプションを含んだ状態でGroonga 8.0.2およびそれ以降で出力した schema は、Grooga 8.0.1以前のバージョンでは読み込めず、未対応の情報によりエラーとなります。</p></li>
<li><p>Ubuntu 18.04 (Bionic Beaver)をサポートしました。</p></li>
</ul>
</div>
<div class="section" id="id82">
<h3>修正<a class="headerlink" href="#id82" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>スペースのみの検索クエリが意図しないレコードにマッチする不具合を修正しました。[groonga-dev,04609][satouyuzhさんの報告]</p></li>
<li><p>誤ったスコアラーが使われる場合があった不具合を修正しました。この問題は以下のように複数のスコアラーが使われた時に発生していました： <code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">'title</span> <span class="pre">||</span> <span class="pre">scorer_tf_at_most(content,</span> <span class="pre">2.0)'</span></code></p></li>
<li><p>「thread_limit」の変更に時間がかかりすぎる問題を修正しました。</p></li>
</ul>
</div>
<div class="section" id="id83">
<h3>感謝<a class="headerlink" href="#id83" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>satouyuzhさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-1-2018-03-29">
<span id="release-8-0-1"></span><h2>8.0.1リリース - 2018-03-29<a class="headerlink" href="#release-8-0-1-2018-03-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id84">
<h3>改良<a class="headerlink" href="#id84" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">ログ</span></a>] クエリーログ内で <code class="docutils literal notranslate"><span class="pre">filter</span></code> 条件を表示するようにしました。この機能はデフォルトでは、無効になっています。有効にするためには、環境変数 <code class="docutils literal notranslate"><span class="pre">GRN_QUERY_LOG_SHOW_CONDITION=yes</span></code> を設定します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.pdb</span></code> を <code class="docutils literal notranslate"><span class="pre">*.dll</span></code> と <code class="docutils literal notranslate"><span class="pre">*.exe</span></code> と同じディレクトリにインストールされるようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージの動的カラムをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] [<a class="reference internal" href="reference/commands/logical_count.html#logical-count-post-filter"><span class="std std-ref">post_filter</span></a>] フィルタータイミングを新規追加しました。 <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージのカラムが生成された後に実行されます。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] [<a class="reference internal" href="reference/commands/logical_select.html#logical-select-post-filter"><span class="std std-ref">post_filter</span></a>] フィルタータイミングを新規追加しました。 <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージのカラムが生成された後に実行されます。</p></li>
<li><p>ベクターデータに対してLZ4/Zstd/zlibの圧縮をサポートしました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_key</span></code> のようなアクセサへのエイリアスをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] 大きい結果セットに対するウィンドウ関数の動作を最適化しました。一致するレコードが十分見つかった場合は、残りのウィンドウに対してウィンドウ関数を適用しません。</p>
<p>TODO: この最適化は、最適化によるオーバーヘッドが無視出来ない場合、小さな結果セットに対しては、無効になります。 オーバーヘッドがどのくらいになるのかは、まだ評価出来ていません。</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">match_escalation</span></code> パラメーターを追加しました。<code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">yes</span></code> とすることによって、マッチ演算のエスカレーションを強制的に有効にします。このパラメータは、 <code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span> <span class="pre">99999....999</span></code> よりも強力です。<code class="docutils literal notranslate"><span class="pre">match_escalation</span> <span class="pre">yes</span></code> は、 <code class="docutils literal notranslate"><span class="pre">SOME_CONDITIONS</span> <span class="pre">&amp;&amp;</span> <span class="pre">column</span> <span class="pre">&#64;</span> <span class="pre">'query'</span></code> もエスカレーションしますが、 <code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span></code> ではしないためです。</p>
<p>デフォルトは、 <code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">auto</span></code> です。これは、既存の動作と同じです。</p>
<p><code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">no</span></code> とすることで、マッチ演算のエスカレーションを無効にできます。これは、 <code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span> <span class="pre">-1</span></code> と同様の動きになります。</p>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.10に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id85">
<h3>修正<a class="headerlink" href="#id85" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>共通接頭辞がどのトークンにもマッチしない時にメモリリークする問題を修正しました。[GitHub#820] [村上さんがパッチ提供]</p></li>
<li><p>同一プロセスで複数のデータベースを開いている時に、異なるデータベースのキャッシュを使用してしまう問題を修正しました。</p></li>
<li><p>誤ったインデックスが構築される問題を修正しました。この問題は、インデックスカラムのソースがベクターカラムでかつ、 <code class="docutils literal notranslate"><span class="pre">WITH_SECTION</span></code> を指定していない時だけ発生します。</p></li>
<li><p>比較時(&gt;,&gt;=,&lt;,&lt;=,==,!=)に定数がオーバーフローまたは、アンダーフローし得る問題を修正しました。</p></li>
</ul>
</div>
<div class="section" id="id86">
<h3>感謝<a class="headerlink" href="#id86" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>村上さん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-0-2018-02-09">
<span id="release-8-0-0"></span><h2>8.0.0リリース - 2018-02-09<a class="headerlink" href="#release-8-0-0-2018-02-09" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>メジャーバージョンアップです! メジャーバージョンアップですが、互換性は壊れていないので、データベースを再構築することなくアップグレードできます。</p>
<div class="section" id="id87">
<h3>改良<a class="headerlink" href="#id87" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">--drilldown_adjuster</span></code> と <code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL].adjuster</span></code> を追加しました。drilldown結果に対して、スコア調整できるようになります。</p></li>
<li><p>[<a class="reference internal" href="reference/indexing.html#online-index-construction"><span class="std std-ref">動的なインデックス構築方法</span></a>] 環境変数の名前を <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_ENABLE</span></code> から <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD</span></code> へ変更しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD=0</span> <span class="pre">==</span> <span class="pre">GRN_II_REDUCE_EXPIRE_ENABLE=no</span></code> 。 <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD=-1</span></code> とすると、しきい値は <code class="docutils literal notranslate"><span class="pre">ii-&gt;chunk-&gt;max_map_seg</span> <span class="pre">/</span> <span class="pre">2</span></code> となります。<code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> とすると、しきい値は <code class="docutils literal notranslate"><span class="pre">MIN(ii-&gt;chunk-&gt;max_map_seg</span> <span class="pre">/</span> <span class="pre">2,</span> <span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD)</span></code> となります。デフォルト値は、 <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD=32</span></code> です。</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] 境界値なしの <code class="docutils literal notranslate"><span class="pre">between()</span></code> を受け付けるようにしました。<code class="docutils literal notranslate"><span class="pre">between()</span></code> の引数の数が3つでも実行できます。2番目と3番目の引数が境界を含むものとして処理されます。</p></li>
</ul>
</div>
<div class="section" id="id88">
<h3>修正<a class="headerlink" href="#id88" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>ハッシュテーブルのメモリリークを修正しました。 [GitHub:mroonga/mroonga#190][fuku1さんの報告]</p></li>
<li><p>配列のメモリリークを修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">output_columns</span></code> で結果の変化する関数を使っている時にキャッシュしないようにしました。</p></li>
<li><p>[Windows] <code class="docutils literal notranslate"><span class="pre">WSASend</span></code> が適切なエラーコードを返すようにしました。</p></li>
</ul>
</div>
<div class="section" id="id89">
<h3>感謝<a class="headerlink" href="#id89" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>fuku1さん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-1-1-2018-01-29">
<span id="release-7-1-1"></span><h2>7.1.1リリース - 2018-01-29<a class="headerlink" href="#release-7-1-1-2018-01-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id90">
<h3>改良<a class="headerlink" href="#id90" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 17.04（Zesty Zapus）のサポートをやめました。2018年1月13日でサポートが切れた（EOLになった）ためです。</p></li>
<li><p>Quorum matchをサポートしました。スクリプト構文でもクエリー構文でもquorum matchを使うことができます。</p>
<p>TODO: quorum matchの構文をドキュメントへ追加、それらのドキュメントへのリンク生成</p>
</li>
<li><p>スクリプト構文で類似度のカスタマイズをサポートしました。スクリプト構文内で類似度のカスタマイズができます。</p>
<p>TODO: 類似度のカスタマイズの構文をドキュメントへ追加、それらのドキュメントへのリンク生成</p>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>][<a class="reference internal" href="reference/executables/grndb.html#grndb-force-lock-clear"><span class="std std-ref">--force-lock-clear</span></a>] <code class="docutils literal notranslate"><span class="pre">--force-lock-clear</span></code> を追加しました。このオプションは、データベースやテーブル、データカラムのロックを強制的に解除します。データベースやテーブル、データカラムにロックが残っていても再度データベースを使えるようになります。</p>
<p>しかし、このオプションはとても危険です。通常は使うべきではありません。データベースが壊れている場合は、データベースは依然として破損しています。このオプションはロックを無視するだけです。</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] サロゲートペアをエスケープ可能にしました。例えば、 <code class="docutils literal notranslate"><span class="pre">\uD83C\uDF7A</span></code> は <code class="docutils literal notranslate"><span class="pre">🍺</span></code> として処理されます。</p></li>
<li><p>[Windows] Windows上でスパースファイルを使用するように変更しました。ディスク容量を節約できます。パフォーマンス上のデメリットはありません。</p></li>
<li><p>[<a class="reference internal" href="reference/indexing.html#online-index-construction"><span class="std std-ref">動的なインデックス構築方法</span></a>] インデックスカラム内のメモリーマップをいつ開放するかをコントロールする環境変数 <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD</span></code> を追加しました。デフォルトは <code class="docutils literal notranslate"><span class="pre">-1</span></code> です。 <code class="docutils literal notranslate"><span class="pre">-1</span></code> のときはインデックスカラムのサイズによって動的に開放するタイミングを決めます。インデックスカラムが小さければ頻繁に解放し、大きければ頻度を下げます。</p>
<p><code class="docutils literal notranslate"><span class="pre">0</span></code> を設定すると従来と同じ挙動になります。従来の挙動とは、Groongaは開放できそうなときはいつも開放しようとするという挙動です。</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] [<a class="reference internal" href="reference/commands/logical_range_filter.html#logical-range-filter-post-filter"><span class="std std-ref">post_filter</span></a>]フィルタータイミングを新規追加しました。 <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージで生成されるカラムが生成された後に実行されます。</p></li>
</ul>
</div>
<div class="section" id="id91">
<h3>修正<a class="headerlink" href="#id91" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>参照ベクタのインデックスを作成する際に使用するリソースを削減しました。[GitHub#806][村上さんが報告]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/table_create.html"><span class="doc">table_create</span></a>] <code class="docutils literal notranslate"><span class="pre">token_filters</span></code> が無効であってもテーブルが作成される不具合を修正しました。</p></li>
</ul>
</div>
<div class="section" id="id92">
<h3>感謝<a class="headerlink" href="#id92" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>付超群さん</p></li>
<li><p>村上さん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-1-0-2017-12-29">
<span id="release-7-1-0"></span><h2>7.1.0リリース - 2017-12-29<a class="headerlink" href="#release-7-1-0-2017-12-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id93">
<h3>改良<a class="headerlink" href="#id93" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] <code class="docutils literal notranslate"><span class="pre">load</span></code> コマンドのクエリーログのフォーマットを改良しました。<code class="docutils literal notranslate"><span class="pre">load</span></code> コマンドのクエリーログに以下の項目が追加されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>ロードしたレコード数を表示します。</p></li>
<li><p>ロードがエラーになったレコードとカラムの数を表示します。</p></li>
<li><p>ロード後の総レコード数を表示します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> コマンドのクエリーログのフォーマットを改良しました。<code class="docutils literal notranslate"><span class="pre">logical_count</span></code> コマンドのクエリーログに以下の項目が追加されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>マッチしたレコード数を表示します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> コマンドのクエリーログのフォーマットを改良しました。 <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> コマンドのクエリーログに以下の項目が追加されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>マッチしたレコード数を表示します。</p></li>
<li><p>ドリルダウンした数を表示します。</p></li>
<li><p>ラベルつきのドリルダウンをした数を表示します。</p></li>
<li><p>それぞれのシャードで検索にマッチした数を表示します。</p></li>
<li><p>検索対象のシャードの情報を&quot;[...]&quot;を使って表示します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/delete.html"><span class="doc">delete</span></a>] <code class="docutils literal notranslate"><span class="pre">delete</span></code> コマンドのクエリーログのフォーマットを改良しました。 <code class="docutils literal notranslate"><span class="pre">delete</span></code> コマンドのクエリーログに以下の項目が追加されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>削除したレコード数と削除に失敗したレコード数を表示します。</p></li>
<li><p>削除後に残ったレコード数を表示します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>] <code class="docutils literal notranslate"><span class="pre">groonga</span> <span class="pre">-s</span></code> で実行したサーバーをC-c で確実に停止出来るようにしました。</p></li>
<li><p>Lisp表現( <code class="docutils literal notranslate"><span class="pre">#&lt;nan&gt;</span></code> 、 <code class="docutils literal notranslate"><span class="pre">#i1/0</span></code> 、 <code class="docutils literal notranslate"><span class="pre">#-i1/0</span></code> )の代わりに <code class="docutils literal notranslate"><span class="pre">Nan</span></code> と <code class="docutils literal notranslate"><span class="pre">Infinity</span></code> 、 <code class="docutils literal notranslate"><span class="pre">-Infinity</span></code> を使用するように改良しました。</p></li>
<li><p>ドリルダウンでベクター型のカラムをサポートしました。</p></li>
<li><p>部分的に正規表現を用いた検索から、キーワードを抽出出来るように改良しました。これにより、正規表現を用いた検索に <code class="docutils literal notranslate"><span class="pre">highlight_html</span></code> と <code class="docutils literal notranslate"><span class="pre">snippet_html</span></code> を使えるようになります。[takagi01さんに報告いただきました]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_bulk_*()</span></code> APIにおいて、 <code class="docutils literal notranslate"><span class="pre">realloc()</span></code> が呼ばれる回数を削減しました。</p>
<p>Windowsにおいて出力が大きいケースでパフォーマンスが向上します。例えば、出力が100MBを超える場合には、約100倍速くなります。</p>
<p><code class="docutils literal notranslate"><span class="pre">realloc()</span></code> はWindowsでは重い処理であるためです。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_II_OVERLAP_TOKEN_SKIP_ENABLE</span></code> の値にyesが設定された時のみ <code class="docutils literal notranslate"><span class="pre">GRN_II_OVERLAP_TOKEN_SKIP_ENABLE</span></code> を有効にするようにしました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLE</span></code> は非推奨になりました。代わりに <code class="docutils literal notranslate"><span class="pre">GRN_NGRAM_TOKENIZER_REMOVE_BLANK_ENABL=no</span></code> を使って下さい。</p></li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">index_column_source_records</span></code> を新規に追加しました。インデックスカラムのソースを取得することができます。[村上さんがパッチを提供]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] offsetに負の値を設定出来るようにしました。</p></li>
<li><p>固定サイズのカラムの値を取得する際のパフォーマンスを向上しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga.html"><span class="doc">groonga 実行ファイル</span></a>] groongaコマンドの引数に <code class="docutils literal notranslate"><span class="pre">--listen-backlog</span></code> オプションを追加しました。listenシステムコールのbacklogをカスタマイズできます。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.8に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id94">
<h3>修正<a class="headerlink" href="#id94" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">highlight_full</span></code> 関数を使用するとメモリリークする問題を修正しました。</p></li>
<li><p>Mroongaで以下ような呼び出しを行った際にクラッシュする問題を修正しました。</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_expr_append_const(&quot;_id&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_expr_append_op(GRN_OP_GET_VALUE)</span></code></p></li>
</ol>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id95">
<h3>感謝<a class="headerlink" href="#id95" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>takagi01</p></li>
<li><p>村上さん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-9-2017-11-29">
<span id="release-7-0-9"></span><h2>7.0.9リリース - 2017-11-29<a class="headerlink" href="#release-7-0-9-2017-11-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id96">
<h3>改良<a class="headerlink" href="#id96" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Apache Arrowの新しいバージョンをサポートしました。このリリースでは、Apache Arrowサポートを有効にするには0.8.0以降が必要です。</p></li>
<li><p>[sharding] 動的カラムの新しいAPIを追加しました。</p>
<ul>
<li><p>Groonga::LabeledArguments</p></li>
</ul>
</li>
<li><p>[sharding] 便利メソッドである <code class="docutils literal notranslate"><span class="pre">Table#select_all</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] 動的カラムをサポートしました。 <code class="docutils literal notranslate"><span class="pre">initial</span></code> と <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージのみをサポートしています。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] <code class="docutils literal notranslate"><span class="pre">cache</span></code> 引数と動的カラムに関するドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] 動的カラムをサポートしました。<code class="docutils literal notranslate"><span class="pre">initial</span></code> ステージのみサポートしています。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] 名前付き引数のドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">_key</span></code> をインデックスを使わない場合でもサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/in_values.html"><span class="doc">in_values</span></a>] 126を超える引数を指定できるようにしました。 [GitHub#760] [GitHub#781] [groonga-dev,04449] [むらたさんが報告]</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.7に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id97">
<h3>修正<a class="headerlink" href="#id97" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[httpd] 古いバージョンのGroongaがすでにインストールされている場合にそちらを参照してしまい、ビルドエラーになる問題を修正しました。　[GitHub#775] [myamanishi3さんが報告]</p></li>
<li><p>[<a class="reference internal" href="reference/functions/in_values.html"><span class="doc">in_values</span></a>] <code class="docutils literal notranslate"><span class="pre">in_values</span></code> に多すぎる引数を指定するとクラッシュする不具合を修正しました。この不具合は126を超える引数をサポートする過程で見つかりました。 [GitHub#780]</p></li>
<li><p>[cmake] LZ4 と MessagePack をビルド時に正しく検出できるようにしました。 [Sergei Golubchikさんが報告]</p></li>
<li><p>[<a class="reference internal" href="reference/indexing.html#offline-index-construction"><span class="std std-ref">静的なインデックス構築方法</span></a>] ベクターカラムの静的索引構築時に必要以上のリソースを使用する問題を修正しました。1つのベクターカラムの要素数が多く、大量のレコードがある場合はGroongaがクラッシュしていました。 [groonga-dev,04533][内山敏郎さんが報告]</p></li>
</ul>
</div>
<div class="section" id="id98">
<h3>感謝<a class="headerlink" href="#id98" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>むらたさん</p></li>
<li><p>myamanishi3さん</p></li>
<li><p>Sergei Golubchikさん</p></li>
<li><p>内山敏郎さん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-8-2017-10-29">
<span id="release-7-0-8"></span><h2>7.0.8リリース - 2017-10-29<a class="headerlink" href="#release-7-0-8-2017-10-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id99">
<h3>改良<a class="headerlink" href="#id99" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[windows] クラッシュした際にバックトレースを出せるようにしました。関数呼び出しだけでなく、ソースコードの該当行も可能な限り表示します。バックトレースのサポートにより、問題の素早い解決につながります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> を指定してあれば &quot;( )&quot; を <code class="docutils literal notranslate"><span class="pre">--query</span></code> に指定して実行できるようにしました。 以前のバージョンでは、エラーになっていました。 [GitHub#767]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> を指定してあれば &quot;(+)&quot; を <code class="docutils literal notranslate"><span class="pre">--query</span></code> に指定して実行できるようにしました。 以前のバージョンでは、エラーになっていました。 [GitHub#767]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> を指定してあれば <code class="docutils literal notranslate"><span class="pre">--query</span> <span class="pre">&quot;~y&quot;</span></code> (~ではじまる)クエリーを実行できるようにしました。 以前のバージョンでは、エラーになっていました。 [GitHub#767]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expired</span></code> のログレベルを <code class="docutils literal notranslate"><span class="pre">info</span></code> から <code class="docutils literal notranslate"><span class="pre">debug</span></code> に変更しました。 <code class="docutils literal notranslate"><span class="pre">2017-10-29</span> <span class="pre">14:05:34.123456|i|</span> <span class="pre">&lt;0000000012345678:0&gt;</span> <span class="pre">expired</span> <span class="pre">i=000000000B123456</span> <span class="pre">max=10</span> <span class="pre">(2/2)</span></code> このメッセージはインデックスをメモリーにマップした後で開放されたときに記録されます。つまり、メモリーの使用状況に関するデバッグには有用ですが、通常の運用においては有用ではありません。そのためログレベルを <code class="docutils literal notranslate"><span class="pre">debug</span></code> に変更しました。</p></li>
<li><p>Ubuntu 17.10 Artful Aardvarkをサポート。</p></li>
</ul>
</div>
<div class="section" id="id100">
<h3>修正<a class="headerlink" href="#id100" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[dat] データベースを拡張する際、意図せず大きなファイルが(ワーストケースで)作成されてしまうことのある不具合を修正しました。この不具合はインデックスカラムを頻繁に作成/削除を繰り返したときに発生する可能性があります。7.0.7ではこの不具合に関連して&quot;大量にキーを削除したケースで <code class="docutils literal notranslate"><span class="pre">table_create</span></code> に失敗する&quot;問題を修正しましたが、その修正が不十分なケースに対応しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">offset</span></code> と <code class="docutils literal notranslate"><span class="pre">limit</span></code> が複数のシャードに対して適用されたとき、実際よりも少ないレコードが返される不具合を修正しました。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-7-2017-09-29">
<span id="release-7-0-7"></span><h2>7.0.7リリース - 2017-09-29<a class="headerlink" href="#release-7-0-7-2017-09-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id101">
<h3>改良<a class="headerlink" href="#id101" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> を <code class="docutils literal notranslate"><span class="pre">+</span></code> のみのクエリーに指定したときにも動作するようにしました。以前のバージョンではそのようなクエリーはエラーになっていました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.5に更新しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] 引数のデフォルト値を構文のセクションに追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/command/command_version.html"><span class="doc">コマンドバージョン</span></a>] <code class="docutils literal notranslate"><span class="pre">--default-command-version</span> <span class="pre">3</span></code> に対応しました。</p></li>
<li><p>関数呼び出し時に検索結果をキャッシュできるようにしました。ほとんどの関数の呼び出し結果はキャッシュされます。例外は <code class="docutils literal notranslate"><span class="pre">now()</span></code> と <code class="docutils literal notranslate"><span class="pre">rand()</span></code> を使った場合です。標準でキャッシュするように振る舞いを変更したので、新たにAPIを追加しました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_set_is_stable()</span></code> を追加。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_is_stable()</span></code> を追加。</p></li>
</ul>
<p>呼び出しごとに結果が異なる関数を新規に追加する場合、<code class="docutils literal notranslate"><span class="pre">grn_proc_is_stable(ctx,</span> <span class="pre">proc,</span> <span class="pre">GRN_FALSE)</span></code> を呼ばなければなりません。もし呼ばなかった場合には、検索結果がキャッシュされるので、期待と異なり誤った結果を返します。</p>
</li>
</ul>
</div>
<div class="section" id="id102">
<h3>修正<a class="headerlink" href="#id102" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p>[windows] <code class="docutils literal notranslate"><span class="pre">database_unmap</span></code> が実行される前のファイルハンドルのエラー処理を適切に行うようにしました。<code class="docutils literal notranslate"><span class="pre">database_unmap</span></code> 実行前にリクエストがキャンセルされた場合、排他制御部分が未初期化となる場合がありました。その場合、クラッシュしていました。</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] トークナイザー名のドキュメントを修正しました。<code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlankSplitSymbolAlpha</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlankSplitSymbolAlphaDigit</span></code> であるべきでした。</p></li>
<li><p>エラー時に空のファイルが残らないようにしました。</p>
<p>以前のバージョンでは、空のファイルがエラー時に残っていました。</p>
<p>再現するためのシナリオは以下です。:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_fileinfo_open</span></code> によりファイルの作成に成功する</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DO_MAP</span></code> によりファイルマッピングに失敗する</p></li>
</ol>
</div></blockquote>
<p>そのような場合、Groongaの管理下にないファイルのせいで「すでにファイルが存在します。」という別のエラーが発生します。そういったファイルは後始末の段階で削除すべきでした。</p>
</li>
<li><p>短時間に多数の更新を行っている状況で検索した場合にクラッシュすることがある不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/table_create.html"><span class="doc">table_create</span></a>] 大量に削除されたキーがDATテーブルに存在する場合、<code class="docutils literal notranslate"><span class="pre">table_create</span></code> の実行に失敗する不具合を修正しました。</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-6-2017-08-29">
<span id="release-7-0-6"></span><h2>7.0.6リリース - 2017-08-29<a class="headerlink" href="#release-7-0-6-2017-08-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id103">
<h3>改良<a class="headerlink" href="#id103" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>前方一致検索を複数インデックスを指定してできるようになりました。 (例 <code class="docutils literal notranslate"><span class="pre">--query</span> <span class="pre">&quot;Foo*&quot;</span> <span class="pre">--match_columns</span> <span class="pre">&quot;TITLE_INDEX_COLUMN||BODY_INDEX_COLUMN&quot;</span></code>)</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_count.html"><span class="doc">window_count</span></a>] <code class="docutils literal notranslate"><span class="pre">window_count</span></code> 関数を追加しました。検索した結果にカウントした値を追加するのに使います。検索結果をもとに分析したり、カウント結果をもとにフィルタしたりすると便利です。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_get_disk_usage()</span></code> を追加。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_EXPR_QUERY_NO_SYNTAX_ERROR</span></code> を追加。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_expr_syntax_expand_query_by_table()</span></code> を追加。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_table_find_reference_object()</span></code> を追加。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] 指定したオブジェクトのディスク使用量を表示できるようになりました。</p></li>
<li><p>クエリーをパースする際にフォールバックする機能をサポートしました。 <code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> フラグが <code class="docutils literal notranslate"><span class="pre">query_flags</span></code> に指定されていると有効になります。(標準では無効です) このフラグが設定されていると、シンタックスエラーが発生しなくなります。例えば、&quot;A +&quot; というクエリーは自動的にエスケープされて &quot;A +&quot; という扱いになります。この振る舞いはアプリケーションがユーザーの入力をそのまま検索語句として使い、シンタックスエラーやログに記録されないようにしたい場合に便利です。</p></li>
<li><p>クエリー内の語のスコアを調整できるようになりました。&quot;&gt;&quot;, &quot;&lt;&quot; と &quot;~&quot;がサポートされています。例えば &quot;&gt;Groonga&quot; は &quot;Groonga&quot; のスコアをインクリメントします。&quot;&lt;Groonga&quot; は &quot;Groonga&quot; のスコアをデクリメントします。&quot;~Groonga&quot; は検索結果についてマッチしたドキュメントのスコアをデクリメントします。&quot;~&quot; は検索結果そのものには影響しません。</p></li>
<li><p>テーブルを削除するときのパフォーマンスを改善しました。 <code class="docutils literal notranslate"><span class="pre">thread_limit=1</span></code> する必要はありません。参照されているテーブルが存在するかチェックする処理をオブジェクトを開かなくてもできるようにしました。その結果としてパフォーマンスが改善しました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.4に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id104">
<h3>修正<a class="headerlink" href="#id104" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] 7番目の引数 ( <code class="docutils literal notranslate"><span class="pre">--sort_hash_table</span></code> )が名前無しだと無視される不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/schema.html"><span class="doc">schema</span></a>] コマンドラインパラメータの誤りを修正しました。<cite>source</cite> であるべきところが <cite>sources</cite> になっていました。[groonga-dev,04449] [むらたさんが報告]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/ruby_eval.html"><span class="doc">ruby_eval</span></a>] ruby_evalコマンドがシンタックスエラーのときにクラッシュする問題を修正しました。 [GitHub#751] [ryo-pinusさんがパッチ提供]</p></li>
</ul>
</div>
<div class="section" id="id105">
<h3>感謝<a class="headerlink" href="#id105" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>murata satoshi</p></li>
<li><p>ryo-pinus</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-5-2017-07-29">
<span id="release-7-0-5"></span><h2>7.0.5リリース - 2017-07-29<a class="headerlink" href="#release-7-0-5-2017-07-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id106">
<h3>改良<a class="headerlink" href="#id106" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.3に更新しました。セキュリティーに関する修正(CVE-2017-7529)を含んでいます。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] UInt64の最大値をロードできるようにしました。以前のバージョンでは意図せず0に変換されてしまっていました。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_window_get_size()</span></code> [GitHub#725] [村上さんがパッチ提供]</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/math_abs.html"><span class="doc">math_abs</span></a>] 絶対値を計算するための <code class="docutils literal notranslate"><span class="pre">math_abs()</span></code> 関数を追加しました。 [GitHub#721]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_default_logger_set_path()</span></code> と <code class="docutils literal notranslate"><span class="pre">grn_default_query_logger_set_path()</span></code> をスレッドセーフにしました。</p></li>
<li><p>[Windows] バンドルしているpcreを8.41に更新しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/normalize.html"><span class="doc">normalize</span></a>] エラー時に冗長な空文字列が出力されないようにしました。</p></li>
<li><p>[functions/time] 0除算が発生したときにエラーメッセージを出力するようにしました。 [GitHub#733] [村上さんがパッチ提供]</p></li>
<li><p>[windows] <code class="docutils literal notranslate"><span class="pre">ERROR_NO_SYSTEM_RESOURCES</span></code> エラーを <code class="docutils literal notranslate"><span class="pre">GRN_RESOURCE_TEMPORARILY_UNAVAILABLE</span></code> にマッピングするようにしました。以前は <code class="docutils literal notranslate"><span class="pre">rc=-1</span></code> をエラーコードとして返していました。ただし実際にどんな問題がおきたのかこれではわかりにくいので、 今回の修正では <code class="docutils literal notranslate"><span class="pre">rc=-12</span></code> を返すようにしています。</p></li>
<li><p>[functions/min][functions/max] ベクターカラムをサポートしました。これでカラムがスカラーなのかベクターなのか気にせず使えるようになりました。 [GitHub#735] [村上さんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] <code class="docutils literal notranslate"><span class="pre">--sort_hash_table</span></code> オプションをサポートしました。ハッシュテーブルの <code class="docutils literal notranslate"><span class="pre">_key</span></code> でのソートには <code class="docutils literal notranslate"><span class="pre">--sort_hash_table</span> <span class="pre">yes</span></code> を指定します。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] インデックスカラムを指定できるようになりました。 [GitHub#740] [村上さんがパッチ提供]</p></li>
<li><p>[load] Apache Arrow 0.5.0 以降をサポート。</p></li>
<li><p>[<a class="reference internal" href="troubleshooting/how_to_analyze_error_message.html"><span class="doc">エラーメッセージの解析方法</span></a>] エラーメッセージの解析方法のドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] ソースからビルドするときに必要なパッケージのリストを更新しました。</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 16.10（Yakkety Yak）のサポートをやめました。2017年7月20日でサポートが切れた（EOLになった）ためです。</p></li>
</ul>
</div>
<div class="section" id="id107">
<h3>修正<a class="headerlink" href="#id107" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>テキスト型( <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> など)のベクターカラムに対するインデックスを正しく構築できるようにしました。この修正でインデックス更新後に全文検索でマッチしない問題が解決します。 [GitHub#494]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/thread_limit.html"><span class="doc">thread_limit</span></a>] <code class="docutils literal notranslate"><span class="pre">thread_limit?max=1</span></code> というリクエストが同時にきたときにデッドロックが発生する問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] デフォルトのPIDのパスと再起動時に想定しているPIDのパスがあっていない問題を修正しました。そのせいで groonga-httpd の再起動に失敗していました。 [GitHub#743] [sozakiさんが報告]</p></li>
</ul>
</div>
<div class="section" id="id108">
<h3>感謝<a class="headerlink" href="#id108" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>村上さん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-4-2017-06-29">
<span id="release-7-0-4"></span><h2>7.0.4リリース - 2017-06-29<a class="headerlink" href="#release-7-0-4-2017-06-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id109">
<h3>改良<a class="headerlink" href="#id109" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>物理的なファイルの作成/削除のログを障害の切り分けのために記録するようにしました。 [GitHub#700,#701]</p></li>
<li><p>[<a class="reference internal" href="reference/functions/in_records.html"><span class="doc">in_records</span></a>] 固定長カラムの検索パフォーマンスを改善しました。速度が50%程度改善する可能性があります。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] <code class="docutils literal notranslate"><span class="pre">--log-path</span></code> オプションを追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] <code class="docutils literal notranslate"><span class="pre">--log-level</span></code> オプションを追加しました。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_operator_to_exec_func()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_corrupt()</span></code></p></li>
</ul>
</li>
<li><p>&quot;固定長カラム 演算子 定数&quot; というようなクエリのパフォーマンスを改善しました。対応している演算子は <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> と <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> です。</p></li>
<li><p>&quot;カラム 演算子 値 &amp;&amp; カラム 演算子 値 &amp;&amp; ...&quot; というようなクエリのパフォーマンスを改善しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">check</span></code> で壊れたオブジェクトの検出をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] <code class="docutils literal notranslate"><span class="pre">--only_opened</span></code> オプションをサポートしました。開いているデータベースオブジェクトのみをフラッシュすることができます。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] 参照先のない &quot;inspect&quot; オブジェクトの検出と削除をサポートしました。この状態はコマンド名が <code class="docutils literal notranslate"><span class="pre">inspect</span></code> から <code class="docutils literal notranslate"><span class="pre">object_inspect</span></code> に変更されたことによって発生していました。</p></li>
</ul>
</div>
<div class="section" id="id110">
<h3>修正<a class="headerlink" href="#id110" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[rpm][centos] カスタマイズ版のビルドで意図しないマクロ展開が発生する問題を修正しました。この不具合はGroongaをSRPMからビルドする際にspecファイルの <code class="docutils literal notranslate"><span class="pre">additional_configure_options</span></code> パラメータを使ってリビルドするときのみ発生していました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_table_setoperation()</span></code> のNULLチェックを追加しました。インデックスが壊れている際に、クラッシュする可能性がありました。 [GitHub#699]</p></li>
</ul>
</div>
<div class="section" id="id111">
<h3>感謝<a class="headerlink" href="#id111" title="このヘッドラインへのパーマリンク">¶</a></h3>
</div>
</div>
<div class="section" id="release-7-0-3-2017-05-29">
<span id="release-7-0-3"></span><h2>7.0.3リリース - 2017-05-29<a class="headerlink" href="#release-7-0-3-2017-05-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id112">
<h3>改良<a class="headerlink" href="#id112" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <a class="reference internal" href="tutorial/match_columns.html#full-text-search-with-specific-index-name"><span class="std std-ref">インデックス名を指定した全文検索</span></a> のドキュメントを追加しました。</p></li>
<li><p>[インデックス] どのレコードに対するポスティングリストが長すぎるのかわかるように、警告メッセージをログに出すようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>][<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Apache Arrowをサポートするようにしました。 [GitHub#691]</p></li>
<li><p>[cmake] 静的ライブラリとしてビルドする際に、LZ4をリンクできるようにしました。 [Sergei Golubchikさんがパッチを提供]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/delete.html"><span class="doc">delete</span></a>] キャンセルできるようにしました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.0に更新しました。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_get_caller()</span></code> を追加。</p></li>
</ul>
</li>
<li><p>インデックスカラムに関連した関数とセレクタを追加しました。</p>
<ul>
<li><p>追加されたセレクタ: <code class="docutils literal notranslate"><span class="pre">index_column_df_ratio_between()</span></code></p></li>
<li><p>追加された関数: <code class="docutils literal notranslate"><span class="pre">index_column_df_ratio()</span></code></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id113">
<h3>修正<a class="headerlink" href="#id113" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/delete.html"><span class="doc">delete</span></a>] エラーが適切にクリアされていない不具合を修正しました。そのせいで、後続の削除処理に影響し意図しない振る舞いをしていました。</p></li>
<li><p>[windows] ファイルを <code class="docutils literal notranslate"><span class="pre">O_CREAT</span></code> フラグ付きで開くときに、IOのバージョンが正しく検出されない不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/vector_slice.html"><span class="doc">vector_slice</span></a>] (型のサイズが)4バイトでないベクターカラムをsliceできない不具合を修正しました。 [GitHub#695] [村上さんがパッチ提供]</p></li>
<li><p>(型のサイズが)4バイトでないベクターカラムでベクターの要素をインデックスで指定するとシーケンシャルサーチでマッチしない不具合を修正しました。 [GitHub#696] [村上さんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">min</span></code> に月の最終日を指定すると &quot;argument out of range&quot; が発生する不具合を修正しました。</p></li>
</ul>
</div>
<div class="section" id="id114">
<h3>感謝<a class="headerlink" href="#id114" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>Sergei Golubchikさん</p></li>
<li><p>村上さん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-2-2017-04-29">
<span id="release-7-0-2"></span><h2>7.0.2リリース - 2017-04-29<a class="headerlink" href="#release-7-0-2-2017-04-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id115">
<h3>改良<a class="headerlink" href="#id115" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <a class="reference internal" href="reference/commands/logical_select.html#logical-select-drilldowns-label-columns-name-window-sort-keys"><span class="std std-ref">drilldowns[${LABEL}].columns[${NAME}].window.sort_keys</span></a> と <a class="reference internal" href="reference/commands/logical_select.html#logical-select-drilldowns-label-columns-name-window-group-keys"><span class="std std-ref">drilldowns[${LABEL}].columns[${NAME}].window.group_keys</span></a> で複数のキーを指定できるようになりました。</p></li>
<li><p>[Windows] バンドルしているLZ4を1.7.5に更新しました。</p></li>
<li><p>[cache] 永続化キャッシュをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/log_level.html"><span class="doc">log_level</span></a>] 英語のドキュメントを更新しました。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_set_default_cache_base_path()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_get_default_cache_base_path()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_persistent_cache_open()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_cache_default_open()</span></code></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga.html#cmdoption-groonga-cache-base-path"><code class="xref std std-option docutils literal notranslate"><span class="pre">groonga</span> <span class="pre">--cache-base-path</span></code></a>] 永続キャッシュを使うための新しいオプションを追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] [<a class="reference internal" href="reference/executables/groonga-httpd.html#groonga-httpd-groonga-cache-base-path"><span class="std std-ref">groonga_cache_base_path</span></a>] 永続キャッシュを使うための新しい設定を追加しました。</p></li>
<li><p>[Windows] バンドルしているmsgpackを2.1.1に更新しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] カラム情報を表示するだけでなく、インデックスカラムの統計情報も表示できるようにしました。</p></li>
<li><p>正規表現の「 <code class="docutils literal notranslate"><span class="pre">.*</span></code> 」というパターンでインデックスを使って検索できるようになりました。 この機能はデフォルトで有効です。環境変数に <code class="docutils literal notranslate"><span class="pre">GRN_SCAN_INFO_REGEXP_DOT_ASTERISK_ENABLE=no</span></code> を設定すると無効化できます。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/in_records.html"><span class="doc">in_records</span></a>] 既存のテーブルを条件のパターンを指定するのに使うことのできる関数を追加しました。</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] EOLのため、Ubuntu 12.04のサポートをやめました。</p></li>
</ul>
</div>
<div class="section" id="id116">
<h3>修正<a class="headerlink" href="#id116" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 異なるキャッシュが使われてしまう不具合を修正しました。この問題は動的カラムを使っているときに発生していました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 動的カラムが作成されない不具合を修正しました。レコードにマッチしない場合に発生していました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/reindex.html"><span class="doc">reindex</span></a>] reindexコマンドの実行によりデータが失われてしまう不具合を修正しました。</p></li>
<li><p>[httpd] 別のユーザーでワーカーを動かしている時、 <a class="reference internal" href="reference/commands/quit.html"><span class="doc">quit</span></a> と <a class="reference internal" href="reference/commands/shutdown.html"><span class="doc">shutdown</span></a> のレスポンスが壊れている問題を修正しました。 [GitHub ranguba/groonga-client#12]</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-1-2017-03-29">
<span id="release-7-0-1"></span><h2>7.0.1リリース - 2017-03-29<a class="headerlink" href="#release-7-0-1-2017-03-29" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id117">
<h3>改良<a class="headerlink" href="#id117" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p>grn_ii_cursor_next_pos()</p></li>
<li><p>grn_table_apply_expr()</p></li>
<li><p>grn_obj_is_data_column()</p></li>
<li><p>grn_obj_is_expr()</p></li>
<li><p>grn_obj_is_scalar_column()</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/column_copy.html"><span class="doc">column_copy</span></a>] 参照型のベクタのダンプをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] <code class="docutils literal notranslate"><span class="pre">array&lt;object&gt;</span></code> スタイルの重み付きベクターカラムのloadをサポートしました。 <code class="docutils literal notranslate"><span class="pre">array&lt;object&gt;</span></code> の例: <code class="docutils literal notranslate"><span class="pre">[{&quot;key1&quot;:</span> <span class="pre">weight1},</span> <span class="pre">{&quot;key2&quot;:</span> <span class="pre">weight2}]</span></code></p></li>
<li><p>インデックスを使った <code class="docutils literal notranslate"><span class="pre">!(XXX</span> <span class="pre">OPERATOR</span> <span class="pre">VALUE)</span></code> の検索をサポートしました。演算子として <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> だけでなく、 <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>、 <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>、 <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>、 <code class="docutils literal notranslate"><span class="pre">==</span></code> や <code class="docutils literal notranslate"><span class="pre">!=</span></code> も使えます。</p></li>
<li><p>インデックスを使って <code class="docutils literal notranslate"><span class="pre">!(column</span> <span class="pre">==</span> <span class="pre">CONSTANT)</span></code> を検索できるようになりました。例えば <code class="docutils literal notranslate"><span class="pre">!(column</span> <span class="pre">==</span> <span class="pre">29)</span></code> などです。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!</span></code> の最適化を以下のパターンでサポートしました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;X&quot;)</span> <span class="pre">&amp;&amp;</span> <span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;Y&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;Y&quot;)</span> <span class="pre">&amp;&amp;</span> <span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;X&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;Y&quot;)</span> <span class="pre">&amp;!</span> <span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;X&quot;)</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">XXX</span> <span class="pre">||</span> <span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;xxx&quot;)</span></code> をインデックスを使って検索できるようになりました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>]  <code class="docutils literal notranslate"><span class="pre">'{&quot;x&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;y&quot;:</span> <span class="pre">2}'</span></code> というスタイルを参照されていない重み付きベクターカラムで使うようにしました。この変更は古いGroongaには影響しません。もともとサポートされているからです。</p></li>
<li><p>[実験的] <code class="docutils literal notranslate"><span class="pre">GRN_ORDER_BY_ESTIMATED_SIZE_ENABLE</span></code> 環境変数をサポートしました。この変数はクエリの最適化を予想されるヒット件数に応じて行うかどうかを切り替えるのに使用します。この機能はデフォルトでは無効です。有効にするには <code class="docutils literal notranslate"><span class="pre">GRN_ORDER_BY_ESTIMATED_SIZE_ENABLE=yes</span></code> を指定します。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">columns</span></code> や <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> の評価結果をクエリログに追加するようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> のクエリログのフォーマットを変更しました。これは非互換な変更ですが、クエリログを変換するようなプログラムを独自に開発しているユーザー以外には影響ありません。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/table_remove.html"><span class="doc">table_remove</span></a>] 一時的なメモリ使用量を削減しました。スレッドの最大数が0のときに有効になります。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">columns[LABEL](N)</span></code> がクエリログのフォーマットとして使われます。以前は <code class="docutils literal notranslate"><span class="pre">columns(N)[LABEL]</span></code> でした。</p></li>
<li><p>[<a class="reference internal" href="tutorial/query_expansion.html"><span class="doc">クエリ拡張</span></a>] ベクターカラムを使った推奨例に更新しました。[ぐるなびさんが報告]</p></li>
<li><p>ロック中にリクエストがキャンセルされたことを検出できるようにしました。これは <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code> がロック中に意図せず無視されないようにします。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>]  <code class="docutils literal notranslate"><span class="pre">initial</span></code> および <code class="docutils literal notranslate"><span class="pre">filtered</span></code> 動的カラムをサポートしました。使用例は <code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span> <span class="pre">initial</span></code> や <code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span> <span class="pre">filtered</span></code> です。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> や <code class="docutils literal notranslate"><span class="pre">query</span></code> 、 <code class="docutils literal notranslate"><span class="pre">drilldown_filter</span></code> オプションをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] 類似文書検索をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>]  <code class="docutils literal notranslate"><span class="pre">initial</span></code> および <code class="docutils literal notranslate"><span class="pre">filtered</span></code> 動的カラムをサポートしました。使用例は <code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span> <span class="pre">initial</span></code> や <code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span> <span class="pre">filtered</span></code> です。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 動的カラムでウィンドウ関数をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 動的カラムに関するドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/window_function.html"><span class="doc">ウィンドウ関数</span></a>] ウィンドウ関数のセクションをドキュメントに追加しました。</p></li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] EOLのため、CentOS 5のサポートをやめました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.11.12に更新しました。</p></li>
<li><p>ANDでのマッチ最適化を環境変数で無効化できるようにしました。この機能は <code class="docutils literal notranslate"><span class="pre">GRN_TABLE_SELECT_AND_MIN_SKIP_ENABLE=no</span></code> を設定することで無効化できます。デフォルトでは有効になっています。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/vector_new.html"><span class="doc">vector_new</span></a>] 新規ベクターを作成するための関数を追加しました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">drilldown_filter</span></code> のドキュメントを追加しました。</p></li>
</ul>
</div>
<div class="section" id="id118">
<h3>修正<a class="headerlink" href="#id118" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/lock_clear.html"><span class="doc">lock_clear</span></a>] テンポラリデータベースに対して実行するとクラッシュする不具合を修正しました。</p></li>
<li><p>自然言語に対する動的インデックス更新でインデックスサイズが肥大化する問題を修正しました。Groonga 6.1.4から発生していました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] &quot;A &amp;&amp; B.C &#64; X&quot; というクエリでマッチすべきレコードを返さないことがある不具合を修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_io_flush()</span></code> と <code class="docutils literal notranslate"><span class="pre">grn_io_expire()</span></code> がコンフリクトする問題を修正しました。この修正がないと、 <code class="docutils literal notranslate"><span class="pre">io_flush</span></code> と <code class="docutils literal notranslate"><span class="pre">load</span></code> が同時に特定のタイミングで実行されるとクラッシュする不具合がありました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_table_remove.html"><span class="doc">logical_table_remove</span></a>] 最大スレッド数が1のときにクラッシュする不具合を修正しました。</p></li>
</ul>
</div>
<div class="section" id="id119">
<h3>感謝<a class="headerlink" href="#id119" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>株式会社ぐるなびさん</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-0-2017-02-09">
<span id="release-7-0-0"></span><h2>7.0.0リリース - 2017-02-09<a class="headerlink" href="#release-7-0-0-2017-02-09" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id120">
<h3>改良<a class="headerlink" href="#id120" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/functions/in_values.html"><span class="doc">in_values</span></a>] 参照型ベクターカラムのシーケンシャルサーチに対応しました。 [GitHub#629] [村上さんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] 誤った <code class="docutils literal notranslate"><span class="pre">drilldown[LABEL].sort_keys</span></code> が指定されたとき、無視するのではなく、エラーを報告するようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] DBのメタデータを不必要に更新しないようにしました。 <code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドを使っているだけなのにDBにロックがかかったままになってしまうのを防ぎます。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/lock_clear.html"><span class="doc">lock_clear</span></a>] <code class="docutils literal notranslate"><span class="pre">lock_clear</span></code> でDBのメタデータに対するロックも削除できるようにしました。</p></li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] GroongaをAmazon LinuxでもインストールできるようにEPELをデフォルトで有効にするようにしました。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] <code class="docutils literal notranslate"><span class="pre">default_mode</span></code> オプションで &quot;&#64;X&quot; スタイルのエイリアスが使えるようになりました。</p></li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] 動作モードのリストに関するドキュメントを更新しました。動作モードの既定値は <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> (&quot;&#64;&quot;) で全文検索を実行します。</p></li>
<li><p>[rpm][centos] CentOS 7で groonga-token-filter-stem パッケージを提供するようにしました。 ステミングに対応するための <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> トークンフィルターを提供します。　[GitHub#633] [Tim Bellefleurさんが報告]</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_record_number.html"><span class="doc">window_record_number</span></a>] <code class="docutils literal notranslate"><span class="pre">record_number</span></code> が非推奨になりました。代わりに <code class="docutils literal notranslate"><span class="pre">window_record_number</span></code> を使ってください。 <code class="docutils literal notranslate"><span class="pre">record_number</span></code> は互換性のためだけに残っています。</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_sum.html"><span class="doc">window_sum</span></a>] <code class="docutils literal notranslate"><span class="pre">window_sum</span></code> ウィンドウ関数を追加しました。PostgreSQLのsum()と同様のウィンドウ関数を提供します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TABLE_DAT_KEY</span></code> テーブルをインメモリで使ったときに静的インデックス構築をできるようにしました。 [GitHub#623] [村上さんが報告]</p></li>
<li><p>バンドルしている鬼雲を6.1.1へと更新しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[LABEL].window.group_keys</span></code> をサポートしました。ウィンドウ関数をグループごとに提供することができます。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] 誤ったキーが指定されていたときにエラーを報告するようにしました。キーの型が異なっている場合でも気付けるようになります。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] <code class="docutils literal notranslate"><span class="pre">--output_errors</span> <span class="pre">yes</span></code> オプションをサポートしました。&quot;yes&quot;を指定すると、どのレコードのloadに失敗したのかエラーを取得できるようになります。この機能を使う場合には、コマンドバージョン3を指定します。</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] キーのキャストに失敗したときのエラーメッセージをわかりやすくしました。以前は単に &quot;cast failed&quot; と表示していましたが、テーブルのキーの型とキャスト対象となるキーの型もメッセージに含まれるようになりました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.11.9に更新しました。</p></li>
</ul>
</div>
<div class="section" id="id121">
<h3>修正<a class="headerlink" href="#id121" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>存在しないソートキーを <code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL]</span></code> や <code class="docutils literal notranslate"><span class="pre">slices[LABEL]</span></code> に指定するとJSONパースエラーとなる不具合を修正しました。 [GitHub#627] [村上さんがパッチ提供]</p></li>
<li><p>存在しないグループのサブレコードにアクセスしようとするとクラッシュする不具合を修正しました。例えば、 <code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL].sort_keys</span> <span class="pre">_sum</span></code> を <code class="docutils literal notranslate"><span class="pre">calc_types</span></code> の指定なしに使っていた場合に問題が発生していました。 [GitHub#625] [村上さんがパッチ提供]</p></li>
<li><p>tokenizerでエラーが発生するとクラッシュする不具合を修正しました。tokenizer と token filterを登録していて、tokenizer にエラーがあると発生していました。</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_record_number.html"><span class="doc">window_record_number</span></a>] ウィンドウ関数の引数が正しく渡されていない不具合を修正しました。 [GitHub#634] [村上さんがパッチ提供]</p></li>
</ul>
</div>
<div class="section" id="id122">
<h3>感謝<a class="headerlink" href="#id122" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>村上さん</p></li>
<li><p>aomi-nさん</p></li>
</ul>
</div>
</div>
<div class="section" id="the-old-releases">
<h2>古いリリース<a class="headerlink" href="#the-old-releases" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="news/6.x.html">News - 6.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-5-2017-01-23">6.1.5リリース - 2017-01-23</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-4-2017-01-18">6.1.4リリース - 2017-01-18</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-3-2017-01-06">6.1.3リリース - 2017-01-06</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-2-2016-12-31">6.1.2リリース - 2016-12-31</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-1-2016-11-29">6.1.1リリース - 2016-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-0-2016-10-29">6.1.0リリース - 2016-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-9-2016-09-29">6.0.9リリース - 2016-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-8-2016-08-29">6.0.8リリース - 2016-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-7-2016-07-29">6.0.7リリース - 2016-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-5-2016-06-29">6.0.5リリース - 2016-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-4-2016-06-06">6.0.4リリース - 2016-06-06</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-3-2016-05-29">6.0.3リリース - 2016-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-2-2016-04-29">6.0.2リリース - 2016-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-1-2016-03-29">6.0.1リリース - 2016-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-0-2016-02-29">6.0.0リリース - 2016-02-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/5.x.html">News - 5.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-1-2-2016-01-29">5.1.2リリース - 2016-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-1-1-2015-12-29">5.1.1リリース - 2015-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-1-0-2015-11-29">5.1.0リリース - 2015-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-9-2015-10-29">5.0.9リリース - 2015-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-8-2015-09-29">5.0.8リリース - 2015-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-7-2015-08-31">5.0.7リリース - 2015-08-31</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-6-2015-07-29">5.0.6リリース - 2015-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-5-2015-06-29">5.0.5リリース - 2015-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-4-2015-05-29">5.0.4リリース - 2015-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-3-2015-04-29">5.0.3リリース - 2015-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-2-2015-03-31">5.0.2リリース - 2015-03-31</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-1-2015-03-29">5.0.1リリース - 2015-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-0-2015-02-09">5.0.0リリース - 2015-02-09</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/4.x.html">News - 4.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-1-1-2015-01-29">4.1.1リリース - 2015-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-1-0-2015-01-09">4.1.0リリース - 2015-01-09</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-9-2014-12-29">4.0.9リリース - 2014-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-8-2014-11-29">4.0.8リリース - 2014-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-7-2014-10-29">4.0.7リリース - 2014-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-6-2014-09-29">4.0.6リリース - 2014-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-5-2014-08-29">4.0.5リリース - 2014-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-4-2014-07-29">4.0.4リリース - 2014-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-3-2014-06-29">4.0.3リリース - 2014-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-2-2014-05-29">4.0.2リリース - 2014-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-1-2014-03-29">4.0.1リリース - 2014-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-0-2014-02-09">4.0.0リリース - 2014-02-09</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/3.x.html">News - 3.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-1-2-2014-01-29">3.1.2リリース - 2014-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-1-1-2013-12-29">3.1.1リリース - 2013-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-1-0-2013-11-29">3.1.0リリース - 2013-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-9-2013-10-29">3.0.9リリース - 2013-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-8-2013-09-29">3.0.8リリース - 2013-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-7-2013-08-29">3.0.7リリース - 2013-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-6-2013-07-29">3.0.6リリース - 2013-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-5-2013-06-29">3.0.5リリース - 2013-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-4-2013-05-29">3.0.4リリース - 2013-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-3-2013-04-29">3.0.3リリース - 2013-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-2-2013-03-29">3.0.2リリース - 2013-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-1-2013-02-28">3.0.1リリース - 2013-02-28</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-0-2013-02-09">3.0.0リリース - 2013-02-09</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/2.x.html">News - 2.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-1-2-2013-01-29">2.1.2リリース - 2013-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-1-1-2012-12-29">2.1.1リリース - 2012-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-1-0-2012-12-29">2.1.0リリース - 2012-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-9-2012-11-29">2.0.9リリース - 2012-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-8-2012-10-29">2.0.8リリース - 2012-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-7-2012-09-29">2.0.7リリース - 2012-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-6-2012-08-29">2.0.6リリース - 2012-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-5-2012-07-29">2.0.5リリース - 2012-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-4-2012-06-29">2.0.4リリース - 2012-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-3-2012-05-29">2.0.3リリース - 2012-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-2-2012-04-29">2.0.2リリース - 2012-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-1-2012-03-29">2.0.1リリース - 2012-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-0-2012-02-29">2.0.0リリース - 2012-02-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/1.3.x.html">News - 1.3.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/1.3.x.html#release-1-3-0-2012-01-29">1.3.0リリース - 2012-01-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/1.2.x.html">News - 1.2.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-9-2011-12-29">1.2.9リリース - 2011-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-8-2011-11-29">1.2.8リリース - 2011-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-7-2011-10-29">1.2.7リリース - 2011-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-6-2011-09-29">1.2.6リリース - 2011-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-5-2011-08-29">1.2.5リリース - 2011-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-4-2011-07-29">1.2.4リリース - 2011-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-3-2011-06-29">1.2.3リリース - 2011-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-2-2011-05-29">1.2.2リリース - 2011-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#id20">1.2.1リリース - 2011-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#id24">1.2.0リリース - 2011-03-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/1.1.x.html">バージョン1.1.xのお知らせ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/1.1.x.html#id1">1.1.0リリース - 2011-02-09</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/1.0.x.html">バージョン1.0.xのお知らせ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id1">1.0.8リリース - 2011-02-02</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id4">1.0.7リリース - 2011-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id8">1.0.6リリース - 2010-12-31</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id11">1.0.5リリース - 2010-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id16">1.0.4リリース - 2010-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id21">1.0.3リリース - 2010-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id26">1.0.2リリース - 2010-09-09</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id31">1.0.1リリース - 2010-09-06</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id35">1.0.0リリース - 2010-08-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/0.x.html">バージョン0.xのお知らせ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/0.x.html#id1">0.7.7リリース - 2010-08-25</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/0.x.html#id4">0.7.6リリース - 2010-08-19</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/senna.html">News in Senna period</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#senna-groonga-2009-01-14">Senna -&gt; groonga - 2009-01-14</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id1">2006-04-05</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id2">2006-03-03</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id4">2006-01-16</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id5">2006-01-12</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id7">2005-12-22</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id9">2005-10-27</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id11">2005-09-17</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id13">2005-09-08</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id15">2005-08-16</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id17">2005-07-05</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id18">2005-06-23</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id20">2005-04-12</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">お知らせ</a><ul>
<li><a class="reference internal" href="#release-10-1-1-2021-01-25">10.1.1リリース - 2021-01-25</a><ul>
<li><a class="reference internal" href="#improvements">改良</a></li>
<li><a class="reference internal" href="#fixes">修正</a></li>
<li><a class="reference internal" href="#thanks">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-1-0-2020-12-29">10.1.0リリース - 2020-12-29</a><ul>
<li><a class="reference internal" href="#id1">改良</a></li>
<li><a class="reference internal" href="#id2">修正</a></li>
<li><a class="reference internal" href="#id3">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-9-2020-12-01">10.0.9リリース - 2020-12-01</a><ul>
<li><a class="reference internal" href="#id4">改良</a></li>
<li><a class="reference internal" href="#id5">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-8-2020-10-29">10.0.8リリース - 2020-10-29</a><ul>
<li><a class="reference internal" href="#id6">改良</a></li>
<li><a class="reference internal" href="#id8">修正</a></li>
<li><a class="reference internal" href="#id9">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-7-2020-09-29">10.0.7リリース - 2020-09-29</a><ul>
<li><a class="reference internal" href="#id10">改良</a></li>
<li><a class="reference internal" href="#id11">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-6-2020-08-29">10.0.6リリース - 2020-08-29</a><ul>
<li><a class="reference internal" href="#id12">改良</a></li>
<li><a class="reference internal" href="#id13">修正</a></li>
<li><a class="reference internal" href="#id14">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-5-2020-07-30">10.0.5リリース - 2020-07-30</a><ul>
<li><a class="reference internal" href="#id15">改良</a></li>
<li><a class="reference internal" href="#id16">修正</a></li>
<li><a class="reference internal" href="#id17">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-4-2020-06-29">10.0.4リリース - 2020-06-29</a><ul>
<li><a class="reference internal" href="#id18">改良</a></li>
<li><a class="reference internal" href="#id19">修正</a></li>
<li><a class="reference internal" href="#id20">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-3-2020-05-29">10.0.3リリース - 2020-05-29</a><ul>
<li><a class="reference internal" href="#id21">改良</a></li>
<li><a class="reference internal" href="#id22">修正</a></li>
<li><a class="reference internal" href="#id23">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-2-2020-04-29">10.0.2リリース - 2020-04-29</a><ul>
<li><a class="reference internal" href="#id24">改良</a></li>
<li><a class="reference internal" href="#id25">修正</a></li>
<li><a class="reference internal" href="#id26">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-1-2020-03-30">10.0.1リリース - 2020-03-30</a><ul>
<li><a class="reference internal" href="#id27">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-10-0-0-2020-03-29">10.0.0リリース - 2020-03-29</a><ul>
<li><a class="reference internal" href="#id28">改良</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-1-2-2020-01-29">9.1.2リリース - 2020-01-29</a><ul>
<li><a class="reference internal" href="#id29">改良</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-1-1-2020-01-07">9.1.1リリース - 2020-01-07</a><ul>
<li><a class="reference internal" href="#id30">改良</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-1-0-2019-11-29">9.1.0リリース - 2019-11-29</a><ul>
<li><a class="reference internal" href="#id31">改良</a></li>
<li><a class="reference internal" href="#id32">修正</a></li>
<li><a class="reference internal" href="#id33">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-9-2019-10-30">9.0.9リリース - 2019-10-30</a><ul>
<li><a class="reference internal" href="#id34">改良</a></li>
<li><a class="reference internal" href="#id35">修正</a></li>
<li><a class="reference internal" href="#id36">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-8-2019-09-27">9.0.8リリース - 2019-09-27</a><ul>
<li><a class="reference internal" href="#id37">改良</a></li>
<li><a class="reference internal" href="#id38">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-7-2019-08-29">9.0.7リリース - 2019-08-29</a><ul>
<li><a class="reference internal" href="#id39">改良</a></li>
<li><a class="reference internal" href="#id40">修正</a></li>
<li><a class="reference internal" href="#id41">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-6-2019-08-05">9.0.6リリース - 2019-08-05</a><ul>
<li><a class="reference internal" href="#id42">改良</a></li>
<li><a class="reference internal" href="#id43">修正</a></li>
<li><a class="reference internal" href="#id44">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-5-2019-07-30">9.0.5リリース - 2019-07-30</a><ul>
<li><a class="reference internal" href="#id45">改良</a></li>
<li><a class="reference internal" href="#id46">修正</a></li>
<li><a class="reference internal" href="#id47">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-4-2019-06-29">9.0.4リリース - 2019-06-29</a><ul>
<li><a class="reference internal" href="#id48">改良</a></li>
<li><a class="reference internal" href="#id49">修正</a></li>
<li><a class="reference internal" href="#id50">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-3-2019-05-29">9.0.3リリース - 2019-05-29</a><ul>
<li><a class="reference internal" href="#id51">改良</a></li>
<li><a class="reference internal" href="#id52">修正</a></li>
<li><a class="reference internal" href="#id53">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-2-2019-04-29">9.0.2リリース - 2019-04-29</a><ul>
<li><a class="reference internal" href="#id54">改良</a></li>
<li><a class="reference internal" href="#id55">修正</a></li>
<li><a class="reference internal" href="#id56">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-1-2019-03-29">9.0.1リリース - 2019-03-29</a><ul>
<li><a class="reference internal" href="#id57">改良</a></li>
<li><a class="reference internal" href="#id58">修正</a></li>
<li><a class="reference internal" href="#id59">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-9-0-0-2019-02-09">9.0.0リリース - 2019-02-09</a><ul>
<li><a class="reference internal" href="#id60">改良</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-1-1-2019-01-29">8.1.1リリース - 2019-01-29</a><ul>
<li><a class="reference internal" href="#id61">改良</a></li>
<li><a class="reference internal" href="#id62">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-1-0-2018-12-29">8.1.0リリース - 2018-12-29</a><ul>
<li><a class="reference internal" href="#id63">改良</a></li>
<li><a class="reference internal" href="#id64">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-9-2018-11-29">8.0.9リリース - 2018-11-29</a><ul>
<li><a class="reference internal" href="#id65">改良</a></li>
<li><a class="reference internal" href="#id66">修正</a></li>
<li><a class="reference internal" href="#id67">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-8-2018-10-29">8.0.8リリース - 2018-10-29</a><ul>
<li><a class="reference internal" href="#id68">改良</a></li>
<li><a class="reference internal" href="#id69">修正</a></li>
<li><a class="reference internal" href="#id70">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-7-2018-09-29">8.0.7リリース - 2018-09-29</a><ul>
<li><a class="reference internal" href="#id71">改良</a></li>
<li><a class="reference internal" href="#id72">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-6-2018-08-29">8.0.6リリース - 2018-08-29</a><ul>
<li><a class="reference internal" href="#id73">改良</a></li>
<li><a class="reference internal" href="#id74">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-5-2018-07-29">8.0.5リリース - 2018-07-29</a><ul>
<li><a class="reference internal" href="#id75">改良</a></li>
<li><a class="reference internal" href="#id76">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-4-2018-06-29">8.0.4リリース - 2018-06-29</a><ul>
<li><a class="reference internal" href="#id77">改良</a></li>
<li><a class="reference internal" href="#id78">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-3-2018-05-29">8.0.3リリース - 2018-05-29</a><ul>
<li><a class="reference internal" href="#id79">改良</a></li>
<li><a class="reference internal" href="#id80">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-2-2018-04-29">8.0.2リリース - 2018-04-29</a><ul>
<li><a class="reference internal" href="#id81">改良</a></li>
<li><a class="reference internal" href="#id82">修正</a></li>
<li><a class="reference internal" href="#id83">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-1-2018-03-29">8.0.1リリース - 2018-03-29</a><ul>
<li><a class="reference internal" href="#id84">改良</a></li>
<li><a class="reference internal" href="#id85">修正</a></li>
<li><a class="reference internal" href="#id86">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-8-0-0-2018-02-09">8.0.0リリース - 2018-02-09</a><ul>
<li><a class="reference internal" href="#id87">改良</a></li>
<li><a class="reference internal" href="#id88">修正</a></li>
<li><a class="reference internal" href="#id89">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-1-1-2018-01-29">7.1.1リリース - 2018-01-29</a><ul>
<li><a class="reference internal" href="#id90">改良</a></li>
<li><a class="reference internal" href="#id91">修正</a></li>
<li><a class="reference internal" href="#id92">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-1-0-2017-12-29">7.1.0リリース - 2017-12-29</a><ul>
<li><a class="reference internal" href="#id93">改良</a></li>
<li><a class="reference internal" href="#id94">修正</a></li>
<li><a class="reference internal" href="#id95">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-9-2017-11-29">7.0.9リリース - 2017-11-29</a><ul>
<li><a class="reference internal" href="#id96">改良</a></li>
<li><a class="reference internal" href="#id97">修正</a></li>
<li><a class="reference internal" href="#id98">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-8-2017-10-29">7.0.8リリース - 2017-10-29</a><ul>
<li><a class="reference internal" href="#id99">改良</a></li>
<li><a class="reference internal" href="#id100">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-7-2017-09-29">7.0.7リリース - 2017-09-29</a><ul>
<li><a class="reference internal" href="#id101">改良</a></li>
<li><a class="reference internal" href="#id102">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-6-2017-08-29">7.0.6リリース - 2017-08-29</a><ul>
<li><a class="reference internal" href="#id103">改良</a></li>
<li><a class="reference internal" href="#id104">修正</a></li>
<li><a class="reference internal" href="#id105">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-5-2017-07-29">7.0.5リリース - 2017-07-29</a><ul>
<li><a class="reference internal" href="#id106">改良</a></li>
<li><a class="reference internal" href="#id107">修正</a></li>
<li><a class="reference internal" href="#id108">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-4-2017-06-29">7.0.4リリース - 2017-06-29</a><ul>
<li><a class="reference internal" href="#id109">改良</a></li>
<li><a class="reference internal" href="#id110">修正</a></li>
<li><a class="reference internal" href="#id111">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-3-2017-05-29">7.0.3リリース - 2017-05-29</a><ul>
<li><a class="reference internal" href="#id112">改良</a></li>
<li><a class="reference internal" href="#id113">修正</a></li>
<li><a class="reference internal" href="#id114">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-2-2017-04-29">7.0.2リリース - 2017-04-29</a><ul>
<li><a class="reference internal" href="#id115">改良</a></li>
<li><a class="reference internal" href="#id116">修正</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-1-2017-03-29">7.0.1リリース - 2017-03-29</a><ul>
<li><a class="reference internal" href="#id117">改良</a></li>
<li><a class="reference internal" href="#id118">修正</a></li>
<li><a class="reference internal" href="#id119">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-7-0-0-2017-02-09">7.0.0リリース - 2017-02-09</a><ul>
<li><a class="reference internal" href="#id120">改良</a></li>
<li><a class="reference internal" href="#id121">修正</a></li>
<li><a class="reference internal" href="#id122">感謝</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-old-releases">古いリリース</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="検索" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Groonga v10.1.1ドキュメント</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">お知らせ</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2021, Brazil, Inc.
    </div>
      <script src="http://connect.facebook.net/ja_JP/all.js"></script>

    <script>
      FB.init({
         appId  : null,
         status : true, // check login status
         cookie : true, // enable cookies to allow the server to access the session
         xfbml  : true  // parse XFBML
      });
    </script>
  </body>

</html>